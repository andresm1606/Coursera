(window.webpackJsonp_spotim_580132258=window.webpackJsonp_spotim_580132258||[]).push([[13],{107:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.openUserProfileModal=function(e){var t=function(e){return e instanceof Array?(console.warn("OpenUserProfileModal: should pass new object arguments"),{user:e[0],overrideDisplayName:e[1],overrideImageId:e[2],mode:e[3]}):e}(e),n=t.user,r=t.overrideDisplayName,c=t.mode;n&&n.id||u.metrics.error("openUserProfileModal","no user provided");return function(){var e=(0,o.default)(a.default.mark((function e(t,o){var u,l,d,f,p,m,v,g,y,h,b,_,O;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=o(),l=u.authentication.token,d=u.moduleOptions,f=d.disableUserProfileModal,p=d.mainLanguage,m=d.postId,v=d.spotId,g=d.brandColor,y=d.direction,h=d.enableSSO,b=d.editableSSO,_=u.currentUser,"main"===c&&t((0,i.notifyOpenUserProfile)(n)),f&&"privacy"!==c||(O="privacy"===c&&f,(0,s.default)({user:n,isDisableNavigation:O,currentUser:_,mode:c,locale:p,postId:m,spotId:v,brandColor:g,direction:y,token:l,enableSSO:h,canEditProfile:!h,canEditUserImage:!h||b,overrideDisplayName:r}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};var a=r(n(37)),o=r(n(38)),s=r(n(821)),i=n(822),u=n(3)},176:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createMessage=function(e){var t=e.rootMessageId,n=void 0===t?null:t,r=e.replyId,y=void 0===r?null:r,_=e.depth,O=void 0===_?0:_,E=e.entities,I=e.replyToStackId,T=void 0===I?null:I,C=e.parentMessageId,S=void 0===C?null:C,M=e.replyToUserId,w=void 0===M?null:M,k=e.replyToUsername,P=void 0===k?null:k,R=e.replyToDisplayName,x=void 0===R?null:R,D=e.displayName,j=void 0===D?null:D,N=e.starsRating,L=void 0===N?0:N,U=e.isRetry,A=void 0!==U&&U,V=e.id,B=void 0===V?void 0:V,H=e.dontModerate,G=void 0!==H&&H;return function(){var e=(0,o.default)(a.default.mark((function e(t,r){var o,_,I,C,M,k,R,D,N,U,V,H;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r(),_=o.comments,I=o.currentUser,C=o.moduleOptions.forceRegister,M=L>0,k=!G&&!A&&(0,f.shouldModerateMessage)(o,S),R=_.failedMessageTemp,!A&&R&&t((0,m.cleanFailedMessage)({message:null==R?void 0:R.message})),E&&0!==E.length||M){e.next=8;break}return e.abrupt("return",t({type:i.CREATE_MESSAGE_START,payload:{error:"Create message: no entities"},error:!0}));case 8:if((D=!!E.find((function(e){return e.type===p.TMessageEntity.TEXT&&e.text.length>0||e.type!==p.TMessageEntity.TEXT})))||M){e.next=11;break}return e.abrupt("return",t({type:i.CREATE_MESSAGE_START,payload:{error:"Create message: no content"},error:!0}));case 11:if(!C||I.isRegistered){e.next=13;break}return e.abrupt("return",t({type:i.CREATE_MESSAGE_START,payload:{error:"Force register to comment"},error:!0}));case 13:if(N=B||(0,v.default)(),U=E.map((function(e){switch(e.type){case p.TMessageEntity.TEXT:return(0,s.textToBackendJson)(e);case p.TMessageEntity.MENTION:return(0,s.mentionToBackendJson)(e);case p.TMessageEntity.IMAGE:return(0,s.imageToBackendJson)(e);case p.TMessageEntity.LINK:return(0,s.linkToBackendJson)(e);case p.TMessageEntity.VIDEO:return(0,s.videoToBackendJson)(e);case p.TMessageEntity.FRAME:return(0,s.frameToBackendJson)(e);case p.TMessageEntity.ANIMATION:return(0,s.animationToBackendJson)(e);default:return null}})),V={id:N,isTempId:!0,rootMessageId:n,postedAt:(0,g.fromDate)(new Date),replyId:y,entities:E,userDisplayName:j,user:I,parentMessageId:S,replyToUserId:w,replyToUsername:P,replyToDisplayName:x,starsRating:L,depth:O},H="create_".concat(0===O?"comment":"reply"),l.metrics.apm.start(H),t({type:i.CREATE_MESSAGE_START,payload:{currentUser:I,isLoggedIn:(0,u.isLoggedIn)(I),message:V,replyToStackId:T,isRetry:A}}),(0,h.lockGuestUserName)(I.id),D||!M){e.next=24;break}return e.abrupt("return",t(b({tempMessageId:N,message:V})));case 24:if(!k){e.next=26;break}return e.abrupt("return",t((0,d.default)({entities:U,message:V,tempId:N,isRetry:A})));case 26:return e.abrupt("return",t((0,c.default)({tempMessageId:N,message:V,isRetry:A})));case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};var a=r(n(37)),o=r(n(38)),s=n(51),i=n(39),u=n(63),c=r(n(419)),l=n(3),d=r(n(420)),f=n(91),p=n(421),m=n(884),v=r(n(129)),g=n(885),y=n(886),h=n(77);function b(e){e.tempMessageId;var t=e.message;return function(){var e=(0,o.default)(a.default.mark((function e(n,r){var o,s,c,d,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.starsRating,s=r(),c=s.currentUser,d=s.moduleOptions.postId,e.prev=2,l.metrics.apm.start("create_stars_rating"),e.next=6,(0,y.starsRatingRequest)(o,d);case 6:if(f=e.sent,l.metrics.apm.end("create_stars_rating"),"ok"!==(null==f?void 0:f.status)){e.next=12;break}return e.abrupt("return",n({type:i.CREATE_MESSAGE_END,payload:{message:t,isLoggedIn:(0,u.isLoggedIn)(c)}}));case 12:return l.metrics.error("create_stars_rating","Create stars rating failed"),n({type:i.NOTIFY_STARS_RATING_FAILED,payload:{message:t}}),e.abrupt("return",n({type:i.CREATE_MESSAGE_END,payload:{error:"Create stars rating failed"},error:!0}));case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(2),l.metrics.error("create_stars_rating",e.t0),n({type:i.NOTIFY_STARS_RATING_FAILED,payload:{message:t}}),e.abrupt("return",n({type:i.CREATE_MESSAGE_END,payload:{error:"Create stars rating failed",message:t},error:!0}));case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,n){return e.apply(this,arguments)}}()}},177:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"onSubmit",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"onTyping",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"userSuspended",{enumerable:!0,get:function(){return s.default}});var a=r(n(873)),o=r(n(874)),s=r(n(875))},247:function(e,t,n){"use strict";function r(e){return document.querySelector('[data-module-element-id="'.concat(e,'"] [data-spot-im-shadow-host]'))}Object.defineProperty(t,"__esModule",{value:!0}),t.getRootElement=r,t.getDocumentOrShadowRoot=function(e){var t,n;return null!==(t=null===(n=r(e))||void 0===n?void 0:n.shadowRoot)&&void 0!==t?t:document}},248:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.enableCommunityView=void 0;var a=r(n(1)).default.get("tenant_config.conversation.enable_community_view",!1);t.enableCommunityView=a},400:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(35)),s=a(n(36)),i=a(n(40)),u=a(n(41)),c=a(n(42)),l=a(n(53)),d=a(n(46)),f=r(n(6)),p=n(51),m=a(n(784)),v=n(54),g=n(43),y=a(n(18)),h=a(n(56)),b=n(52),_=n(47),O=a(n(48));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var I=function(e){(0,i.default)(n,e);var t=E(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(t){var n=e.props,r=n.tracking,a=n.onClick,o=n.postId;a({connectType:p.connectTypes.DISQUS,event:t});var s={type:"disqus-login-clicked",post_id:o};r.trackEvent(s)},e.handleDisqusLogin=function(t){13===t.keyCode&&e.handleClick(t)},e}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.t;return t=(0,y.default)(t,m.default.disqusTitle),f.default.createElement("span",{className:t,onKeyUp:this.handleDisqusLogin,onClick:this.handleClick,"data-title":n("connectWithDisqus","Connect With Disqus"),"aria-label":n("connectWithDisqus","Connect With Disqus"),"data-balloon-pos":"up"},(0,b.isMobile)()?f.default.createElement(h.default,{className:m.default.DisqusIcon,selector:"disqusIcon"}):f.default.createElement(g.Typography,{type:"action",className:m.default.disqusText},f.default.createElement(_.TranslationWrapper,{i18nKey:"connectWithDisqus"},"Connect With Disqus")),f.default.createElement("div",{className:m.default.disqusSpacer}))}}]),n}(f.Component);I.displayName="DisqusConnectButton",I.propTypes={className:d.default.string,onClick:d.default.func},I.defaultProps={className:void 0,onClick:function(){}};var T=(0,l.default)((0,O.default)({}),(0,v.withTranslation)())(I);t.default=T},406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animate=function(e,t,r){var a=r.duration,o=void 0===a?1e3:a,s=r.easing,i=void 0===s?"linear":s,u=r.delay,c=void 0===u?0:u,l=n(407)(e);return new Promise((function(e){window.requestAnimationFrame((function(){for(var n in t)t.hasOwnProperty(n)&&(l="scale"===n?l.scale(t[n]):l.set(n,t[n]));l=l.duration(o).ease(i).delay(c).end(e)}))}))},t.stopAnimation=function(e){n(407)(e).reset()}},408:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markMessage=function(e){var t=e.id;return{type:r.TOGGLE_MARK_MESSAGE,payload:{message:{id:t,isMarked:!0}}}};var r=n(39)},409:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageSelector=l,t.getMessageElement=d,t.scrollAndHighlightMessage=function(e,t){return f.apply(this,arguments)};var a=r(n(37)),o=r(n(38)),s=n(247),i=n(406);function u(e){return c.apply(this,arguments)}function c(){return(c=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.animate)(t,{opacity:.5},{duration:133,easing:"linear"});case 2:return e.next=4,(0,i.animate)(t,{opacity:1},{duration:133,easing:"linear",delay:133});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return'[data-message-id="'.concat(e,'"]')}function d(e,t){var n=(0,s.getRootElement)(t),r=l(e);return n.shadowRoot?n.shadowRoot.querySelector(r):n.querySelector(r)}function f(){return(f=(0,o.default)(a.default.mark((function e(t,n){var r,o,s=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]&&s[2],o=d(t,n)){e.next=4;break}return e.abrupt("return");case 4:r||o.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){u(o)}),3e3);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.content,a=n.attributes;return new Promise((function(n,o){var s=document.createElement("script");if(s.type="text/javascript",t&&(s.addEventListener("load",n,!1),s.addEventListener("error",o,!1),s.src=t),r&&(s.text=r),a&&Object.keys(a).forEach((function(e){s.setAttribute(e,a[e])})),e.appendChild(s),!t)return n()}))};t.default=r},413:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(49)),o=r(n(6)),s=n(3),i=r(n(412)),u=/\{\{linkValue\}\}/g,c=/\{\{modalValue\}\}/g,l=function(e){var t=e.onModalLinkClick,n=e.title,r=n.value,l=n.linkValue,d=n.modalValue,f=n.linkUrl,p=null;function m(e,t){var n=(e||"").replace(u,"<a class=".concat("spcv_modal-link-text",' target="_blank" rel="noopener noreferrer" href="').concat(f,'">').concat(l,"</a>"));if(n.length)return o.default.createElement("span",{key:t,dangerouslySetInnerHTML:{__html:n}})}if(!r)return s.metrics.error("CustomCommunityGuidelinesTitle","missing title"),null;var v=r.split(c),g=(0,a.default)(v,2),y=g[0],h=g[1],b=m(y,"1"),_=m(h,"3");return d&&(p=function(e,n){return o.default.createElement("a",{key:n,onClick:t,className:i.default.modalLinkText},e)}(d,"2")),o.default.createElement(o.default.Fragment,null,[b,p,_].filter((function(e){return e})))};t.default=l},414:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.toggleHideConversation=function(){return function(){var e=(0,o.default)(a.default.mark((function e(t,n){var r,o,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(),o=r.conversation.id,c=r.moduleOptions.spotId,t({type:s.REQUEST_TOGGLE_HIDE_CONVERSATION}),e.next=5,(0,u.toggleHideConversation)(c,o);case 5:t({type:s.RESPONSE_TOGGLE_HIDE_CONVERSATION}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:s.RESPONSE_TOGGLE_HIDE_CONVERSATION,payload:{error:e.t0,spotId:spotId,conversationId:conversationId},error:!0}),i.metrics.error("toggleHideConversation",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()};var a=r(n(37)),o=r(n(38)),s=n(39),i=n(3),u=n(81)},416:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.addMessage=function(e){return function(t,n){var r,a=n(),p=a.conversation,m=a.comments.list,v=a.moduleOptions.isConversationLiveBlog,g=a.liveBlogConfig,y=(0,l.default)(e),h=y.user,b=y.message;if(!u.findByMessageId(m,b.id)){b.isNew=!0;var _=c.createMessageStackObject({message:b,id:b.id});t({type:s.REALTIME_MESSAGE_NEW,payload:{user:h,message:b,shouldAggregate:(0,i.shouldAggregate)(a),messageStack:_}})}var O=(r={source:v?"live-blog":"conversation"},(0,o.default)(r,v?"eventCode":"postId",p.postId),(0,o.default)(r,"fromUser",{id:h.id,username:h.username,displayName:h.displayName}),(0,o.default)(r,"message",{type:0===b.depth?"comment":"reply",time:new Date(1e3*b.postedAt).getTime()}),r);if(v){var E=g.reporters.includes(h.id);O.fromUser.isReporter=E}(0,d.dispatchSpotimEvent)(f.REALTIME_NEW_MESSAGE,O)}};var o=a(n(33)),s=n(39),i=n(50),u=r(n(96)),c=r(n(89)),l=a(n(344)),d=n(55),f=n(59)},417:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageShareUrl=function(e){return f.apply(this,arguments)};var a=r(n(37)),o=r(n(38)),s=r(n(1)),i=r(n(128)),u=n(866),c=n(867),l=n(44),d=s.default.get("tenant_config.shared.share_api_version",1);function f(){return(f=(0,o.default)(a.default.mark((function e(t){var n,r,o,s,f,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.messageDepth,r=t.messageId,o=t.postId,1!==d){e.next=8;break}return e.next=4,(0,u.getMessageReference)({spotId:l.spotId,messageDepth:n,messageId:r});case 4:s=e.sent,f=s.body.reference,e.next=12;break;case 8:return e.next=10,(0,c.getMessageReference)({spotId:l.spotId,messageDepth:n,messageId:r,postId:o});case 10:s=e.sent,f=s.reference;case 12:return p=i.default.urls.share.replace("{REFERENCE_ID}",f),e.abrupt("return",p);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},419:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.tempMessageId,n=e.message,r=e.isRetry,a=void 0!==r&&r;return function(){var e=(0,i.default)(o.default.mark((function e(r,s){var i,v,C,P,R,x,D,j,N,L,U,A,V,B,H,G,W,q,F,z,K,Q,J,X,Y,Z,$;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=(i=n).rootMessageId,C=i.replyId,P=i.depth,R=i.entities,x=i.replyToStackId,D=i.parentMessageId,j=i.replyToUserId,N=i.replyToUsername,L=i.replyToDisplayName,U=i.userDisplayName,A=i.starsRating,V=s(),B=V.currentUser,H=V.conversation,G=V.moduleOptions.postId,W=d.default.get("tenant_config.moderation.content_aware_events",!1),q=k(s,n),F=b.isModerationV2CreateEnabled||H.contentType===m.ContentType.Post,z=F?R.filter((function(e){return"text"!==e.type||"text"===e.type&&""!==e.text})):R,K=P>0?"reply":"comment",(0,I.dispatchSpotimEvent)(T.CURRENT_USER_SENT_MESSAGE,{postId:G}),J=!0,!a){e.next=22;break}return e.prev=10,e.next=13,(0,h.default)(t,G);case 13:X=e.sent,Y=X.message_id,Z=X.status,Y&&(J=!1,r((0,E.changeMessageId)({tempMessageId:t,messageId:Y})),n.id=Y,n.status=(0,O.updateStatusFromRetryCall)(Z),Q=S(S({},Q),{},{body:n})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),l.metrics.error("publishMessage",e.t0);case 22:if(e.prev=22,!J){e.next=48;break}if(!(P>0)){e.next=37;break}if($=P>1?D:null,!F){e.next=32;break}return e.next=29,g.createReply({conversationId:H.id,rootMessageId:v,replyToMessageId:$,entities:z,postId:G,displayName:U,contentType:H.contentType,tempMessageId:t,starsRating:A});case 29:Q=e.sent,e.next=35;break;case 32:return e.next=34,(0,_.createReply)(v,z,{replyToMessageId:$,starsRating:A,displayName:U});case 34:Q=e.sent;case 35:e.next=46;break;case 37:if(!F){e.next=43;break}return e.next=40,g.createComment({conversationId:H.id,postId:G,entities:z,displayName:U,tempMessageId:t,contentType:H.contentType,starsRating:A});case 40:Q=e.sent,e.next=46;break;case 43:return e.next=45,(0,_.createComment)(H.id,z,{starsRating:A,displayName:U});case 45:Q=e.sent;case 46:if(!M){e.next=48;break}throw new Error("Retry Debug Error");case 48:e.next=54;break;case 50:return e.prev=50,e.t1=e.catch(22),l.metrics.error("publishMessage",e.t1),e.abrupt("return",r({type:u.CREATE_MESSAGE_END,payload:{error:e.t1,message:{id:t,rootMessageId:v,parentMessageId:D,replyId:C,depth:P,entities:z,replyToStackId:x,replyToUserId:j,replyToUsername:N,replyToDisplayName:L,displayName:U,starsRating:A,user:B},isRetry:a},error:!0}));case 54:if(e.prev=54,!Q){e.next=66;break}if(n=(0,O.normalizeMessageResponse)(Q.body,K,H.contentType,B.id),!F||""!==n.status){e.next=61;break}return e.next=60,(0,y.fetchMessageStatus)(n.id,G);case 60:n.status=e.sent;case 61:return Object.assign(n,{depth:P,tempMessageId:t,isTempId:!1,isNew:!0,parentMessageId:D,replyToUserId:j,replyToUsername:N,replyToDisplayName:L,rootMessageId:v,user:B}),W&&(0,p.onSubmit)(G,{content:z,stars:A,metadata:{},unique_content_id:q.tempMessageId||t,actual_message_id:n.id}),w(s,{message:n,currentUser:B,tempMessageId:t}),n.status=(0,f.parseMessageStatus)(n.status),e.abrupt("return",r({type:u.CREATE_MESSAGE_END,payload:{message:n,isLoggedIn:(0,c.isLoggedIn)(B),isRetry:a}}));case 66:e.next=71;break;case 68:e.prev=68,e.t2=e.catch(54),l.metrics.error("publishMessage",e.t2);case 71:case"end":return e.stop()}}),e,null,[[10,19],[22,50],[54,68]])})));return function(t,n){return e.apply(this,arguments)}}()};var o=a(n(37)),s=a(n(33)),i=a(n(38)),u=n(39),c=n(63),l=n(3),d=a(n(1)),f=n(872),p=n(177),m=n(64),v=n(22),g=r(n(82)),y=n(876),h=a(n(878)),b=n(44),_=n(81),O=n(879),E=n(880),I=n(55),T=n(59);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=d.default.get("tenant_config.moderation.retry_debug_enabled",!1);function w(e,t){var n=t.message,r=t.currentUser,a=t.tempMessageId,o=k(e,n),s=e(),i=s.moduleOptions.postId,u=s.conversation,c=S({message_id:n.id,user_id:r.id,is_registered:r.isRegistered,conversation_id:u.id,post_id:i,native:o.tempMessageId||a},function(e,t){return{item_id:(n=t,r=n.isMessageBlocked,a=n.isModerationAlertVisible,r?a?"post-anyway":"after-edit":"first-try"),segment:e.status};var n,r,a}(n,o));0===n.depth?Object.assign(c,{type:"commented"}):n.depth>0&&Object.assign(c,{type:"replied",relatedMessageId:n.parentMessageId}),(0,v.analyticsTrack)(c)}function k(e,t){var n=e(),r=n.mainSayControl,a=n.messageSayControls;return t.depth>0&&t.parentMessageId?a[t.parentMessageId]:r}},420:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.entities,n=void 0===t?[]:t,r=e.message,a=e.tempId,f=e.isRetry;return function(){var e=(0,s.default)(o.default.mark((function e(t,s){var y,h,b,_,O,E,I,T,C;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y=r.starsRating,h=r.user,b=g(n),_=s(),O=_.moduleOptions.postId,e.next=6,(0,d.onSubmit)(O,{content:b,stars:y,metadata:{},unique_content_id:a});case 6:if(E=e.sent,I=E.verdict,T=E.tags,C=l.isMessageBlockedVerdict(I,T),!(l.isSuspensionEnabled()&&T.includes(p.TPolicyTag.SUSPENDED))){e.next=13;break}return e.abrupt("return",t((0,c.updateUserSuspension)({currentUser:h,isUserSuspended:!0,isLoggedIn:(0,v.isLoggedIn)(h),message:r,verdict:I,taggers:T,isMessageBlockedVerdict:C})));case 13:if(!C){e.next=15;break}return e.abrupt("return",t({type:u.MODERATE_MESSAGE_BLOCK,payload:{currentUser:h,isLoggedIn:(0,v.isLoggedIn)(h),message:r,verdict:I,taggers:T,isMessageBlockedVerdict:C,tempId:a}}));case 15:return e.abrupt("return",t((0,i.default)({tempMessageId:a,message:r,isRetry:f,isMessageBlockedVerdict:C,taggers:T,verdict:I})));case 18:return e.prev=18,e.t0=e.catch(0),m.metrics.error("moderateAndPublishMessage",e.t0),e.abrupt("return",t((0,i.default)({tempMessageId:a,message:r,isRetry:f})));case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}()},t.createEntitiesData=g;var o=a(n(37)),s=a(n(38)),i=a(n(419)),u=n(39),c=n(881),l=r(n(91)),d=n(177),f=n(421),p=n(133),m=n(3),v=n(63);function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.find((function(e){return e.type===f.TMessageEntity.TEXT&&0===e.text.length}));return e.length>1&&t?e.filter((function(e){return e.type!==f.TMessageEntity.TEXT})):e}},421:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TMessageEntity=void 0,t.TMessageEntity=r,function(e){e.TEXT="text",e.IMAGE="image",e.LINK="link",e.VIDEO="video",e.MENTION="user-mention",e.FRAME="frame",e.ANIMATION="animation"}(r||(t.TMessageEntity=r={}))},422:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1));t.default=function(){return"dark"===a.default.get("init_data.config.inpage_skin")}},79:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Main=t.isUseShadowDomOnMain=t.isUseShadowDomOnOverlays=void 0;var o=a(n(70)),s=a(n(35)),i=a(n(36)),u=a(n(40)),c=a(n(41)),l=a(n(42)),d=a(n(37)),f=a(n(38)),p=a(n(33)),m=a(n(53)),v=a(n(153)),g=r(n(6)),y=a(n(46)),h=a(n(18)),b=n(45),_=a(n(48)),O=n(54),E=a(n(811)),I=a(n(812)),T=n(43),C=a(n(1)),S=a(n(128)),M=n(813),w=n(815),k=a(n(816)),P=a(n(839)),R=a(n(841)),x=n(842),D=n(22),j=r(n(348)),N=r(n(50)),L=a(n(865)),U=n(417),A=n(63),V=a(n(868)),B=n(869),H=n(182),G=n(44),W=n(39),q=n(64),F=a(n(870)),z=n(248),K=n(176),Q=a(n(887)),J=n(118),X=n(47),Y=n(889),Z=a(n(422)),$=n(890),ee=n(55),te=n(59),ne=n(891),re=n(3),ae=a(n(423)),oe=n(893),se=a(n(894));function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(895),n(896);var le=C.default.get("tenant_config.conversation.isUseShadowDomOnOverlays",!0);t.isUseShadowDomOnOverlays=le;var de=C.default.get("tenant_config.conversation.isUseShadowDomOnMain",!0);t.isUseShadowDomOnMain=de;var fe,pe=C.default.get("tenant_config.conversation.enable_explore_onboarding",!0);!function(e){e.START="start",e.CENTER="center"}(fe||(fe={}));var me=C.default.get("tenant_config.conversation.explore_mode_alignment",fe.START),ve=n(424),ge=(0,E.default)((function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(10),n.e(11),n.e(15),n.e(16),n.e(82),n.e(2),n.e(1),n.e(6),n.e(7),n.e(8),n.e(9),n.e(13),n.e(14),n.e(12),n.e(21),n.e(50)]).then(n.t.bind(null,28,7))})),ye=g.default.lazy((function(){return Promise.all([n.e(0),n.e(49)]).then(n.t.bind(null,29,7))})),he=g.default.lazy((function(){return Promise.all([n.e(0),n.e(55)]).then(n.t.bind(null,1116,7))}));var be=function(e){(0,u.default)(n,e);var t=ie(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).isInitialLoadComplete=!1,e.el=void 0,e.tabModeEvent=void 0,e.DocumentEventPubSub=new V.default,e.viewedOnce=!1,e.state={hasError:!1,errorDetails:{stack:"",message:""},remountHideAll:!1,isBannerVisible:z.enableCommunityView},e.conversationRef=g.default.createRef(),e.handleViewportEnter=function(){if(!e.viewedOnce){e.viewedOnce=!0;var t={type:"viewed"};e.isCommunityViewEnabled()&&Object.assign(t,{item_type:e.props.selectedCommunityView.toLowerCase()});var n=e.getCommunityQuestion();n&&Object.assign(t,{taxonomy_subject:n}),re.metrics.send("viewed"),e.props.tracking.trackEvent(t),e.props.container.style.minHeight="auto"}},e.resizeHandler=function(){var t=e.props.calculateIsMobile;t(e.el),window.addEventListener("resize",(0,v.default)((function(){return t(e.el)}),200),!1)},e.handleTabModeActivation=function(t){9===t.keyCode&&(document.body.classList.add(ve.tabMode),e.tabModeEvent.activated||(e.tabModeEvent.activated=!0,document.dispatchEvent(e.tabModeEvent)))},e.handleTabModeDeactivation=function(){document.body.classList.remove(ve.tabMode),e.tabModeEvent.activated&&(e.tabModeEvent.activated=!1,document.dispatchEvent(e.tabModeEvent))},e.unmuteUser=function(t){var n=t.detail;(0,e.props.unmuteUser)(n&&n.userId)},e.handleErrorBoxReload=function(){e.setState({hasError:!1})},e.handleRemount=function(){e.setState({remountHideAll:!0},(function(){setTimeout((function(){e.setState({remountHideAll:!1})}),500)}))},e.handleCloseToast=function(){e.props.hideNewMessageToast()},e.handleViewPost=function(){e.conversationRef.current&&e.conversationRef.current.wrappedInstance.viewMessage(e.props.newMessageToast.message.id)},e.deleteExploreBanner=function(){window.localStorage&&window.localStorage.setItem("SPOTIM_IS_EXPLORE_ONBOARDING_VIEWED","true"),e.setState({isBannerVisible:!1})},e.onBannerClose=function(){e.setState({isBannerVisible:!1}),e.deleteExploreBanner()},e.openExploreOnboarding=function(){var t,n,r;null===(t=window)||void 0===t||null===(n=t.__OPEN_WEB__)||void 0===n||null===(r=n.renderExploreOnboardingModal)||void 0===r||r.call(n),e.deleteExploreBanner()},e.getConversationBody=function(t,n,r,a,s,i,u){if(t===q.ConversationStatus.ERROR){var c=e.props.retryConversationRead;return g.default.createElement(ae.default,{onClick:c})}return t===q.ConversationStatus.FETCHING?g.default.createElement($.ConversationLoader,{isDarkMode:(0,Z.default)(),isLTR:G.isLtr}):g.default.createElement(g.default.Suspense,{fallback:g.default.createElement($.ConversationLoader,{isDarkMode:(0,Z.default)(),isLTR:G.isLtr})},g.default.createElement(ge,(0,o.default)({ref:e.conversationRef,onNotificationClick:n,conversation:r,summaryWidget:a,pagination:s,comments:i,tracking:u},{onRemount:e.handleRemount})))},e}return(0,i.default)(n,[{key:"getChildContext",value:function(){return{toastMessage:L.default,getMessageShareUrl:U.getMessageShareUrl}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.conversation,r=t.onConversationChange,a=e.conversation;this.isInitialLoadComplete||(this.isInitialLoadComplete=!0),a.id!==n.id&&r({prevConversationId:n.id,nextConversationId:a.id})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.enableAccessibilityColorContrast,n=e.conversation,r=e.scrollToComments,a=e.onConversationLoad,o=e.onScrollToConversation,s=n.id;(0,Y.clearExpiredDraftMessages)();var i=window.localStorage&&"true"!==window.localStorage.getItem("SPOTIM_IS_EXPLORE_ONBOARDING_VIEWED");this.setState({isBannerVisible:z.enableCommunityView&&i}),a(s),r&&o({conversationId:s}),this.resizeHandler(),!0===t&&document.body.classList.add(ve.accessibilityMode),this.DocumentEventPubSub.subscribe("keydown",this.handleTabModeActivation),this.DocumentEventPubSub.subscribe("mousedown",this.handleTabModeDeactivation),this.tabModeEvent=document.createEvent("Event"),this.tabModeEvent.initEvent("tabModeChanged",!0,!0),this.tabModeEvent.activated=!1,this.el&&this.el.classList.add("spot-im-conversation-module"),C.default.get("tenant_config.conversation.enableUsersMuting",!1)&&this.DocumentEventPubSub.subscribe("data-spot-im-unmute-user",this.unmuteUser),this.setMethodsOnWindow()}},{key:"getCommunityQuestion",value:function(){var e=this.props,t=e.conversation;return e.communityQuestion||t.communityQuestion}},{key:"setMethodsOnWindow",value:function(){var e,t=this;this.props.isConversationPage||(window.__SPOTIM__=ce(ce({},window.__SPOTIM__),{},{createMessage:(e=(0,f.default)(d.default.mark((function e(n){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preloadConversation(),e.next=3,t.props.createMessage(n);case 3:t.props.setCommunityView(q.CommunityViewTabTypes.Conversation);case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),switchTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.props.setCommunityView(q.CommunityViewTabTypes.Conversation),t.props.scrollToHeader(),e.focusSayControl&&t.props.focusSayControlOnSwitchTab()},preloadConversation:function(){t.preloadConversation()}}))}},{key:"componentDidCatch",value:function(e){throw new Error(e)}},{key:"componentDidUpdate",value:function(e){e.conversation.id!==this.props.conversation.id&&this.notifyConversationLoaded(),this.props.preloadConversation&&this.preloadConversation()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.conversation;(0,e.onConversationUnload)(t.id),this.DocumentEventPubSub.unsubscribe("keydown",this.handleTabModeActivation),this.DocumentEventPubSub.unsubscribe("mousedown",this.handleTabModeDeactivation),C.default.get("tenant_config.conversation.enableUsersMuting",!1)&&this.DocumentEventPubSub.unsubscribe("data-spot-im-unmute-user",this.unmuteUser)}},{key:"preloadConversation",value:function(){ge.preload()}},{key:"notifyConversationLoaded",value:function(){var e=this.props,t=e.conversation,n=e.isStarsRatingEnabled,r=e.currentUser,a=(e.postId,e.isLiveBlog),o=t.spotId,s=t.id;(0,ee.dispatchSpotimEvent)(te.CONVERSATION_LOAD,{spotId:o,conversationId:s});var i=document.querySelectorAll("".concat(G.CONV_DEFAULT_AREA_SELECTOR,",\n      ").concat(G.CONV_SPECIFIC_AREA_SELECTOR)),u=i.length>0?i[0].offsetWidth:0,c={total_comments:t.messagesCount,in_view:(0,H.getMessagesCountToFetch)().toString(),is_rating:n,avg_rate:t.averageStarsRating,is_registered:r.isRegistered,row:u};re.metrics.send("".concat(a?"live_blog_":"","loaded")),this.props.tracking.trackEvent(ce(ce({},c),{},{type:"loaded"}))}},{key:"isCommunityViewEnabled",value:function(){var e=this.props,t=e.isConversationPage,n=e.isLiveBlog;return z.enableCommunityView&&!n&&!t}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.conversation,a=n.summaryWidget,o=n.pagination,s=n.comments,i=n.onNotificationClick,u=n.currentUser,c=n.direction,l=n.selectedCommunityView,d=this.state.isBannerVisible,f=this.props.communityQuestion||r.communityQuestion;if(this.state.hasError,this.state.remountHideAll,r.isHidden)e=g.default.createElement(P.default,{conversation:r});else{var m,v=this.props,y=v.hideNonReadOnlyElements,b=v.isMobile,_=v.isLiveBlog,O=v.newMessageToast,E=v.tracking,C=v.conversationStatus,S=this.isCommunityViewEnabled(),M=S&&me===fe.CENTER,w=!!window.MSInputMethodContext&&!!document.documentMode,R=(0,h.default)(se.default.conversationView,(m={},(0,p.default)(m,se.default.liveBlog,_),(0,p.default)(m,se.default.rtl,"rtl"===c),(0,p.default)(m,"read-only",y),(0,p.default)(m,se.default.hiddenConversation,r.isHidden),(0,p.default)(m,se.default.mqMobile,b),(0,p.default)(m,se.default.ie11,w),(0,p.default)(m,se.default.alignToCenter,M),(0,p.default)(m,se.default.communityView,S),m),ve.conversationModule);e=g.default.createElement("div",{"data-spmark":"conversation conversation-id:".concat(r.id),className:R,"data-spot-im-class":"conversation-root","data-tooltips-boundaries":!0,ref:function(e){t.el=e},"data-is-logged-in":!!(0,A.isLoggedIn)(u)},pe&&S&&d&&g.default.createElement(Q.default,{text:g.default.createElement(X.TranslationWrapper,{i18nKey:"onboarding.description"},"Welcome to your new community feed! Check out your upgraded and improved experience."),iconSelector:"onboardingNew",buttonText:g.default.createElement(X.TranslationWrapper,{i18nKey:"onboarding.buttonText"},"Tell me more"),onClose:this.onBannerClose,onBannerButtonClick:this.openExploreOnboarding}),!G.shouldHideHeader&&g.default.createElement(k.default,null),(!S||l===q.CommunityViewTabTypes.Conversation)&&g.default.createElement(g.default.Fragment,null,g.default.createElement(g.default.Suspense,{fallback:null},f&&g.default.createElement(ye,{value:f})),this.getConversationBody(C,i,r,a,o,s,E),g.default.createElement(g.default.Suspense,{fallback:null},O.show&&g.default.createElement(he,{message:O.message,onClose:this.handleCloseToast,onViewPost:this.handleViewPost}))),S&&g.default.createElement("div",{"data-spot-im-module":"feed","data-spotim-module":"feed","data-spot-im-active":l===q.CommunityViewTabTypes.Explore}),g.default.createElement(F.default,{isModerator:u.isModerator}),g.default.createElement("div",{id:"tooltip-section"}))}return g.default.createElement(T.StylingWrapper,{isLtr:"ltr"===c},g.default.createElement(I.default,{onEnter:this.handleViewportEnter},g.default.createElement("div",{id:"spotim-specific-conversation",className:se.default.mainContainer,"data-spotim-app":"conversation",style:{display:"none"}},e)))}}]),n}(g.Component);t.Main=be,be.childContextTypes={toastMessage:y.default.object.isRequired,getMessageShareUrl:y.default.func.isRequired},be.defaultProps={isLiveBlog:!1};var _e=(0,m.default)((0,b.connect)((function(e){var t,n=e.currentUser,r=e.moduleOptions,a=e.comments,o=e.conversation,s=e.summaryWidget,i=e.appState.conversationStatus,u=r.enableAccessibilityColorContrast,c=r.testGroup,l=r.isConversationPage,d=r.contentType,f=N.isLiveBlog(e);return{enableAccessibilityColorContrast:u,testGroup:c,hideNonReadOnlyElements:(t={isLiveBlog:f},t.isLiveBlog?C.default.get("tenant_config.live-blog.is_read_only_mode",!1):C.default.get("tenant_config.conversation.is_read_only_mode",!1)),isMobile:N.isMobile(e),brandColor:r.brandColor,conversationSkin:r.conversationSkin,referTraffic:r.referTraffic,spotId:r.spotId,postId:r.postId,isLiveBlog:f,direction:r.direction,conversation:o,pagination:a.pagination,comments:a.list,scrollToComments:r.scrollToComments,communityQuestion:r.communityQuestion,isStarsRatingEnabled:r.isStarsRatingEnabled,summaryWidget:s,currentUser:n,newMessageToast:e.ui.newMessageToast,selectedCommunityView:N.getCommunityView(e),preloadConversation:N.getPreloadConversation(e),isConversationPage:l,contentType:d,conversationStatus:i}}),(function(e){return{calculateIsMobile:function(t){return e(j.calculateIsMobile(t))},onScrollToConversation:function(t){var n=t.conversationId;return e((0,R.default)({conversationId:n}))},onConversationLoad:function(t){return e((0,x.loadConversation)(t))},onConversationUnload:function(t){return e((0,x.unloadConversation)(t))},onConversationChange:function(t){var n=t.prevConversationId,r=t.nextConversationId;return e((0,x.conversationChange)({prevConversationId:n,nextConversationId:r}))},openLink:function(e,t,n){return(0,M.openLink)({url:e,newTab:t,referTraffic:n,href:void 0})},highlightConversationMessage:function(t,n){return e((0,w.highlightConversationMessage)(t,n))},unmuteUser:function(t){return e((0,B.unmuteUser)(t))},hideNewMessageToast:function(){e({type:W.HIDE_NEW_MESSAGE_TOAST})},createMessage:function(t){return e((0,K.createMessage)(t))},setCommunityView:function(t){e((0,J.setCommunityView)(t))},focusSayControlOnSwitchTab:function(){e((0,J.setIsFocusSayControl)(!0))},scrollToHeader:function(){e((0,J.setScrollToHeader)(!0))},retryConversationRead:function(){e((0,oe.retryConversationRead)())}}}),(function(e,t,n){var r,a=e.referTraffic,o=e.spotId,s=e.conversation,i=t.openLink,u=t.highlightConversationMessage;return ce(ce(ce(ce({},e),t),n),{},{onNotificationClick:(r=(0,f.default)(d.default.mark((function e(t){var n,r,c,l,f,p;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.conversationUrl,r=t.conversationId,c=t.message,(0,ee.dispatchSpotimEvent)(te.USER_NOTIFICATIONS_CLICK),s.id===r?u(c.id,c.depth):C.default.get("tenant_config.conversation.use_traffic_redirect_api",!1)?(l=(0,ne.buildSpotImUrl)({url:n,highlightedMessageId:c.id,highlightedMessageDepth:c.depth,highlightImmediate:!0,redirect:{source:"notification",toSpotId:o,fromSpotId:o,redirectEndpoint:S.default.urls.redirect}}),i(l,!1,a)):(f=-1!==n.indexOf("?")?"&":"?",p="".concat(n).concat(f,"utm_source=spotim&utm_medium=spotim_conversation&spot_im_redirect_source=notifications&spot_im_comment_id=").concat(c.id,"&spot_im_highlight_immediate=true"),window.location.href=p);case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})})})),(0,_.default)((function(e){var t="conversation";return e.isConversationPage&&(t=e.contentType===q.ContentType.Post?"post-page":"conversation-page"),{source:t,total_comments:e.conversation.messagesCount,is_rating:e.isStarsRatingEnabled,avg_rate:e.conversation.starRatingSummary&&e.conversation.starRatingSummary.average,is_registered:e.currentUser.isRegistered,post_id:e.postId,spot_id:e.spotId,user_id:e.currentUser.id}}),{dispatch:D.analyticsTrack}),(0,O.withTranslation)())(be);t.default=_e},80:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.openLoginSelectorModal=function(e){var t,n,r=null!==(t=null==e?void 0:e.mode)&&void 0!==t?t:"signin",c=null!==(n=null==e?void 0:e.username)&&void 0!==n?n:"";return function(){var e=(0,o.default)(a.default.mark((function e(t,n){var o,l,d,f,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o=n(),l=o.currentUser,d=o.moduleOptions,f=d.shouldOpenLogin,p=d.isConnectEnabled,!f||!p||(0,s.isLoggedIn)(l)&&"signin"===r||(0,u.openRegistrationModal)({mode:r,username:c})}catch(e){i.metrics.error("openLoginSelectorModal",e)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};var a=r(n(37)),o=r(n(38)),s=n(63),i=n(3),u=n(117)},81:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createComment=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.starsRating,a=n.displayName,o={content:t,stars:r,metadata:{}};a&&(o.metadata.display_name=a);return(0,s.default)("moderation/conversation/".concat(e,"/comment"),{data:o,method:"POST"})},t.createReply=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.replyToMessageId,a=n.starsRating,o=n.displayName,i={content:t,stars:a,metadata:{}};r&&(i.metadata.reply_to={reply_id:r});o&&(i.metadata.display_name=o);return(0,s.default)("moderation/comment/".concat(e,"/reply"),{data:i,method:"POST"})},t.deleteComment=function(e){return(0,s.default)("moderation/comment/".concat(e),{method:"DELETE"})},t.deleteReply=function(e,t){return(0,s.default)("moderation/reply/".concat(t),{method:"DELETE"})},t.editComment=function(e,t,n){var r=n.displayName,a=n.starsRating,o={content:t,stars:a};r&&(o.metadata={display_name:r});return(0,s.default)("moderation/comment/".concat(e),{data:o,method:"PATCH"})},t.editReply=function(e,t,n){var r=n.displayName,a=n.starsRating,o={content:t,stars:a};r&&(o.metadata={display_name:r});return(0,s.default)("moderation/reply/".concat(e),{data:o,method:"PATCH"})},t.reportComment=function(e){return(0,s.default)("moderation/report/comment/".concat(e),{method:"POST"})},t.reportReply=function(e){return(0,s.default)("moderation/report/reply/".concat(e),{method:"POST"})},t.blockUser=function(e,t,n){return(0,s.default)("moderation/spot/".concat(t,"/block_user/").concat(e),{data:{delete_user_spot_history:n},method:"POST"})},t.toggleHideConversation=function(e,t){var n={spot_id:e,conversation_id:t};return(0,s.default)("moderation/toggle-hide/spot/".concat(e,"/conversation/").concat(t),{data:n,method:"POST"})},t.updateCommunityQuestion=function(e){return i.apply(this,arguments)},t.globalReject=function(e){var t=e.messageId;return(0,s.default)("moderation/internal/mark-as-global-spam/".concat(t),{method:"POST"})},t.addWhiteListUser=function(e){return u.apply(this,arguments)},t.removeWhiteListUser=function(e){return c.apply(this,arguments)},t.getWhiteListUserStatus=function(e){return l.apply(this,arguments)},t.getConversationDefaultPolicy=function(e){return d.apply(this,arguments)},t.setConversationDefaultPolicy=function(e){return f.apply(this,arguments)};var a=r(n(37)),o=r(n(38)),s=r(n(73));function i(){return(i=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spotId,r=t.conversationId,o=t.communityQuestion,e.next=3,(0,s.default)("moderation/community-question/spot/".concat(n,"/conversation/").concat(r),{data:{community_question:o},method:"POST"});case 3:return i=e.sent,u=i.body,c=u.success,e.abrupt("return",{isSuccess:!1!==c});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,u,c,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spotId,r=t.userId,e.next=3,(0,s.default)("moderation/spot/".concat(n,"/whitelist_user/").concat(r),{method:"POST"});case 3:return o=e.sent,i=o.body,u=i.success,c=i.spot_id,l=i.user_id,d=i.whitelisted,e.abrupt("return",{isSuccess:!1!==u,isWhiteListed:d,spotId:c,userId:l});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,u,c,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spotId,r=t.userId,e.next=3,(0,s.default)("moderation/spot/".concat(n,"/unwhitelist_user/").concat(r),{method:"POST"});case 3:return o=e.sent,i=o.body,u=i.success,c=i.spot_id,l=i.user_id,d=i.whitelisted,e.abrupt("return",{isSuccess:!1!==u,isWhiteListed:d,spotId:c,userId:l});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,u,c,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spotId,r=t.userId,e.next=3,(0,s.default)("moderation/spot/".concat(n,"/is_whitelisted_user/").concat(r),{});case 3:return o=e.sent,i=o.body,u=i.success,c=i.spot_id,l=i.user_id,d=i.whitelisted,e.abrupt("return",{isSuccess:!1!==u,isWhiteListed:d,spotId:c,userId:l});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spotId,r=t.conversationId,e.next=3,(0,s.default)("moderation/conversation-default-policy/spot/".concat(n,"/conversation/").concat(r),{});case 3:return o=e.sent,i=o.body,u=i.default_policy,e.abrupt("return",{defaultPolicy:u});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,o.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spotId,r=t.conversationId,o=t.newPolicy,e.next=3,(0,s.default)("moderation/conversation-default-policy/spot/".concat(n,"/conversation/").concat(r,"/").concat(o),{method:"POST"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},813:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.openLink=function(e){var t=e.url,n=e.newTab,r=e.referTraffic,a=e.href;d({url:t,newTab:n,referTraffic:r,href:a})},t.default=d;var a=r(n(37)),o=r(n(38)),s=n(814),i=n(55),u=n(59);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,o.default)(a.default.mark((function e(t){var n,r,o,s,l,d,f,v,g,y,h;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.disableNavigation,o=t.referTraffic,s=t.href,l=t.redirectUrl,d=t.newTab,f=void 0!==d&&d,o){e.next=26;break}if(0!==n.indexOf(l)){e.next=26;break}n=n.substr(n.indexOf("#")+1),n=decodeURIComponent(n),v=n.split("&"),g=c(v),e.prev=7,g.s();case 9:if((y=g.n()).done){e.next=18;break}if("to_url"!==(h=y.value).split("=")[0]){e.next=16;break}return n=decodeURIComponent(h.split("=")[1]),e.next=15,m(v,s);case 15:return e.abrupt("break",18);case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),g.e(e.t0);case 23:return e.prev=23,g.f(),e.finish(23);case 26:(0,i.dispatchSpotimEvent)(u.NAVIGATION_OCCURRED,{detail:{url:n}}),r||p(n,f);case 28:case"end":return e.stop()}}),e,null,[[7,20,23,26]])})))).apply(this,arguments)}function p(e,t){var n=document.createElement("a");n.setAttribute("href",e),"http:"!==n.protocol&&"https:"!==n.protocol||e.length&&(t?window.open(e,"_blank"):window.location.href=e)}function m(e,t){return v.apply(this,arguments)}function v(){return(v=(0,o.default)(a.default.mark((function e(t,n){var r,o,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},o=c(t);try{for(o.s();!(i=o.n()).done;)u=i.value,r[u.split("=")[0]]=u.split("=")[1]}catch(e){o.e(e)}finally{o.f()}return l={events:[{type:"generated-page-view",version:1,value:{from:{spot_id:r.from_spot,source:r.source,url:n},to:{spot_id:r.to_spot,url:r.to_url}}}]},e.next=6,(0,s.track)(l);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},814:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.track=function(e){return l.apply(this,arguments)};var a=r(n(37)),o=r(n(33)),s=r(n(38)),i=r(n(73));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(){return(l=(0,s.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.default)("tracker/track",{method:"POST",data:c({},t)});case 2:return n=e.sent,r=n.body,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},815:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.highlightConversationMessage=function(e,t){return function(){var n=(0,s.default)(o.default.mark((function n(r,a){var s,l,d,f,m,v,g;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a(),l=s.moduleOptions,d=l.elementId,f=l.postId,(0,c.getMessageElement)(e,d)){n.next=9;break}return n.next=5,p(e,t,f);case 5:m=n.sent,v=m.comments,g=m.usersList,r({type:i.ADD_HIGHLIGHTED_MESSAGE,payload:{comments:v,usersList:g}});case 9:(0,c.scrollAndHighlightMessage)(e,d),r((0,u.markMessage)({id:e}));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},t.HIGHLIGHT_CONVERSATION_MESSAGE=void 0;var a=r(n(66)),o=r(n(37)),s=r(n(38)),i=n(39),u=n(408),c=n(409),l=r(n(58)),d=n(158),f=n(116);function p(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,s.default)(o.default.mark((function e(t,n,r){var s,i,u,c,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.default)("v1.0.0/conversation/read",{method:"POST",data:{count:20,offset:0,sort_by:"newest",depth:n,message_id:t},postId:r});case 2:return s=e.sent,i=s.conversation.comments[0],u=i.replies,(c=(0,a.default)(i,["replies"])).replies=[],u.unshift(c),p={comments:(0,d.flatComments)(u),users:s.conversation.users},e.abrupt("return",(0,f.parseMessage)(s.conversation.conversation_id,p));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.HIGHLIGHT_CONVERSATION_MESSAGE="HIGHLIGHT_CONVERSATION_MESSAGE"},816:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ConversationHeader=void 0;var o=a(n(33)),s=a(n(35)),i=a(n(36)),u=a(n(40)),c=a(n(41)),l=a(n(42)),d=a(n(6)),f=n(45),p=a(n(18)),m=a(n(1)),v=a(n(52)),g=a(n(400)),y=n(117),h=a(n(817)),b=n(107),_=r(n(50)),O=n(63),E=n(824),I=a(n(826)),T=a(n(835)),C=n(136),S=n(837),M=n(118),w=a(n(838)),k=n(55),P=n(64);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var x=m.default.get("tenant_config.conversation.communityGuidelinesEnabled"),D=m.default.get("tenant_config.conversation.disable_header_facelist",!1),j=function(e){(0,u.default)(n,e);var t=R(n);function n(e){var r;return(0,s.default)(this,n),(r=t.call(this,e)).headerRef=d.default.createRef(),r.openDiscusForumAccount=function(){(0,k.dispatchSpotimEvent)(C.DISQUS_FORUM_CLAIM_EVENT_NAME)},r.state={showDisqusHeader:m.default.get("tenant_config.conversation.show_disqus_header",!1)},r}return(0,i.default)(n,[{key:"componentDidUpdate",value:function(){this.props.scrollToHeader&&this.headerRef.current&&!(0,S.isElementInViewport)(this.headerRef.current)&&(this.headerRef.current.scrollIntoView(),this.props.finishScrollToHeader())}},{key:"render",value:function(){var e,t,n=this,r=this.state.showDisqusHeader,a=this.props,s=a.spotName,i=a.isLoggedIn,u=a.currentUserId,c=a.followers,l=a.useDisqusLogin,f=a.enableConversationHeaderFacesList,m=a.reporters,y=a.handleDisqusLogin,b=a.openUserProfileModal,_=a.reporterBadgeText,O=a.moderatorBadgeText,C=a.isLiveBlog,S=a.postId,M=a.isPostPage,k=a.isReadOnly;!i&&l&&(d.default.createElement(g.default,{onClick:y,postId:S}),t=!C&&r&&d.default.createElement(E.DisqusWelcome,{onImportClicked:y,onClose:function(){return n.setState({showDisqusHeader:!1})}})),!D&&f&&(e=!v.default&&d.default.createElement(h.default,{avatars:JSON.parse(JSON.stringify(c)),reporters:m,openUserProfileModal:b,spotName:s,reporterBadgeText:_,moderatorBadgeText:O,isLoggedIn:i,currentUserId:u}));var P=(0,p.default)(w.default.conversationHeader,(0,o.default)({},w.default.noFaces,!f));return C||M?null:d.default.createElement("div",{ref:this.headerRef,className:P,"data-spot-im-class":"conversation-header"},t,d.default.createElement("div",{className:w.default.info},d.default.createElement("div",{className:w.default.leftArea},d.default.createElement("div",{className:w.default.titleFacesWrapper},d.default.createElement(I.default,null),e),!k&&x&&d.default.createElement(T.default,null)),void 0))}}]),n}(d.default.Component);t.ConversationHeader=j,j.defaultProps={isMobileDevice:!1};var N=(0,f.connect)((function(e){var t=e.currentUser,n=e.conversation,r=e.followers,a=e.isReadOnly,o=e.moduleOptions,s=o.textsOverrides,i=o.useDisqusLogin,u=o.enableConversationHeaderFacesList,c=o.reporters,l=o.spotName,d=o.direction,f=o.isMobile,p=o.enableSSO,m=o.postId,g=_.isLiveBlog(e),y=s.moderatorBadgeText,h=s.reporterBadgeText;return{spotName:l,enableConversationHeaderFacesList:u,direction:d,isLoggedIn:(0,O.isLoggedIn)(t),currentUserId:t.id,messagesCount:n.messagesCount,isPostPage:n.contentType===P.ContentType.Post,useDisqusLogin:i,followers:r,moderatorBadgeText:y,reporterBadgeText:h,reporters:c,isMobileDevice:v.default||f,isLiveBlog:g,currentUser:t,enableSSO:p,postId:m,scrollToHeader:_.getShouldScrollToHeader(e),isReadOnly:a}}),(function(e){return{openUserProfileModal:function(t){return e((0,b.openUserProfileModal)(t))},handleDisqusLogin:y.initDisqusLogin,finishScrollToHeader:function(){e((0,M.setScrollToHeader)(!1))}}}))(j);t.default=N},817:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FacesList=void 0;var o=a(n(35)),s=a(n(36)),i=a(n(40)),u=a(n(41)),c=a(n(42)),l=r(n(6)),d=n(45),f=a(n(818)),p=a(n(819));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(e){(0,i.default)(n,e);var t=m(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.avatars,n=e.avatars;if(this.props.width!==e.width)return!0;if(t.length!==n.length)return!0;var r=t.map((function(e){return e.id})),a=n.map((function(e){return e.id}));return r.filter((function(e){return!a.includes(e)})).length>0}},{key:"render",value:function(){var e=this.props,t=e.avatars,n=e.currentUserId,r=e.isLoggedIn,a=e.openUserProfileModal,o=e.reporterBadgeText,s=e.moderatorBadgeText,i=e.style,u=e.spotName;return l.default.createElement("div",{className:f.default.container},l.default.createElement("section",{style:i,className:f.default.facesList,"data-spot-im-class":"faces-list"},t.slice(0,20).map((function(e){var t=e.id===n;return l.default.createElement("div",{className:f.default.faceItemWrapper,key:e.id},l.default.createElement(p.default,{user:e,imageId:e.imageId,isMe:t,isLoggedIn:r,spotName:u,openUserProfileModal:a,reporterBadgeText:o,moderatorBadgeText:s}))}))),l.default.createElement("svg",{className:f.default.faceSvgMask},l.default.createElement("defs",null,l.default.createElement("clipPath",{id:"faceItemMask"},l.default.createElement("path",{d:"M15,0 C19.9070141,0 24.2636994,2.35623795 27.0003635,5.99902151 C25.1161248,8.50617072 24,11.6227429 24,15 C24,18.3772571 25.1161248,21.4938293 26.9996365,24.0009785 C24.2636994,27.6437621 19.9070141,30 15,30 C6.71572875,30 0,23.2842712 0,15 C0,6.71572875 6.71572875,0 15,0 Z",id:"Combined-Shape"})))))}}]),n}(l.Component);t.FacesList=v,v.defaultProps={avatars:[]};var g=(0,d.connect)((function(e){return{spotId:e.moduleOptions.spotId}}))(v);t.default=g},819:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FaceItem=void 0;var o=a(n(33)),s=a(n(35)),i=a(n(36)),u=a(n(40)),c=a(n(41)),l=a(n(42)),d=a(n(53)),f=r(n(6)),p=a(n(48)),m=n(45),v=a(n(18)),g=a(n(93)),y=n(80),h=a(n(820));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,u.default)(n,e);var t=b(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).userImageRef=f.default.createRef(),e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.disableUserProfileModal,r=(0,v.default)(h.default.faceItem,(0,o.default)({},h.default.notClickable,n));return f.default.createElement("div",{className:h.default.faceItem,key:t.id},f.default.createElement(g.default,{disableUserImageUpload:!0,className:r,size:30,disableOnlineIndicator:!0,user:t}))}}]),n}(f.Component);t.FaceItem=_,_.defaultProps={openUserProfileModal:function(){},userNickName:null,spotId:null};var O=(0,d.default)((0,m.connect)((function(e){return{spotId:e.moduleOptions.spotId,token:e.authentication.token,enableSSO:e.moduleOptions.enableSSO,disableUserProfileModal:e.moduleOptions.disableUserProfileModal,disableProfileHover:e.moduleOptions.disableProfileHover}}),{onLogin:y.openLoginSelectorModal}),(0,p.default)({}))(_);t.default=O},82:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createComment=function(e){return l.apply(this,arguments)},t.createReply=function(e){return d.apply(this,arguments)},t.editMessage=function(e){return f.apply(this,arguments)},t.deleteMessage=function(e,t){return p.apply(this,arguments)},t.reportMessage=function(e,t){return m.apply(this,arguments)},t.addUserToBlockedList=function(e,t,n){return v.apply(this,arguments)},t.removeUserFromBlockedList=function(e,t){return g.apply(this,arguments)},t.addUserToAllowedList=function(e,t){return y.apply(this,arguments)},t.removeUserFromAllowedList=function(e,t){return h.apply(this,arguments)},t.approveMessage=function(e,t){return b.apply(this,arguments)},t.rejectMessage=function(e,t){return _.apply(this,arguments)},t.moderationClient=O;var a=r(n(37)),o=r(n(33)),s=r(n(38)),i=r(n(58));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(){return(l=(0,s.default)(a.default.mark((function e(t){var n,r,o,s,i,u,l,d,f,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.conversationId,o=t.postId,s=t.entities,i=t.contentType,u=t.displayName,l=t.tempMessageId,d=t.starsRating,e.next=3,O("".concat(i,"/").concat(r,"/comment"),{method:"POST",data:{content:s,metadata:c(c({},u?{display_name:u}:{}),{},{reply_to:{}}),temp_id:l,stars:d},postId:o});case 3:return f=e.sent,(p=null==f?void 0:f.message).users=null!==(n=null==p?void 0:p.users)&&void 0!==n?n:[],e.abrupt("return",{body:p});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,s.default)(a.default.mark((function e(t){var n,r,o,s,i,u,l,d,f,p,m,v,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.conversationId,o=t.replyToMessageId,s=t.rootMessageId,i=t.entities,u=t.displayName,l=t.postId,d=t.contentType,f=t.tempMessageId,p=t.starsRating,m=o?{reply_id:o}:{},e.next=4,O("".concat(d,"/").concat(r,"/comment/").concat(s,"/reply"),{method:"POST",data:{content:i,metadata:c(c({},u?{display_name:u}:{}),{},{reply_to:m}),temp_id:f,stars:p},postId:l});case 4:return v=e.sent,(g=null==v?void 0:v.message).users=null!==(n=null==g?void 0:g.users)&&void 0!==n?n:[],e.abrupt("return",{body:g});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,s.default)(a.default.mark((function e(t){var n,r,o,s,i,u,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.messageId,o=t.entities,s=t.displayName,i=t.postId,u=t.starsRating,e.next=3,O("message/".concat(r),{method:"PATCH",data:{content:o,metadata:c(c({},s?{display_name:s}:{}),{},{reply_to:{}}),stars:u},postId:i});case 3:return l=e.sent,(d=null==l?void 0:l.message).users=null!==(n=null==d?void 0:d.users)&&void 0!==n?n:[],e.abrupt("return",{body:d});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,s.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("message/".concat(t),{method:"DELETE",data:{},postId:n});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.abrupt("return",{body:{etag:0,messages_count:0,comments_count:0}});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function m(){return(m=(0,s.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("message/report",{method:"POST",data:{message_id:t},postId:n});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function v(){return(v=(0,s.default)(a.default.mark((function e(t,n,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("block-user",{method:"POST",data:{user:t,source:"conversation",apply_to_history:r},postId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,s.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("block-user",{method:"DELETE",data:{user:t,source:"conversation"},postId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,s.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("allow-user",{method:"POST",data:{user:t,source:"conversation"},postId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,s.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("allow-user",{method:"DELETE",data:{user:t,source:"conversation"},postId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=(0,s.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("messages/approve",{method:"POST",data:t,postId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=(0,s.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("messages/block",{method:"POST",data:t,postId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return(0,i.default)("v1.0.0/moderation/".concat(e),t)}},821:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(49)),o=r(n(26)),s=r(n(1)),i=n(3),u=r(n(410)),c=!1;var l=function(e){i.metrics.apm.start("user_profile_mount"),new Promise((function(e){if(c)e();else{var t=(s.default.get("assets_config")||[]).find((function(e){if(e.variant){var t,n=e.variant.split(":"),r=(0,a.default)(n,2),s=r[0],i=r[1],u=null!==(t=o.default.getVariant(s))&&void 0!==t?t:"A";return"modals"===e.module&&"user profile bundle"===e.name&&u===i}return"modals"===e.module&&"user profile bundle"===e.name}));t?(document.addEventListener("spot-im-user-profile-initialized",(function(){c=!0,e()})),(0,u.default)(document.body,"".concat(t.url)).catch((function(e){return i.metrics.error("fetchUserProfile",e)}))):console.warn('Error: cannot find "user profile bundle" in `assets_config`')}})).then((function(){window.mountUserProfile(e),i.metrics.apm.end("user_profile_mount")})).catch((function(e){i.metrics.error("fetchAndMountUserProfile",e)}))};t.default=l},822:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.notifyOpenUserProfile=function(e){return function(){var t=(0,o.default)(a.default.mark((function t(n,r){var o,l,d,f,p,m;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=r().moduleOptions.useExternalUserId,l=e.displayName,d=e.id,f=e.username,p=e.userId,m={id:d,displayName:l,username:f,userId:p},!o){t.next=8;break}return t.next=7,(0,i.getExternalUserId)({userId:d});case 7:m=t.sent;case 8:(0,c.dispatchSpotimEvent)(u.OPEN_USER_PROFILE,m),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),s.metrics.error("notifyOpenUserProfile",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()};var a=r(n(37)),o=r(n(38)),s=n(3),i=n(823),u=n(59),c=n(55)},823:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getExternalUserId=function(e){return u.apply(this,arguments)};var a=r(n(37)),o=r(n(38)),s=r(n(73)),i=r(n(83));function u(){return(u=(0,o.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,e.next=3,(0,s.default)("public-user/external-user/".concat(n),{data:{}});case 3:return r=e.sent,o=r.body,e.abrupt("return",i.default.map(o,{display_name:"displayName",image_url:"imageUrl",encrypted_pkey:"encryptedPKey",user_name:"username"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},824:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.DisqusWelcome=void 0;var a=r(n(6)),o=n(54),s=n(43),i=n(51),u=r(n(825));t.DisqusWelcome=function(e){var t=e.onClose,n=e.onImportClicked,r=(0,o.useTranslation)().t;return a.default.createElement("div",{className:u.default.disqusWelcomeContainer,"data-spotim-class":"disqus-welcome-container"},a.default.createElement("span",{className:u.default.icon},a.default.createElement(s.Icon,{name:"spotim-bubbles",type:"custom"})),a.default.createElement("div",{className:u.default.textPlaceholder},a.default.createElement(s.Typography,{type:"h3",weight:"bold"},r("disqusWelcome.meetYourCommunity","Meet your new conversation!")),a.default.createElement(s.Typography,{type:"modalBody",className:u.default.margin},r("disqusWelcome.importDisqusProfile","Create your new profile by importing your Disqus information")),a.default.createElement(s.Button,{mode:"primary",onClick:function(){return n({connectType:i.connectTypes.DISQUS})}},r("disqusWelcome.importProfile","Import Profile"))),a.default.createElement(s.CloseButton,{onClick:t,className:u.default.closeButton}))}},826:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(33)),s=a(n(827)),i=a(n(6)),u=a(n(18)),c=n(45),l=n(43),d=a(n(1)),f=n(48),p=r(n(50)),m=n(39),v=n(47),g=n(248),y=n(219),h=a(n(829)),b=n(64),_=n(118),O=a(n(830)),E=n(411),I=d.default.get("tenant_config.communityView.reverseTabsOrder",!1),T=function(e){var t=e.selectedCommunityView,n=e.handleTabClick;return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Button,{className:(0,u.default)(h.default.tabButton,(0,o.default)({},h.default.selected,t===b.CommunityViewTabTypes.Explore)),onClick:function(){return n(b.CommunityViewTabTypes.Explore)}},i.default.createElement(l.Typography,{type:"product-heading",className:h.default.headerText},i.default.createElement(O.default,null,i.default.createElement(v.TranslationWrapper,{i18nKey:"inpage.header.explore"},"Explore")))),i.default.createElement("div",{className:h.default.marginVMd}))},C=(0,c.connect)((function(e){var t=e.moduleOptions,n=e.conversation,r=t.isStarsRatingEnabled,a=t.textsOverrides,o=t.spotId,s=t.isConversationPage;return{isStarsRatingEnabled:r,conversationHeaderText:a.conversationHeaderText,starsRatingHeaderText:a.starsRatingHeaderText,isLiveBlog:p.isLiveBlog(e),messagesCount:n.messagesCount,spotId:o,selectedCommunityView:p.getCommunityView(e),isConversationPage:s}}),(function(e){return{setCommunityView:function(t){e((0,_.setCommunityView)(t))},preloadConversation:function(){e({type:m.PRELOAD_CONVERSATION})}}}))((function(e){var t,n=e.isStarsRatingEnabled,r=e.isLiveBlog,a=e.conversationHeaderText,o=e.starsRatingHeaderText,c=e.messagesCount,l=void 0===c?0:c,d=e.selectedCommunityView,p=e.isConversationPage,m=e.setCommunityView,_=e.preloadConversation,O=(0,f.useTracking)();function C(e){m(e),O.trackEvent({type:"change-tab-clicked",item_type:e.toLowerCase()})}if(r)return null;var S=g.enableCommunityView&&!r&&!p;return n?t=o||i.default.createElement(v.TranslationWrapper,{i18nKey:"inpage.header.starsRating"}):a&&(t=a),i.default.createElement("div",{className:(0,u.default)(h.default.headers,(y.defaultCommunityView===b.CommunityViewTabTypes.Conversation||I)&&h.default.reversed,!S&&h.default.singleTab),onMouseEnter:(0,s.default)(_)},S&&i.default.createElement(T,{selectedCommunityView:d,handleTabClick:function(){return C(b.CommunityViewTabTypes.Explore)}}),i.default.createElement(E.ConversationButton,{enableCommunityViewOptions:S,selectedCommunityView:d,handleTabClick:function(){return C(b.CommunityViewTabTypes.Conversation)},handleConversationHeaderGotFocus:function(){var e;null===(e=document.querySelector('[tabindex="2"]'))||void 0===e||e.focus()},headerText:t,messagesCount:l}))}));t.default=C},830:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(6)),o=r(n(831));t.default=function(e){var t=e.children;return a.default.createElement("span",{className:o.default.wrapper},a.default.createElement("span",{className:o.default.normal},t),a.default.createElement("span",{className:o.default.strong},t))}},835:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(6)),s=n(48),i=n(45),u=r(n(1)),c=r(n(412)),l=a(n(50)),d=r(n(413)),f=r(n(836)),p=n(43),m=n(77),v=u.default.get("tenant_config.conversation.communityGuidelinesEnabled",!1),g=u.default.get("tenant_config.conversation.communityGuidelinesTitle",{key:"defaultTitle.0",value:"Your voice matters. Discussions are moderated for civility."}),y=(0,i.connect)((function(e){return{postId:e.conversation.postId,isLiveBlog:l.isLiveBlog(e)}}))((function(e){var t=e.isLiveBlog,n=e.postId,r=(0,s.useTracking)();function a(){r.trackEvent({type:"community-guidelines-clicked",item_type:"community-guidelines-page",target_type:"main"}),(0,m.openCommunityGuidelines)(n)}var i="CUSTOM"===(v&&g&&g.key?"DEFAULT":"CUSTOM")?o.default.createElement(d.default,{title:g,onModalLinkClick:a}):o.default.createElement(f.default,{title:g,onModalLinkClick:a});return v&&o.default.createElement(o.Fragment,null,!t&&o.default.createElement(p.Typography,{type:"product-sub-heading",className:c.default.subheaderContainer},i))}));t.default=y},836:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(6)),o=n(54),s=r(n(413)),i=function(e){var t,n,r=e.onModalLinkClick,i=e.title,u=(0,o.useTranslation)("community-guidelines").t,c=i.value,l=i.key,d=i.modalValue,f=i.linkUrl,p=i.linkValue,m=u("".concat(l,".value"),c,{modalValue:"{{modalValue}}",linkUrl:"{{linkUrl}}",linkValue:"{{linkValue}}"});return d&&(t=u("".concat(l,".modalValue"),d)),p&&(n=u("".concat(l,".linkValue"),p)),a.default.createElement(s.default,{title:{value:m,modalValue:t,linkValue:n,linkUrl:f},onModalLinkClick:r})};t.default=i},837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isElementInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.top<window.innerHeight||t.top<0&&t.bottom>0}},839:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HiddenConversationAlert=void 0;var o=a(n(35)),s=a(n(36)),i=a(n(40)),u=a(n(41)),c=a(n(42)),l=r(n(6)),d=a(n(46)),f=n(45),p=n(414),m=a(n(840)),v=n(47);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var y=function(e){(0,i.default)(n,e);var t=g(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.isModerator,n=e.onToggleHide,r=null;return t&&(r=l.default.createElement("div",null,l.default.createElement("span",null,l.default.createElement(v.TranslationWrapper,{i18nKey:"inpage.hidden.text"})),"",l.default.createElement("span",{className:m.default.link,onClick:n},l.default.createElement(v.TranslationWrapper,{i18nKey:"inpage.hidden.button"})),"")),r}}]),n}(l.Component);t.HiddenConversationAlert=y,y.displayName="HiddenConversationAlert",y.propTypes={isModerator:d.default.bool.isRequired,onToggleHide:d.default.func};var h=(0,f.connect)((function(e){return{isModerator:e.currentUser.isModerator}}),(function(e){return{onToggleHide:function(){return e((0,p.toggleHideConversation)())}}}))(y);t.default=h},841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.conversationId;return{type:"SCROLL_TO_CONVERSATION",payload:{conversationId:t}}},t.SCROLL_TO_CONVERSATION=void 0;t.SCROLL_TO_CONVERSATION="SCROLL_TO_CONVERSATION"},842:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.loadConversation=function(e){return function(t,n){l(e,t,n)}},t.unloadConversation=function(e){return function(){d(e)}},t.conversationChange=function(e){var t=e.prevConversationId,n=e.nextConversationId;return function(e,r){d(t),l(n,e,r)}};var a,o=r(n(843)),s=r(n(1)),i=n(3),u=n(844),c=n(44);function l(e,t,n){var r=n().conversation,l={"x-spot-id":c.spotId,"x-post-id":r.postId};try{var d=new o.default({url:"v1.0.0/conversation/realtime/read",timeout:parseInt(s.default.get("tenant_config.realtime.start_timeout_milliseconds",3e4),10),requestParams:{headers:l}});e&&(a=new u.ConversationRealtimeHandlers(e,d,t,n))}catch(e){i.metrics.error("subscribeRealtime",e)}}function d(e){try{e&&a.unsubscribeEvents()}catch(e){i.metrics.error("unsubscribeRealtime",e)}}},844:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestSent=C,t.ConversationRealtimeHandlers=void 0;var a=r(n(49)),o=r(n(35)),s=r(n(36)),i=r(n(40)),u=r(n(41)),c=r(n(42)),l=n(3),d=n(51),f=n(845),p=n(416),m=n(134),v=n(166),g=n(167),y=n(304),h=n(112),b=n(864),_=n(305),O=n(39),E=n(358);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var T={};function C(e){return!!T[e]}var S=function(e){(0,i.default)(n,e);var t=I(n);function n(e,r,a,s){var i;return(0,o.default)(this,n),(i=t.call(this)).conversationId=e,i.realTime=r,i.dispatch=a,i.getState=s,i.dispatchTimes=[],i.subscribeOpts=void 0,i.execute=void 0,i.unsubscribeCallbacks=void 0,i.wrapWithTryCatch=function(e,t){return function(n){try{t(n)}catch(t){l.metrics.error("wrapWithTryCatch",t,{handler:e})}}},i.picker=function(e){return e[i.conversationId]},i.subscribeOpts=[],i.unsubscribeCallbacks=[],i.registerEvents(),i}return(0,s.default)(n,[{key:"isSentByMe",value:function(e){return C(e)}},{key:"getFilterOptions",value:function(){return{filterMine:!0,filterConversationId:this.conversationId}}},{key:"internalDispatch",value:function(e){this.dispatch(e),this.dispatchTimes.push((new Date).getTime()),this.dispatchTimes.length>=5&&(this.dispatchTimes.shift(),this.checkOptimizedMessageStack())}},{key:"checkOptimizedMessageStack",value:function(){this.dispatchTimes[this.dispatchTimes.length-1]-this.dispatchTimes[0]<1e4?this.getState().ui.optimizedMessageStack||this.dispatch((0,y.startOptimizedMessageStack)()):this.getState().ui.optimizedMessageStack&&this.dispatch((0,y.stopOptimizedMessageStack)())}},{key:"registerEvents",value:function(){var e=this;this.subscribeOpts.push({topic:"conversation/new-messages",params:function(){return{conversation_id:e.conversationId}},pick:this.picker,callback:this.wrapWithTryCatch("conversation/new-messages",(function(t){var n=e.getState();t.forEach((function(t){var r;t.user_id!==(null===(r=n.currentUser)||void 0===r?void 0:r.id)&&e.internalDispatch((0,p.addMessage)(t))}))}))}),this.subscribeOpts.push({topic:"conversation/count-messages",params:function(){return{conversation_id:e.conversationId}},pick:this.picker,callback:this.wrapWithTryCatch("conversation/count-messages",(function(t){var n=(0,a.default)(t,1)[0];e.internalDispatch({type:O.UPDATE_CONVERSATION_MESSAGES_COUNT,payload:(0,f.camel)(n)})}))}),this.subscribeOpts.push({topic:"online/users",params:function(){return{conversation_id:e.conversationId}},pick:this.picker,callback:this.wrapWithTryCatch("online/users",(function(t){e.internalDispatch((0,_.addFollowersData)(t)),l.metrics.send("fetch_online_users_faces_list")}))}),this.subscribeOpts.push({topic:"conversation/updated-messages",params:function(){return{conversation_id:e.conversationId}},pick:this.picker,callback:this.wrapWithTryCatch("conversation/updated-messages",(function(t){if(t&&t.length>0){var n=e.getState().reportedComments,r=t.filter((function(e){return(null==e?void 0:e.id)&&!n[null==e?void 0:e.id]}));e.internalDispatch((0,m.updateMessages)(r))}}))}),this.subscribeOpts.push({topic:"conversation/deleted-messages",params:function(){return{conversation_id:e.conversationId,message_ids:[]}},pick:this.picker,callback:this.wrapWithTryCatch("conversation/deleted-messages",(function(t){if(t.length>0){var n=e.getState(),r=n.currentUser,a=n.reportedComments,o=t.filter((function(e){return e.status===d.statuses.BLOCKED})),s=t.filter((function(e){return(null==e?void 0:e.id)&&e.user_id!==(null==r?void 0:r.id)&&!a[null==e?void 0:e.id]&&"deleted"===e.status}));o.length>0&&e.internalDispatch((0,g.rejectMessages)(o)),s.length>0&&e.internalDispatch((0,v.deleteMessages)(s))}}))}),this.subscribeOpts.push({topic:"conversation/typing-v2-users",params:function(){return{conversation_id:e.conversationId,message_ids:[]}},pick:this.picker,callback:this.wrapWithTryCatch("conversation/typing-v2-users",(function(t){var n=e.getState().currentUser;e.internalDispatch((0,h.startTyping)(e.conversationId,t.map((function(e){return{messageId:null==e?void 0:e.key,count:null==e?void 0:e.count,users:null==e?void 0:e.users}})),n.id)),l.metrics.send("typing_v2_users",{tags:{typingsCount:String(t.length)}})}))}),this.subscribeOpts.push({topic:"conversation/notifications-count",params:function(){return{conversation_id:e.conversationId}},pick:this.picker,callback:this.wrapWithTryCatch("conversation/notifications-count",(function(t){var n=(0,a.default)(t,1)[0];e.internalDispatch((0,E.setUnseenNotificationsCount)(null==n?void 0:n.unseen))}))}),this.subscribeOpts.forEach((function(t){var n=e.realTime.subscribe(t);e.unsubscribeCallbacks.push(n)}))}},{key:"unsubscribeEvents",value:function(){this.unsubscribeCallbacks.forEach((function(e){e()}))}}]),n}(b.RealtimeHandlers);t.ConversationRealtimeHandlers=S},845:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.camel=void 0;var a=r(n(7)),o=r(n(846));t.camel=function(e){return"string"==typeof e?(0,o.default)(e):function e(t,n){var r;return Array.isArray(n)?n.map((function(n){return"string"==typeof n?n:e(t,n)})):"object"===(0,a.default)(n)&&null!==n?(r=Object.keys(n)).map((function(e){return t(e)})).reduce((function(a,o,s){var i,u;return i=n[r[s]],u=e(t,i),a[o]=u,a}),{}):n}(o.default,e)}},864:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RealtimeHandlers=void 0;var a=r(n(35)),o=r(n(36)),s=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,[{key:"filter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.filterMine,t.filterConversationId),r=void 0===n?void 0:n;if(r){var a=e.conversation_id,o=e.conversationId,s=!(o=o||a)||r!==o;if(s)return!1}return!0}},{key:"execute",value:function(e,t,n){this.filter(e,t)&&n()}},{key:"isSentByMe",value:function(e){throw new Error("BaseRealtimeHandlers.isSentByMe should be implemented")}}]),e}();t.RealtimeHandlers=s},865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={show:function(){},values:{RANK:5,NEW_MESSAGE:20}};t.default=r},866:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageReference=function(e){var t=e.spotId,n=e.messageDepth,r=void 0===n?0:n,o=e.messageId,s={spot_id:t,message_type:0===r?"comment":"reply",message_id:o};return(0,a.default)("conversation-read/message-ref",{method:"POST",data:s})};var a=r(n(73))},867:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageReference=function(e){var t=e.spotId,n=e.postId,r=e.messageDepth,o=void 0===r?0:r,s=e.messageId,i={spot_id:t,entity_type:0===o?"comment":"reply",entity_id:s};return(0,a.default)("v1.0.0/share/message",{method:"POST",postId:n,data:i})};var a=r(n(58))},868:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(35)),o=r(n(36)),s=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,[{key:"subscribe",value:function(e,t){document.addEventListener(e,t)}},{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)}},{key:"unsubscribe",value:function(e,t){document.removeEventListener(e,t)}}]),e}();t.default=s},869:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmuteUser=function(e){return function(t){t({type:r.UNMUTE_USER,payload:{userId:e}})}};var r=n(39)},870:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ConversationFooter=void 0;var o=a(n(35)),s=a(n(36)),i=a(n(40)),u=a(n(41)),c=a(n(42)),l=r(n(6)),d=n(45),f=r(n(50)),p=n(44),m=n(80),v=n(20),g=n(418);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,i.default)(n,e);var t=y(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.isModerator,n=e.postId,r=e.isLiveBlog,a=e.allowLogin,o=e.onLogin;return l.default.createElement(g.Footer,{isModerator:t,postId:n,isLiveBlog:r,allowLogin:a,onLogin:o,hasFeedback:!0})}}]),n}(l.Component);t.ConversationFooter=h,h.displayName="ConversationFooter";var b=(0,d.connect)((function(e){return{postId:e.moduleOptions.postId,isLiveBlog:f.isLiveBlog(e),allowLogin:!(0,v.isLoggedIn)(e.currentUser)&&(e.moduleOptions.isConnectEnabled&&!e.moduleOptions.enableSSO||p.enableSsoLogin)}}),(function(e){return{onLogin:function(){e((0,m.openLoginSelectorModal)())}}}))(h);t.default=b},872:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.parseMessageStatus=void 0;var a=r(n(1)),o=n(132);t.parseMessageStatus=function(e){var t=e,n=a.default.get("init_data.config.policy.roger_mode",!1);return"require_approval"===e&&(t=o.PENDING),"block_all"===e&&(t=o.BLOCKED),t!==o.APPROVED&&n&&(t=o.APPROVED),t}},873:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(58));t.default=function(e,t){return(0,a.default)("v1.0.0/moderation/verdict/afterclick",{method:"POST",postId:e,data:t})}},874:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(58));t.default=function(e,t){return(0,a.default)("v1.0.0/moderation/verdict/realtime",{method:"POST",postId:e,data:t})}},875:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(58));t.default=function(e){return(0,a.default)("v1.0.0/moderation/verdict/user-suspended",{method:"GET",postId:e,data:{}})}},876:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.runFetchMessageStatus=m,t.fetchMessageStatus=function(e,t){return new Promise(function(){var n=(0,o.default)(a.default.mark((function n(r){var o,s;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=setTimeout((function(){r(p)}),d),n.next=3,m(e,t);case 3:s=n.sent,r(s),clearTimeout(o);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())};var a=r(n(37)),o=r(n(38)),s=n(51),i=r(n(1)),u=n(3),c=r(n(877)),l=i.default.get("tenant_config.conversation.status_fetch_interval_in_ms",300),d=i.default.get("tenant_config.conversation.status_fetch_timeout_in_ms",3e3),f=i.default.get("tenant_config.conversation.status_fetch_retry_count",12),p=i.default.get("tenant_config.conversation.status_fetch_default_fallback_status",s.statuses.APPROVED);function m(e,t){return v.apply(this,arguments)}function v(){return(v=(0,o.default)(a.default.mark((function e(t,n){var r,o,s,i=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:0,e.prev=1,!(++r<=f)){e.next=15;break}return e.next=6,(0,c.default)(n,t);case 6:if(o=e.sent,"processing"!==(s=o.status)){e.next=12;break}return e.next=11,g(l);case 11:return e.abrupt("return",m(t,n,r));case 12:return e.abrupt("return",s);case 15:if(status){e.next=19;break}return e.abrupt("return",p);case 19:return e.abrupt("return",status);case 20:e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(1),u.metrics.error("runFetchMessageStatus",e.t0),e.abrupt("return",m(t,n,r));case 26:case"end":return e.stop()}}),e,null,[[1,22]])})))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(82);t.default=function(e,t){return(0,r.moderationClient)("message/".concat(t,"/status"),{method:"GET",postId:e,data:{}})}},878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(82);t.default=function(e,t){return(0,r.moderationClient)("retry-status/".concat(e),{method:"GET",postId:t,data:{}})}},879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMessageResponse=function(e,t,n,r){return Object.assign(e,{entities:e.entities?e.entities:e.content,type:t,commenter_id:r,metadata:{scope:n},stars:e.stars,users:[],starsRating:e.stars}),delete e.content,e},t.updateStatusFromRetryCall=function(e){return e&&"processing"!==e?e:""}},880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMessageId=function(e){return{type:r.CHANGE_MESSAGE_ID,payload:e}};var r=n(39)},881:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.updateUserSuspension=function(e){var t=e.isUserSuspended,n=e.verdict,r=e.taggers,a=e.isMessageBlockedVerdict,u=(0,o.default)(e,["isUserSuspended","verdict","taggers","isMessageBlockedVerdict"]);return function(e,o){return t&&e((0,i.realtimeModerationEventOccurred)({type:"suspension-triggered"})),e({type:s.UPDATE_USER_SUSPENSION,payload:c({isUserSuspended:t,verdict:n,taggers:r,isMessageBlockedVerdict:a},u)})}};var a=r(n(33)),o=r(n(66)),s=n(39),i=n(882);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},882:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.realtimeModerationEventOccurred=void 0;var a=r(n(33)),o=n(883);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.realtimeModerationEventOccurred=function(e){return function(t,n){var r=n().currentUser,i=r.isRegistered,u=r.id;t((0,o.trackableEventOccurred)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({item_type:"realtime-moderation",user_id:u,is_registered:i},e)))}}},883:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.trackableEventOccurred=void 0;var a=r(n(33)),o=n(22);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.trackableEventOccurred=function(e){return function(t,n){var r,i=null===(r=n())||void 0===r?void 0:r.moduleOptions,u=i.spotId,c=i.postId;(0,o.analyticsTrack)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({spot_id:u,post_id:c},e))}}},884:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanFailedMessage=function(e){return{type:r.CLEAN_FAILED_MESSAGE,payload:e}};var r=n(39)},885:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromDate=t.toDate=void 0;t.toDate=function(e){return new Date(1e3*e)};t.fromDate=function(e){return e.getTime()/1e3}},886:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.starsRatingRequest=function(e,t){return i.apply(this,arguments)};var a=r(n(37)),o=r(n(38)),s=r(n(58));function i(){return(i=(0,o.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={stars:t},e.next=3,(0,s.default)("v1.0.0/conversation/rate",{postId:n,method:"POST",data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},887:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(6)),o=n(43),s=r(n(56)),i=r(n(888)),u=function(e){var t=e.text,n=e.iconSelector,r=e.buttonText,u=e.onClose,c=e.onBannerButtonClick;return a.default.createElement("div",{className:i.default.Banner},a.default.createElement(o.CloseButton,{className:i.default.BannerCloseButton,onClick:u}),a.default.createElement("div",{className:i.default.BannerContentWrapper},a.default.createElement(s.default,{className:i.default.BannerIcon,selector:n}),a.default.createElement(o.Typography,{className:i.default.BannerText,type:"body"},t,"",a.default.createElement(o.Button,{mode:"link",className:i.default.BannerButton,onClick:c},r))))};t.default=u},889:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.clearExpiredDraftMessages=void 0;var a=r(n(49)),o=n(3),s=n(51),i=function(e){return e.startsWith("conversation")},u=function(e){if(e.hasOwnProperty("entities")&&Array.isArray(e.entities)&&(0,s.hasText)(e)){var t=(new Date).getTime();return!(e.expiresIn&&t-(null==e?void 0:e.expiresIn)>=0)}return!1};t.clearExpiredDraftMessages=function(){var e=localStorage.getItem("SPOTIM_DRAFT_MESSAGE_V2");if(e)try{for(var t=JSON.parse(e),n=0,r=Object.entries(t);n<r.length;n++){var s=(0,a.default)(r[n],2),c=s[0],l=s[1];i(c)&&!u(l)&&delete t[c]}localStorage.setItem("SPOTIM_DRAFT_MESSAGE_V2",JSON.stringify(t))}catch(e){o.metrics.error("clearExpiredDraftMessages",e)}}},890:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationLoader=void 0;var a=r(n(70)),o=r(n(6)),s=r(n(178)),i=n(44),u={backgroundColor:"#f2f2f2",foregroundColor:"#e3e3e3"},c={backgroundColor:"#7b7f83",foregroundColor:"#b3b3b3"};t.ConversationLoader=function(e){var t=e.isDarkMode,n=e.isLTR;return o.default.createElement("div",{id:i.CONVERSATION_ID,style:{width:"100%",maxHeight:370}},o.default.createElement(s.default,(0,a.default)({rtl:!n,speed:2,width:"100%"},t?c:u),o.default.createElement("rect",{x:"88",y:"33",rx:"6",ry:"6",width:"60%",height:"54"}),o.default.createElement("rect",{x:"88",y:"113",rx:"6",ry:"6",width:"60%",height:"13"}),o.default.createElement("rect",{x:"88",y:"135",rx:"6",ry:"6",width:"45%",height:"13"}),o.default.createElement("circle",{cx:"51",cy:"59",r:"21"}),o.default.createElement("circle",{cx:"51",cy:"128",r:"21"}),o.default.createElement("rect",{x:"30",y:"172",rx:"6",ry:"6",width:"80%",height:"15"}),o.default.createElement("rect",{x:"30",y:"203",rx:"6",ry:"6",width:"80%",height:"15"})))}},891:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.makeRedirectUrl=u,t.buildSpotImUrl=function(e){var t=e.url,n=e.highlightedMessageId,r=void 0===n?null:n,c=e.highlightedMessageDepth,l=void 0===c?0:c,d=e.highlightImmediate,f=void 0===d?null:d,p=e.scrollToComments,m=void 0===p?null:p,v=e.typingUsersCount,g=void 0===v?0:v,y=e.redirect,h=void 0===y?void 0:y,b=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,o.default)(e,["url","highlightedMessageId","highlightedMessageDepth","highlightImmediate","scrollToComments","typingUsersCount","redirect"]));r&&(0===l?b.spot_im_comment_id=r:b.spot_im_reply_id=r,null!==f&&(b.spot_im_highlight_immediate=f));g>0&&(b.spot_im_state="typing");null!==m&&(b.spot_im_scroll_to_comments=m);t=s.default.buildUrl(t,b),h&&(t=u({url:t,redirectParams:h}));return t};var a=r(n(33)),o=r(n(66)),s=r(n(220));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){var t=e.url,n=e.redirectParams,r=void 0===n?{}:n,a={to_url:t,from_spot:r.fromSpotId,to_spot:r.toSpotId,source:r.source||null},o=Object.keys(a).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(a[e]))})).join("&");return"".concat(r.redirectEndpoint,"#").concat(window.encodeURIComponent(o))}},893:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.retryConversationRead=void 0;var a=r(n(37)),o=r(n(38)),s=n(50),i=n(255),u=n(247),c=n(365),l=n(118),d=n(64),f=n(170),p=n(359),m=n(3),v=n(44);t.retryConversationRead=function(){return function(){var e=(0,o.default)(a.default.mark((function e(t,n){var r,o,g,y,h,b,_,O,E,I,T,C;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),o=(0,s.isLiveBlog)(r),g=r.moduleOptions,y=r.conversation,h=g.postId,b=g.elementId,_=g.isConversationPage,O=y.contentType,E=(0,u.getRootElement)(b)){e.next=8;break}return e.abrupt("return");case 8:t((0,f.setConversationStatus)({conversationStatus:d.ConversationStatus.FETCHING})),T="true"===(null==E?void 0:E.getAttribute(v.PREVIEW_ATTR)),C=new Promise((function(e){I=setTimeout((function(){e(!1)}),v.CONVERSATION_LOAD_TIMEOUT)})),Promise.race([C,(0,i.getConversationData)({postId:h,element:E,isPreview:T,isLiveBlog:o})]).then((function(e){if(!e||!e.data)return m.metrics.error("conversation failed to load",new Error("read failed")),void t((0,f.setConversationStatus)({conversationStatus:d.ConversationStatus.ERROR}));clearTimeout(I);var n=e.data;t((0,p.initConversation)({data:n,postId:h,contentType:O})),(0,c.isBackToCommentsWithoutConversationPage)(_)&&t((0,l.setCommunityView)(d.CommunityViewTabTypes.Conversation,!1))})).catch((function(e){m.metrics.error("conversation failed to load",e),t((0,f.setConversationStatus)({conversationStatus:d.ConversationStatus.ERROR}))}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},93:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(33)),o=r(n(6)),s=r(n(18)),i=r(n(792)),u=n(101),c=r(n(1)),l=n(45),d=n(77),f=n(44);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){},g=c.default.get("init_data.config.avatars.scheme"),y=c.default.get("tenant_config.shared.disable_user_image_upload",!1),h=(0,l.connect)((function(e){var t=e.moduleOptions;return{enableSSO:t.enableSSO,editableSSO:t.editableSSO,currentUser:e.currentUser}}))((function(e){var t,n=e.isOnline,r=e.size,c=e.disableUserImageUpload,l=e.disableTooltip,p=e.onImageUpload,h=e.className,b=e.overrideImageId,_=e.onClick,O=void 0===_?v:_,E=e.disableOnlineIndicator,I=e.isBranding,T=void 0!==I&&I,C=e.enableSSO,S=e.editableSSO,M=e.currentUser,w=e.user,k=e.isDisabled,P=c||!(0,d.isStaffMember)(M)&&y||!!C&&!S,R=void 0;return b?R=b:(null==w?void 0:w.imageId)||(R="#Grey-Default"),f.disableUserAvatar?null:w?o.default.createElement(u.UserImage,{size:r,isOnline:n,className:(0,s.default)(i.default.userImageAvatar,(0,a.default)({},i.default.disabled,k),h),avatarsScheme:g,disableUserImageUpload:P,user:m(m({},w),{},{imageId:null!==(t=R)&&void 0!==t?t:w.imageId}),onClick:T?v:O,onImageUpload:p,disableOnlineIndicator:E,disableTooltip:l}):null}));t.default=h}}]);
//# sourceMappingURL=conversation-component~feedback-modal~preRender-bundle.js.map