/*! JAC 0.1.6, Copyright 2018-2020 Verizon Media Inc. */!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=18)}([function(e,t){e.exports=function(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t){e.exports=function(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(t)}e.exports=i},function(e,t){function i(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=i=function(e){return typeof e}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(t)}e.exports=i},function(e,t,i){var n=i(11);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,i){var n=i(6),o=i(12);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t,i){var n=i(13),o=i(14),r=i(15),s=i(17);e.exports=function(e,t){return n(e)||o(e,t)||r(e,t)||s()}},function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i},writable:!0,configurable:!0})},function(e,t){function i(t,n){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(t,n)}e.exports=i},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}}},function(e,t,i){var n=i(16);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,i){"use strict";i.r(t);i(10);var n=i(3),o=i.n(n),r=i(4),s=i.n(r),a=i(1),c=i.n(a),u=i(0),l=i.n(u),h=i(2),f=i.n(h);var d={setStyles:function(e,t){Object.keys(t).forEach((function(i){void 0!==t[i]&&(e.style[i]=t[i])}))},getComputedStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,n=i.getComputedStyle(e);return t?n.getPropertyValue(t):n}},p=!1;function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.document;return"CSS1Compat"===t.compatMode&&t.documentElement?t.documentElement:t.body}var m={getPageOffsets:function(){var e=window.document;return{x:window.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft,y:window.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop}},getViewportDimension:function(){var e=window.document,t=e.documentElement.clientWidth,i="CSS1Compat"===e.compatMode&&t||e.body&&e.body.clientWidth||t,n=e.documentElement.clientHeight;return{w:i,h:"CSS1Compat"===e.compatMode&&n||e.body&&e.body.clientHeight||n}},addDOMLoadListener:function(e){if("loading"!==document.readyState)return e();function t(){if(!p)return p=!0,e()}if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t);var i=!1;try{i=null===window.frameElement}catch(e){}if(document.documentElement.doScroll&&i)return function e(){if(!p){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}return t()}}()}},addPageLoadListener:function(e){if("complete"===document.readyState)return e();if(void 0!==window.addEventListener)window.addEventListener("load",e,!1);else if(void 0!==document.addEventListener)document.addEventListener("load",e,!1);else if(void 0!==window.attachEvent)window.attachEvent("onload",e);else if("function"==typeof window.onload){var t=window.onload;window.onload=function(){t(),e()}}else window.onload=e},getWindowLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return{y:e.screenY||e.screenTop||0,x:e.screenX||e.screenLeft||0}},getPageSize:function(){var e=window.document,t=e.documentElement.scrollWidth,i="CSS1Compat"===e.compatMode&&t||e.body&&e.body.scrollWidth||t,n=e.documentElement.scrollHeight;return{w:i,h:"CSS1Compat"===e.compatMode&&n||e.body&&e.body.scrollHeight||n}},getPageScollInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=v(e),i=0,n=0;return e.defaultView&&(i=Math.round(e.defaultView.pageXOffset),n=Math.round(e.defaultView.pageYOffset)),{x:Math.max(t.scrollLeft,i),y:Math.max(t.scrollTop,n),w:Math.max(t.scrollWidth,0),h:Math.max(t.scrollHeight,0)}},getDocumentElement:v,injectTrackingPixel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=t.document,n=i.createElement("iframe");n.src=e,d.setStyles(n,{display:"none",border:"none",width:0,height:0}),i.body.appendChild(n)}},g=i(7),E=i.n(g),y=i(8),w=i.n(y),_=i(5),O=i.n(_),T=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,e),this.type=t,this.meta=i,this.target=null};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var b=function(e){E()(i,e);var t=S(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);function D(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,n=null,o=null,r=function(){e.apply(i,o),n=null};return function(){if(!n){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];o=i,n=setTimeout(r,t)}}}c()(b,"SCROLL","page.scroll"),c()(b,"RESIZE","page.resize"),c()(b,"VISIBILITY","page.visibility"),c()(b,"FOCUS","window.focus"),c()(b,"BLUR","window.blur"),c()(b,"DOM_LOADED","dom.loaded"),c()(b,"LOADED","page.loaded"),c()(b,"BEFORE_UNLOAD","page.stopped");var R=i(6),P=i.n(R);function k(e,t){if(Array.isArray(t)){if(t.indexOf(e)>=0)return!0}else for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===e)return!0;return!1}var A="function",C="number",I="object",N="string",M="undefined";function L(e){return P()(e)!==M}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=Number.NaN;return P()(e)===C?o=e:P()(e)===N&&(o=Number(e),isNaN(o)&&(o=parseFloat(e))),isNaN(o)||L(i)&&o<i||L(n)&&o>n?t:o}var j={isSet:L,isFunction:function(e){return P()(e)===A},isString:function(e){return P()(e)===N},isObject:function(e){return P()(e)===I},num:F,int:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=F(e,t,i,n);return P()(o)!==C||isNaN(o)?t:Math.round(o)}};function x(){try{for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.log.apply(console,[].slice.call(t))}catch(e){}}var U="exists",G="remove",W={on:function(e,t,i){this.eventTypes||(this.eventTypes={}),this.eventTypes[e]||(this.eventTypes[e]=[]),k(t,this.eventTypes[e])||(i?this.eventTypes[e].push({ref:i,handler:t}):this.eventTypes[e].push(t))},off:function(e,t,i){this.eventTypes&&Array.isArray(this.eventTypes[e])&&this._validateOrRemove.call(this,e,t,i,G)},hasEventListener:function(e,t,i){return!(!this.eventTypes||!Array.isArray(this.eventTypes[e]))&&this._validateOrRemove.call(this,e,t,i,U)},trigger:function(e){if(this.eventTypes&&P()(e)===I&&P()(e.type)===N&&this.eventTypes[e.type]){e.target=e.target||this;for(var t=this.eventTypes[e.type].slice(0),i=0;i<t.length;i++){var n=t[i];if(P()(n)===I)try{n.handler.call(n.ref,e)}catch(t){x("Error calling callback",n,e,t)}else try{n(e)}catch(t){x("Error calling callback",e,t)}}}},_validateOrRemove:function(e,t,i,n){for(var o=0;o<this.eventTypes[e].length;o++){var r=this.eventTypes[e][o],s=i?I:A;if(s===P()(r))switch(s){case A:if(r===t)return n===G&&this.eventTypes[e].splice(o,1),!0;break;case I:if(r.handler===t&&r.ref===i)return n===G&&this.eventTypes[e].splice(o,1),!0}}return!1}};function H(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hiddenStatusProp:e,visibilityChange:t}}var V=new WeakMap,z=new WeakMap,J=new WeakMap,B=new WeakMap,Z=new WeakMap,q=new WeakMap,Y=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throttleTime:200};o()(this,e),V.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:!1}),J.set(this,{writable:!0,value:!1}),B.set(this,{writable:!0,value:!1}),Z.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:void 0}),c()(this,"on",(function(e,t,i){Object.getPrototypeOf(this).on.call(this,e,t,i);var n,o=!1;if((e===b.DOM_LOADED&&l()(this,z)||e===b.LOADED&&l()(this,J)||e===b.VISIBILITY)&&(o=!0),o)if(n=e===b.VISIBILITY?new b(b.VISIBILITY,{hidden:!!window.document[l()(this,V)]}):e===b.DOM_LOADED?new b(b.DOM_LOADED):new b(b.LOADED,{timestamp:l()(this,q)}),i)try{t.call(i,n)}catch(e){x("Error calling callback",t,event)}else t(n)})),m.addDOMLoadListener((function(){f()(t,z,!0),t.trigger(new b(b.DOM_LOADED))})),m.addPageLoadListener((function(){f()(t,J,!0),f()(t,q,(new Date).getTime()),t.trigger(new b(b.LOADED,{timestamp:l()(t,q)}))}));var n=H(),r=n.hiddenStatusProp,s=n.visibilityChange;r&&(f()(this,V,r),document.addEventListener(s,(function(){return t.dispatchVisibilityChange()})),f()(this,B,!window.document[l()(this,V)])),window.addEventListener("scroll",D((function(){return t.dispatchViewportEvent(b.SCROLL)}),i.throttleTime),!1),window.addEventListener("resize",D((function(){return t.dispatchViewportEvent(b.RESIZE)}),i.throttleTime),!1),window.addEventListener("focus",(function(){return t.dispatchFocusChange(!0)})),window.addEventListener("blur",(function(){return t.dispatchFocusChange(!1)})),f()(this,Z,document.hasFocus()),window.addEventListener("beforeunload",(function(){return t.trigger(new b(b.BEFORE_UNLOAD))}))}return s()(e,[{key:"dispatchViewportEvent",value:function(e){var t=m.getPageOffsets(),i=m.getViewportDimension(),n=new b(e,{offsetX:t.x,offsetY:t.y,width:i.w,height:i.h});this.trigger(n)}},{key:"dispatchVisibilityChange",value:function(){f()(this,B,!window.document[l()(this,V)]),this.trigger(new b(b.VISIBILITY,{hidden:!!window.document[l()(this,V)]}))}},{key:"dispatchFocusChange",value:function(e){e&&!l()(this,Z)?(f()(this,Z,!0),this.trigger(new b(b.FOCUS))):!e&&l()(this,Z)&&(f()(this,Z,!1),this.trigger(new b(b.BLUR)))}},{key:"_reset",value:function(){f()(this,z,!1),f()(this,J,!1)}},{key:"domLoaded",get:function(){return l()(this,z)}},{key:"pageLoaded",get:function(){return l()(this,J)}},{key:"isVisible",get:function(){return l()(this,B)}},{key:"hasFocus",get:function(){return l()(this,Z)}}]),e}();Object.assign(Y.prototype,W);var X=Y,K=i(9),Q=i.n(K),$=function e(t){var i=t.topic,n=t.meta,r=void 0===n?{}:n;o()(this,e),this.topic=i,this.meta=r};function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}c()($,"topic",{WRITE_COMPLETE:"".concat("jac.sandbox",".writeComplete"),PAGE_LOAD:"".concat("jac.sandbox",".pageLoad"),SIZE:"".concat("jac.sandbox",".size"),UNLOAD:"".concat("jac.sandbox",".unload")});var te=function(e){E()(i,e);var t=ee(i);function i(e){var n,r=e.cmd,s=void 0===r?null:r,a=e.status,c=void 0===a?null:a,u=e.meta,l=void 0===u?{}:u;return o()(this,i),(n=t.call(this,{topic:i.topic.SAFE_FRAME,meta:l})).cmd=s,n.status=c,n}return i}($);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}c()(te,"topic",{SAFE_FRAME:"jac.sandbox.sf"}),c()(te,"cmd",{EXPAND_OVER:"exp-ovr",EXPAND_PUSH:"exp-push",RESIZE_TO:"resize-to",COLLAPSE:"collapse",READ_COOKIE:"read-cookie",WRITE_COOKIE:"write-cookie",MSG:"msg",HIDE:"hide",SHOW:"show"}),c()(te,"status",{COLLAPSED:"collapsed",COLLAPSING:"collapsing",EXPANDED:"expanded",EXPANDING:"expanding",RESIZE_TO:"resize-to",GEOMETRY_UPDATE:"geom-update",FOCUS_CHANGE:"focus-change",READ_COOKIE:"read-cookie",WRITE_COOKIE:"write-cookie",FAILED:"failed",CMP:"cmp",MSG:"msg",META_UPDATE:"meta-update",HIDE:"hide",SHOW:"show",REGISTER:"register"});var ne=function(e){E()(i,e);var t=ie(i);function i(e){var n;return o()(this,i),(n=t.call(this,e.topic)).message=e,n}return i}(T),oe=new WeakMap,re=new WeakMap,se=function(){function e(t,i){o()(this,e),oe.set(this,{writable:!0,value:void 0}),re.set(this,{writable:!0,value:void 0}),f()(this,oe,i),this.targetWindow=t}return s()(e,[{key:"send",value:function(e){this.targetWindow.postMessage(Object.assign({token:l()(this,oe)},e),"*")}},{key:"listen",value:function(){var e=this;l()(this,re)||(f()(this,re,(function(t){return e._handlePostMessage(t)})),window.addEventListener("message",l()(this,re)))}},{key:"cleanup",value:function(){window.removeEventListener("message",l()(this,re)),f()(this,re,null)}},{key:"_handlePostMessage",value:function(e){if(this._shouldReadPostMessage(e)){var t=new(e.data.topic===te.topic.SAFE_FRAME?te:$)(e.data),i=new ne(t);this.trigger(i)}}},{key:"_shouldReadPostMessage",value:function(e){return e.source===this.targetWindow&&e.data&&e.data.token===l()(this,oe)&&e.data.topic}}]),e}();Object.assign(se.prototype,W);var ae=se,ce=function(){function e(){o()(this,e)}return s()(e,null,[{key:"isMobileMomentAd",value:function(e){return!!e&&!!e.meta&&"MobileMoments"===e.meta.GoldenFormat}},{key:"computeDisplaySize",value:function(e){var t={width:300,height:533},i=m.getViewportDimension();return e.config.client.features.mobileMoments.enabled&&i.w<550&&i.w<i.h&&(t.width=i.w,t.height=Math.floor(i.w*(16/9))),t}}]),e}(),ue=new WeakMap,le=new WeakMap,he=function(){function e(t,i){o()(this,e),ue.set(this,{writable:!0,value:void 0}),le.set(this,{writable:!0,value:void 0}),f()(this,ue,t),f()(this,le,i.service.sizes||[])}return s()(e,[{key:"init",value:function(e){var t=e.w,i=e.h;l()(this,le).indexOf("".concat(t,"x").concat(i))>=0&&l()(this,ue).send(new $({topic:$.topic.SIZE,meta:{width:t,height:i}}))}},{key:"unload",value:function(){l()(this,ue).send(new $({topic:$.topic.UNLOAD}))}}]),e}(),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features||{};return{"exp-ovr":!(!t.expandOver||!t.expandOver.enabled),"exp-push":!(!t.expandPush||!t.expandPush.enabled),"read-cookie":!(!t.cookies||!t.cookies.read),"write-cookie":!(!t.cookies||!t.cookies.write),"resize-to":!(!t.resize||!t.resize.enabled)}},de={NOT_SUPPORTED:"Feature not supported by the host.",NOT_REGISTERED:"No prior $sf.ext.register() API call.",EXPANDED:"Already expanded.",NOT_EXPANDED:"Not expanded.",COMMAND_PENDING:"Command already in-progress.",INVALID_COOKIE_ARGS:"Invalid cookie arguments.",INVALID_ARGS:"Invalid arguments.",INVALID_SIZE:"Setting size to less than 1px is hiding, call $sf.ext.hide instead.",INVALID_HIDDEN_SIZE:"Setting size must be greater than 15 if SafeFrame has been hidden."},pe={COLLAPSED:"collapsed",COLLAPSING:"collapsing",EXPANDED:"expanded",EXPANDING:"expanding",RESIZING:"resizing",HIDDEN:"hidden"},ve=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;o()(this,e),c()(this,"messenger",void 0),c()(this,"windowContext",void 0),c()(this,"sizesConfig",void 0),c()(this,"hasRegistered",!1),c()(this,"pendingCommand",null),c()(this,"alignmentElement",void 0),c()(this,"statusUpdateCallback",void 0),c()(this,"supportsMap",void 0),c()(this,"geomData",void 0),c()(this,"hasFocus",void 0),c()(this,"metaData",void 0),c()(this,"registrationKey",void 0),c()(this,"width",void 0),c()(this,"height",void 0),c()(this,"_status",pe.COLLAPSED),this.messenger=t,this.windowContext=r,this.sizesConfig=i.service.sizes||[];var s=i.client.features.safeFrame;this.supportsMap=fe(s),t.on(te.topic.SAFE_FRAME,this._onSafeFrameMessage,this),(n=n||{}).geom&&(this.geomData=n.geom),n.focus&&(this.hasFocus=n.focus),this.metaData=n.meta||{}}return s()(e,[{key:"_sendMessage",value:function(e){var t=e.cmd,i=e.meta;this.messenger.send(new te({cmd:t,meta:i})),this.pendingCommand=t}},{key:"_onSafeFrameMessage",value:function(e){var t=e.message,i=t.status,n=t.meta;if(k(i,te.status)){if(this.pendingCommand===n.cmd&&(this.pendingCommand=null,i===te.status.FAILED))switch(n.cmd){case te.cmd.EXPAND_OVER:case te.cmd.EXPAND_PUSH:case te.cmd.RESIZE_TO:this._status=pe.COLLAPSED;break;case te.cmd.COLLAPSE:this._status=pe.EXPANDED}this._callStatusUpdate(i,n)}}},{key:"register",value:function(e,t,i){if(this.hasRegistered)throw new Error("$sf.ext.register() can be called only once and has been called already.");this.hasRegistered=!0,j.isFunction(i)&&(this.statusUpdateCallback=i),this.sizesConfig.indexOf("".concat(e,"x").concat(t))>=0&&(this.messenger.send(new $({topic:$.topic.SIZE,meta:{width:e,height:t}})),this.width=e,this.height=t),this.registrationKey={},this._callStatusUpdate(te.status.REGISTER,{key:this.registrationKey})}},{key:"_width",value:function(){return j.isSet(this.width)||(this.width=m.getViewportDimension().w),this.width}},{key:"_height",value:function(){return j.isSet(this.height)||(this.height=m.getViewportDimension().h),this.height}},{key:"_callStatusUpdate",value:function(e,t){var i=t.cmd,n=t.reason,o=t.info,r=t.key;if(e===te.status.FAILED?console.warn("SafeFrame: command failed",{cmd:i,reason:n,info:o}):e===te.status.META_UPDATE?this.metaData=o:e===te.status.GEOMETRY_UPDATE?this.geomData=o:e===te.status.FOCUS_CHANGE?this.hasFocus=o:e===te.status.RESIZE_TO?(this.width=o.w,this.height=o.h,this._status=pe.COLLAPSED):k(e,pe)&&(this._status=e),this.statusUpdateCallback){var s={cmd:i,reason:n,info:o};r&&(s.key=r),this.statusUpdateCallback.call(this,e,s)}}},{key:"_sendFailureStatus",value:function(e,t){this._callStatusUpdate(te.status.FAILED,{cmd:e,reason:t})}},{key:"supports",value:function(e){return j.isSet(e)?!!this.supportsMap[e]:this.supportsMap}},{key:"expand",value:function(e){var t,i=e.t,n=e.l,o=e.r,r=e.b,s=e.push?te.cmd.EXPAND_PUSH:te.cmd.EXPAND_OVER;if(this.supports(s)?this.hasRegistered?this.pendingCommand?t=de.COMMAND_PENDING:this.status()===pe.EXPANDED&&(t=de.EXPANDED):t=de.NOT_REGISTERED:t=de.NOT_SUPPORTED,t)this._sendFailureStatus(s,t);else{var a={top:j.int(i,0,0),left:j.int(n,0,0),right:j.int(o,0,0),bottom:j.int(r,0,0)};this._align(a),this._sendMessage({cmd:s,meta:a}),this._status=pe.EXPANDING}}},{key:"collapse",value:function(){var e,t=te.cmd.COLLAPSE;this.hasRegistered?this.pendingCommand?e=de.COMMAND_PENDING:this.status()!==pe.EXPANDED&&(e=de.NOT_EXPANDED):e=de.NOT_REGISTERED,e?this._sendFailureStatus(t,e):(this._align(),this._sendMessage({cmd:t}),this._status=pe.COLLAPSING)}},{key:"_align",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,i=e.left,n=e.right,o=e.bottom;this.alignmentElement||(this.alignmentElement=this.windowContext.document.getElementById("fc_align"));var r={};this._addVerticalAlignment(r,t,o),this._addHorizontalAlignment(r,i,n),d.setStyles(this.alignmentElement,r)}},{key:"_addVerticalAlignment",value:function(e,t,i){t&&i?(e.top="".concat(t,"px"),e.bottom=null):t&&!i?(e.top=null,e.bottom="0"):!t&&i?(e.top="0",e.bottom=null):t||i||(this.alignmentElement.style.bottom?(e.top=null,e.bottom="0"):(e.top="0",e.bottom=null))}},{key:"_addHorizontalAlignment",value:function(e,t,i){t&&i?(e.left="".concat(t,"px"),e.right=null):t&&!i?(e.left=null,e.right="0"):!t&&i?(e.left="0",e.right=null):t||i||(this.alignmentElement.style.right?(e.left=null,e.right="0"):(e.left="0",e.right=null))}},{key:"cookie",value:function(e,t){var i,n=t?te.cmd.WRITE_COOKIE:te.cmd.READ_COOKIE;this.supports(n)?this.hasRegistered?!e||t&&!t.value?i=de.INVALID_COOKIE_ARGS:this.pendingCommand&&(i=de.COMMAND_PENDING):i=de.NOT_REGISTERED:i=de.NOT_SUPPORTED,i?this._sendFailureStatus(n,i):this._sendMessage({cmd:n,meta:{cookieName:e,cookieData:t}})}},{key:"meta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shared",i=Object.prototype.hasOwnProperty,n=this.metaData;if(i.call(n,t)){var o=n[t];if(i.call(o,e))return o[e]}return""}},{key:"status",value:function(){return this._status}},{key:"geom",value:function(){return this.geomData}},{key:"inViewPercentage",value:function(){if(this.geomData){var e=this.geomData.self.iv;return Math.round(100*e)}}},{key:"winHasFocus",value:function(){return this.hasFocus}},{key:"resizeTo",value:function(e){var t,i,n,o=te.cmd.RESIZE_TO;if(this.supports(te.cmd.RESIZE_TO)?j.isObject(e)?this.hasRegistered?this._status===pe.EXPANDED?n=de.EXPANDED:this.pendingCommand&&(n=de.COMMAND_PENDING):n=de.NOT_REGISTERED:n=de.INVALID_ARGS:n=de.NOT_SUPPORTED,!n)if(t=j.int(e.w,this._width()),i=j.int(e.h,this._height()),t<=1||i<=1)n=de.INVALID_SIZE;else if(this._status===pe.HIDDEN&&(t<=15||i<=15))n=de.INVALID_HIDDEN_SIZE;else if(t===this.width&&i===this.height)return;n?this._sendFailureStatus(o,n):(this._sendMessage({cmd:te.cmd.RESIZE_TO,meta:{width:t,height:i}}),this._status=pe.RESIZING)}},{key:"hide",value:function(e){this._status=pe.HIDDEN}},{key:"show",value:function(e){}}]),e}();c()(ve,"FailureReason",de);var me,ge=new WeakMap,Ee=function(){function e(t,i,n,r){o()(this,e),ge.set(this,{writable:!0,value:void 0}),f()(this,ge,new ve(t,i,n,r))}return s()(e,[{key:"register",value:function(e,t,i){l()(this,ge).register(e,t,i)}},{key:"supports",value:function(e){return l()(this,ge).supports(e)}},{key:"expand",value:function(e){l()(this,ge).expand(e)}},{key:"collapse",value:function(){l()(this,ge).collapse()}},{key:"cookie",value:function(e,t){l()(this,ge).cookie(e,t)}},{key:"meta",value:function(e,t){return l()(this,ge).meta(e,t)}},{key:"status",value:function(){return l()(this,ge).status()}},{key:"geom",value:function(){return l()(this,ge).geom()}},{key:"inViewPercentage",value:function(){return l()(this,ge).inViewPercentage()}},{key:"winHasFocus",value:function(){return l()(this,ge).winHasFocus()}},{key:"resizeTo",value:function(e){return l()(this,ge).resizeTo(e)}},{key:"hide",value:function(e){return l()(this,ge).hide(e)}},{key:"show",value:function(e){return l()(this,ge).show(e)}},{key:"msg",value:function(e,t){l()(this,ge).msg(e,t)}},{key:"ui",value:function(){return{flex:0}}}]),e}(),ye=function(){function e(t){o()(this,e),c()(this,"messenger",void 0),c()(this,"lastMessageSentTime",void 0),this.messenger=t}return s()(e,[{key:"_sendMessage",value:function(e){var t=e.cmd,i=e.meta;this.messenger.send(new te({cmd:t,meta:i}))}},{key:"msg",value:function(e){return!(this.lastMessageSentTime&&!(this.lastMessageSentTime<(new Date).getTime()-200))&&(this._sendMessage({cmd:te.cmd.MSG,meta:e}),this.lastMessageSentTime=(new Date).getTime(),!0)}}]),e}(),we={"1AS":"1AS",VZMSSP:"VZMSSP"},_e="px",Oe=1,Te=2,Se=3,be="SF",De="NFIF",Re="FIF";function Pe(e){var t=e.detectSize,i=void 0!==t&&t,n=e.initialWidth,o=e.initialHeight,r=e.allowedSizes;me.send(new $({topic:$.topic.PAGE_LOAD})),i&&function e(t,i,n){var o=document.body.scrollWidth,r=document.body.scrollHeight;if(o>t||r>i){var s=function(e,t,i){var n=e*t,o=1e5,r={};return i.forEach((function(e){var t=Math.abs(n-e.width*e.height);t<o&&(o=t,r=e)})),r}(o,r,n),a=s.width,c=s.height;me.send(new $({topic:$.topic.SIZE,meta:{width:a,height:c}}))}else ke>0&&(ke-=100,setTimeout((function(){e(t,i,n)}),100))}(n,o,r)}var ke=4e3;var Ae={getParameter:function(e,t){t=t.replace(/[[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},getParameters:function(e,t){var i=this;return t.reduce((function(t,n){var o=i.getParameter(e,n);return o&&(t[n]=o),t}),{})},removeParameters:function(e){return e&&"string"==typeof e?e.split(/[?#]/)[0]:""}},Ce={features:{mobileMoments:{enabled:!1},nonFriendlyIframe:{enabled:!1},safeFrame:{enabled:!1,features:{expandOver:{enabled:!0},expandPush:{enabled:!1},resize:{enabled:!1},cookies:{read:!1,write:!1}}},rotation:{enabled:!1,cancellable:!0,period:2e4,limit:3,resizable:!1,requireViewable:!0},sandbox:{features:{fullscreen:{enabled:!0},autoplay:{enabled:!0},geolocation:{enabled:!1},camera:{enabled:!1},microphone:{enabled:!1}},allow:["forms","scripts","same-origin","popups","popups-to-escape-sandbox"]}},layout:{zIndex:10},content:{},fetch:{auto:!0,requireViewable:!1,minInterval:2e3,timeout:3e4},instrumentation:{viewability:{percent:50,pixels:0,duration:1e3}},meta:{shared:{}},render:{timeout:1e4,auto:!0,requireViewable:!1}},Ie={fetch:{minInterval:{minimum:500,isMetaInfo:!0}},features:{rotation:{period:{minimum:100,isMetaInfo:!0}}}},Ne={params:{}},Me={service:{host:"https://jill.fc.yahoo.com/",adServer:{"1AS":{params:{}},VZMSSP:{params:{}}},positions:{},site:{name:"",queryParams:""},debug:!1,groups:{},user:{regs:{gdpr:{applies:null,euconsent:""},ccpa:{usPrivacy:""}},cookies:{},ids:{}}},client:{positions:{},preventDuplicates:!1,trackers:{opus:!0,smartPixel:!1,msftSync:!1}}};function Le(e){return"object"===P()(e)&&e.constructor===Array}function Fe(e){Object.keys(e.client.positions).forEach((function(t){var i=e.client.positions[t];!function e(t,i){Object.keys(t).forEach((function(n){var o=P()(i[n]);t[n].isMetaInfo&&"undefined"!==o&&!function(e,t,i){return!("number"===e&&"number"==typeof i.minimum&&t<i.minimum)}(o,i[n],t[n])?delete i[n]:t[n].isMetaInfo||"object"!==P()(t[n])||"object"!==o||e(t[n],i[n])}))}(Ie,i)}))}var je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;o()(this,e),t.document.referrer&&(Me.service.site.referrer=t.document.referrer),Me.service.site.pageSessionId=e.PAGE_SESSION_ID}return s()(e,[{key:"cloneArray",value:function(e){var t=this;return e.map((function(e){var i;return"object"!==P()(e)||Le(e)?i=Le(e)?t.cloneArray(e):e:(i={},t.copyObjectProperties(i,e)),i}))}},{key:"copyObjectProperties",value:function(e,t,i){var n=this;Object.keys(t).forEach((function(o){var r=t[o];"object"!==P()(r)||Le(r)?(!i||i&&void 0===e[o])&&(e[o]=Le(r)?n.cloneArray(r):r):(e[o]=e[o]||{},n.copyObjectProperties(e[o],t[o],i))}))}},{key:"applyDefaults",value:function(e){var t,i,n=JSON.parse(JSON.stringify(Me));return e.client&&e.client.positions&&(Fe(e),function(e,t){Object.keys(t.client.positions).forEach((function(i){var n=t.client.positions[i];e.client.positions[i]=JSON.parse(JSON.stringify(Ce)),n.features&&n.features.safeFrame&&n.features.safeFrame.enabled||delete e.client.positions[i].features.safeFrame.features}))}(n,e)),e.service&&e.service.positions&&function(e,t){Object.keys(t.service.positions).forEach((function(t){e.service.positions[t]=JSON.parse(JSON.stringify(Ne))}))}(n,e),this.copyObjectProperties(n,e),t=n,(i=e).service&&i.service.adServer&&Object.keys(we).forEach((function(e){i.service.adServer[e]||delete t.service.adServer[e]})),n}}],[{key:"getRotationMinimumPeriod",value:function(){return Ie.features.rotation.period.minimum}}]),e}();c()(je,"PAGE_SESSION_ID","xxxxxxxxx".replace(/[x]/g,(function(){return Math.floor(16*Math.random()).toString(16)})));var xe=new WeakMap,Ue=new WeakMap,Ge=new WeakMap,We=function(){function e(t,i){o()(this,e),xe.set(this,{writable:!0,value:void 0}),Ue.set(this,{writable:!0,value:void 0}),Ge.set(this,{writable:!0,value:void 0}),f()(this,Ue,t),f()(this,xe,i),l()(this,xe).meta=l()(this,xe).meta||{}}return s()(e,[{key:"createNewPositionRotationConfig",value:function(e){if(Object.prototype.hasOwnProperty.call(e,we["1AS"])){var t=JSON.parse(JSON.stringify(l()(this,Ue).config.client.features.rotation));if(t.enabled){!1===this._shouldRotateFromComments()&&(t.enabled=!1);var i=this._getEnvironmentRotationInfo();return i.RefreshTime&&(t.period=1e3*i.RefreshTime),i.RefreshMax&&(t.limit=i.RefreshMax),i.RefreshKeepSize&&(t.resizable="N"===i.RefreshKeepSize),t}}}},{key:"_shouldRotateFromComments",value:function(){var e=l()(this,xe).meta,t=e.AdTypePriority?parseInt(e.AdTypePriority):-1;if("N"===e.RefreshExclusive&&"N"===e.MP&&t>=493||"N"===e.RefreshReserved&&"N"===e.MP&&t>=200&&t<493)return!1;var i=this._isCommentPresent("RefreshMN");return!!(i=(i=i||this._isCommentPresent("RefreshSmall")&&!this._isLargeAd(l()(this,xe).content.size))||this._isCommentPresent("RefreshLarge")&&this._isLargeAd(l()(this,xe).content.size))}},{key:"_getEnvironmentRotationInfo",value:function(){var t={RefreshTime:l()(this,xe).meta.RefreshTime,RefreshMax:l()(this,xe).meta.RefreshMax,RefreshKeepSize:l()(this,xe).meta.RefreshKeepSize};t.RefreshTime=t.RefreshTime?parseInt(t.RefreshTime):void 0,t.RefreshMax=t.RefreshMax?parseInt(t.RefreshMax):void 0;var i={},n=l()(this,Ue).inputConfig.client.features;return n&&n.rotation&&(n.rotation.period&&n.rotation.period>je.getRotationMinimumPeriod()&&(i.RefreshTime=n.rotation.period/1e3),n.rotation.limit&&(i.RefreshMax=n.rotation.limit),void 0!==n.rotation.resizable&&(i.RefreshKeepSize=n.rotation.resizable?"N":"Y")),Object.assign({},t,i,e.PAGE_ROTATION_INFO)}},{key:"_isCommentPresent",value:function(e){return Object.prototype.hasOwnProperty.call(l()(this,xe).meta,e)}},{key:"_isLargeAd",value:function(e){return e.width>=970||e.height>=600}},{key:"getRotationAdSizeAlias",value:function(e){var t;return e=e||l()(this,xe).content.size,this._isCommentPresent("RefreshSmall")&&!this._isLargeAd(e)?t=l()(this,xe).meta.RefreshSmall:this._isCommentPresent("RefreshLarge")&&this._isLargeAd(e)&&(t=l()(this,xe).meta.RefreshLarge),t}}],[{key:"init",value:function(t){e.PAGE_ROTATION_INFO=e._getPageRotationParams(t)}},{key:"_getPageRotationParams",value:function(e){var t=Ae.getParameters(e.location.href,["RefreshTime","RefreshMax","RefreshKeepSize"]);return["RefreshTime","RefreshMax"].forEach((function(e){t[e]&&(t[e]=parseInt(t[e]))})),t}}]),e}();c()(We,"PAGE_ROTATION_INFO",void 0);var He=We;function Ve(e,t){var i=e.cookie.split(";").reduce((function(e,i){var n=i.indexOf("="),o=i.substring(0,n).trim();return t===o&&(e=i.substring(n+1)),e}),"");return i||null}var ze=new WeakMap,Je=new WeakMap,Be=function(){function e(t){o()(this,e),ze.set(this,{writable:!0,value:void 0}),Je.set(this,{writable:!0,value:void 0});var i=JSON.parse(JSON.stringify(t)),n=new je;i.client=i.client||{},i.service=i.service||{},i=e.applyDefaultPosition(i),i=n.applyDefaults(i);var r=Ve(window.document,"BX");r&&(i.service.user.cookies.bxcookie=r),i=e.applyOverrides(i,window.location.href),f()(this,ze,i.service),f()(this,Je,i.client)}return s()(e,[{key:"setRegulatoryData",value:function(e){l()(this,ze).user.regs.gdpr.applies=e.data.GDPR.applies,l()(this,ze).user.regs.gdpr.euconsent=e.data.GDPR.euconsent,l()(this,ze).user.regs.ccpa.usPrivacy=e.data.CCPA.usPrivacy}},{key:"setUserIdentity",value:function(e){j.isSet(e.ids.VMUID)&&(l()(this,ze).user.ids.vmuid=e.ids.VMUID)}},{key:"getPositionGroupsName",value:function(e){var t=this;return Object.keys(l()(this,ze).groups).filter((function(i){return-1!==l()(t,ze).groups[i].positions.indexOf(e)}))}},{key:"filterAllowedSizes",value:function(e){var t=this,i=JSON.parse(JSON.stringify(l()(this,ze)));return e.forEach((function(e){var n=e.name,o=e.allowedSize,r=l()(t,ze).positions[n];r&&r.sizes.indexOf(o)>=0&&(i.positions[n].sizes=[o])})),i}},{key:"createNextRotationConfig",value:function(e,t){var i;if(!e.config.client.features.rotation.resizable&&t){var n=t.width,o=t.height;n&&o&&(i=this.filterAllowedSizes([{name:e.name,allowedSize:"".concat(n,"x").concat(o)}]))}else i=JSON.parse(JSON.stringify(l()(this,ze)));var r=e.config.service.alias,s=i.positions[e.name];return s.alias&&r&&s.alias!==r&&(s.params.origmn=s.alias),r&&(s.alias=r),i}},{key:"isServiceConfigValid",value:function(){if(!l()(this,ze))return console.warn("No service config has been set."),!1;if(!l()(this,ze).adServer)return console.warn("No service.adServer config has been set."),!1;if(!l()(this,ze).positions)return console.warn("No service.positions config has been set."),!1;var e=l()(this,ze).adServer,t=Object.keys(we).filter((function(t){return e[t]}));if(0===t.length)return console.warn("No valid adServer config has been set."),!1;if(t.length>1)return console.warn("Only one adServer can be configured."),!1;if(-1!==t.indexOf(we["1AS"])){var i=e["1AS"],n=i.networkId,o=i.region;if(!n&&!o||n&&o)return console.warn("1AS adServer config requires either region or networkId to be set."),!1}return!l()(this,ze).host||/^https?:\/\/.*\//i.test(l()(this,ze).host)}},{key:"clone",value:function(){return JSON.parse(JSON.stringify({service:l()(this,ze),client:l()(this,Je)}))}},{key:"updateMeta",value:function(e,t,i,n){var o=!1,r=j.isString(t)&&j.isSet(i);return j.isObject(t)?(l()(this,Je).positions[e].meta=t,o=!0):j.isString(n)&&l()(this,Je).positions[e].meta[n]&&r?(l()(this,Je).positions[e].meta[n][t]=i,o=!0):r&&(l()(this,Je).positions[e].meta.shared[t]=i,o=!0),o}},{key:"service",get:function(){return l()(this,ze)}},{key:"client",get:function(){return l()(this,Je)}}],[{key:"applyDefaultPosition",value:function(e){var t=new je;if((e=JSON.parse(JSON.stringify(e))).client&&e.client.positions&&e.client.positions.DEFAULT){var i=e.client.positions.DEFAULT;delete e.client.positions.DEFAULT,Object.keys(e.client.positions).forEach((function(n){t.copyObjectProperties(e.client.positions[n],i,!0)}))}return e}},{key:"applyOverrides",value:function(e,t){var i=JSON.parse(JSON.stringify(e)),n=Ae.getParameters(t,["jac.cp","jac.noad","jac.kvs","jac.rotate","jac.ip","atwCrPr","atwMN","atwKV"]),o=Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})),r=i.service.site.queryParams,s=r?[r]:[];i.service.site.queryParams=s.concat(o).join("&"),"1"===Ae.getParameter(t,"jac.debug")&&(i.service.debug=!0);var a=Ae.getParameter(t,"jac.sf");return Object.keys(i.client.positions).forEach((function(e){var t=i.client.positions[e];"1"===a&&(t.features.safeFrame.enabled=!0)})),i}}]),e}();function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var qe=function(e){E()(i,e);var t=Ze(i);function i(e,n){var r;return o()(this,i),(r=t.call(this,e)).meta=n,r}return i}(T);c()(qe,"FETCH_START","".concat("Jill",".FETCH_START")),c()(qe,"FETCH_COMPLETE","".concat("Jill",".FETCH_COMPLETE")),c()(qe,"FETCH_TIMEOUT","".concat("Jill",".FETCH_TIMEOUT")),c()(qe,"FETCH_ERROR","".concat("Jill",".FETCH_ERROR")),c()(qe,"RESPONSE_PROCESSED","".concat("Jill",".RESPONSE_PROCESSED"));var Ye={},Xe=function(e,t,i){var n=document.createElement("script");n.src=e,n.onload=function(){delete Ye[e],t()},n.onerror=function(t){delete Ye[e],i(t)},(document.body?document.body:document.head).appendChild(n),Ye[e]=n},Ke=function(e){Ye[e]&&(document.body?document.body:document.head).removeChild(Ye[e])};var Qe={};var $e=new WeakMap,et=function(){function e(t){o()(this,e),$e.set(this,{writable:!0,value:void 0}),f()(this,$e,t)}return s()(e,[{key:"process",value:function(){if(void 0!==window.JAC_QUEUE&&window.JAC_QUEUE.length>0){var e=window.JAC_QUEUE.shift();if(function(e,t){if(e&&e.client){var i=e.client,n=i.version,o=i.allowed;return n&&n!==t?(console.error("Client version in response from Jill does not match JAC.version."),!1):!!(n||o&&o.length&&-1!==o.indexOf(t))||(console.error("This version of JAC library is not allowed to process response from Jill. Please load JAC using client endpoint provided by Jill."),!1)}return!1}(e,l()(this,$e))){var t=this.getRequestUrl(e.client.requestId);return 0===e.client.requestId&&this.trigger(new qe(qe.FETCH_START,{request:{positions:e.adServerResponse.positions},prefetched:!0})),(Qe[e.client.requestId]?Qe[e.client.requestId].status:Oe)!==Se&&this.trigger(new qe(qe.RESPONSE_PROCESSED,{response:e,url:t})),e}}return null}},{key:"getRequestUrl",value:function(e){return Qe[e]?Qe[e].url:void 0}},{key:"getRequestUrlMap",value:function(){return Qe}},{key:"fetchAds",value:function(t,i){var n=this,o=JSON.parse(JSON.stringify(i.service)),r=i.client,s={adServer:o.adServer,site:o.site,user:o.user,positions:{},requestId:e.REQUEST_ID++};delete o.user.email,o.debug&&(s.debug=!0),t.forEach((function(e){s.positions[e]=o.positions[e]}));var a=JSON.stringify(s),c="".concat(o.host).concat("v1/ads/js","?jacVersion=").concat(l()(this,$e))+"&config="+encodeURIComponent(a);Qe[s.requestId]={url:c};var u=function(e,t){var i;return e.forEach((function(e){(!i||t.positions[e].fetch.timeout<i)&&(i=t.positions[e].fetch.timeout)})),i}(t,r),h=!1;this.trigger(new qe(qe.FETCH_START,{request:s,url:c}));var f=setTimeout((function(){h||(h=!0,Ke(c),Qe[s.requestId].status=Se,n.trigger(new qe(qe.FETCH_TIMEOUT,{url:c,positionNames:t})))}),u);Xe(c,(function(){h||(h=!0,clearTimeout(f),n.trigger(new qe(qe.FETCH_COMPLETE,{url:c})))}),(function(e){h||(h=!0,clearTimeout(f),n.trigger(new qe(qe.FETCH_ERROR,{positionNames:t,scriptErrorEvent:e})))}))}},{key:"fetchGroupPositions",value:function(e,t,i){var n=JSON.parse(JSON.stringify(i.service)),o=n.groups[e].params;return t.forEach((function(e){var t=n.positions[e].params;n.positions[e].params=Object.assign({},o,t)})),this.fetchAds(t,{service:n,client:i.client})}}]),e}();c()(et,"REQUEST_ID",1),Object.assign(et.prototype,W);var tt=et;function it(e){return"Invalid ".concat(e," argument. Object is expected")}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var ot=function(e){E()(i,e);var t=nt(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);c()(ot,"CONFIG_UPDATE","Position.CONFIG_UPDATE");var rt=new WeakMap,st=new WeakMap,at=new WeakMap,ct=function(){function e(t,i){if(o()(this,e),rt.set(this,{writable:!0,value:null}),st.set(this,{writable:!0,value:void 0}),at.set(this,{writable:!0,value:!1}),c()(this,"name",void 0),c()(this,"config",void 0),!j.isString(t))throw new Error("Invalid ".concat("name"," argument. String is expected"));this.name=t,this.update(i)}return s()(e,[{key:"updateContainerType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.config.client.features;"true"===e.friendlyIframe&&t.safeFrame.enabled?f()(this,st,Re):t.safeFrame&&t.safeFrame.enabled?f()(this,st,be):t.nonFriendlyIframe&&t.nonFriendlyIframe.enabled?f()(this,st,De):f()(this,st,Re)}},{key:"update",value:function(e){var t=e.service,i=e.client;if("object"!==P()(t))throw new Error(it("service"));if("object"!==P()(i))throw new Error(it("client"));this.config=function(e,t){var i=(new je).applyDefaults({service:{positions:c()({},e,t.service)},client:{positions:c()({},e,t.client)}});return{service:i.service.positions[e],client:i.client.positions[e]}}(this.name,e),this.updateContainerType(),this.trigger(new ot(ot.CONFIG_UPDATE,this.config))}},{key:"updateRotationConfig",value:function(e){var t=this;if(!e)return!1;var i=!1;return Object.keys(e).forEach((function(n){t.config.client.features.rotation[n]!==e[n]&&(i=!0)})),i&&(Object.keys(e).forEach((function(i){t.config.client.features.rotation[i]=e[i]})),this.trigger(new ot(ot.CONFIG_UPDATE,this.config))),i}},{key:"containerType",get:function(){return l()(this,st)}},{key:"alias",set:function(e){if(e){var t=this.config.service.alias!==e;this.config.service.alias=e,t&&this.trigger(new ot(ot.CONFIG_UPDATE,this.config))}},get:function(){return this.config.service.alias}},{key:"inputConfig",get:function(){return l()(this,rt)},set:function(e){f()(this,rt,e)}},{key:"rotated",set:function(e){f()(this,at,e)},get:function(){return l()(this,at)}}]),e}();function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}Object.assign(ct.prototype,W);var lt=function(e){E()(i,e);var t=ut(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);c()(lt,"RENDER_START","".concat("PositionComponent",".RENDER_START")),c()(lt,"RENDER_COMPLETE","".concat("PositionComponent",".RENDER_COMPLETE")),c()(lt,"AD_LOAD","".concat("PositionComponent",".AD_LOAD")),c()(lt,"AD_LOAD_TIMEOUT","".concat("PositionComponent",".AD_LOAD_TIMEOUT")),c()(lt,"NO_AD","".concat("PositionComponent",".NO_AD")),c()(lt,"RESIZE","".concat("PositionComponent",".RESIZE")),c()(lt,"SHOW","".concat("PositionComponent",".SHOW")),c()(lt,"HIDE","".concat("PositionComponent",".HIDE")),c()(lt,"DESTROY","".concat("PositionComponent",".DESTROY")),c()(lt,"VIEW_START","".concat("PositionComponent",".VIEW_START")),c()(lt,"VIEW_END","".concat("PositionComponent",".VIEW_END")),c()(lt,"MOUSE_OUT","".concat("PositionComponent",".MOUSE_OUT")),c()(lt,"AD_SIZE_CHANGED","".concat("PositionComponent",".AD_SIZE_CHANGED")),c()(lt,"GEOMETRY_CHANGED","".concat("PositionComponent",".GEOMETRY_CHANGED")),c()(lt,"AD_META_CHANGED","".concat("PositionComponent",".AD_META_CHANGED")),c()(lt,"AD_MESSAGE","".concat("PositionComponent",".AD_MESSAGE")),c()(lt,"SAFE_FRAME_GEOMETRY_CHANGED","".concat("PositionComponent",".SAFE_FRAME_GEOMETRY_CHANGED"));var ht="auto";function ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e,i=document.documentElement,n=t.innerWidth||i.clientWidth||0,o=t.innerHeight||i.clientHeight||0,r=t.screenLeft||t.screenX||0,s=r+n,a=t.screenTop||t.screenY||0,c=a+o;return{top:a,left:r,bottom:c,right:s,width:n,height:o}}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=e.getBoundingClientRect()||{},n=i.left,o=i.right,r=i.top,s=i.bottom,a=d.getComputedStyle(e,"z-index",t),c=o-n,u=s-r;return{left:n,right:o,top:r,bottom:s,width:c,height:u,zIndex:a}}var pt={getWindowGeometry:ft,getElementGeometry:dt,getVisibilityMetrics:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=ft(n),r=o.width,s=o.height,a=dt(e,n),c=a.width*a.height;if(a.width=a.width||1,a.height=a.height||1,a.right<=0||a.left>r)t=0;else{var u=Math.max(-a.left,0),l=Math.max(a.right-r,0);t=a.width-u-l}if(a.bottom<=0||a.top>s)i=0;else{var h=Math.max(-a.top,0),f=Math.max(a.bottom-s,0);i=a.height-h-f}return{containerPixels:c,xPercentage:t/a.width,yPercentage:i/a.height,totalPercentage:t*i/(c||1)}},isClippingElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"X",i=arguments.length>2?arguments[2]:void 0,n=(i=i||d.getComputedStyle(e))["overflow"+t],o=i.overflow;return"hidden"===n||"scroll"===n||n===ht||"hidden"===o||"scroll"===o||o===ht},isScrollableElement:function(e,t){var i=(t=t||d.getComputedStyle(e)).overflowX,n=t.overflowY,o=t.overflow,r="scroll"===i||"scroll"===o;r=r||(i===ht||o===ht)&&e.scrollWidth>e.clientWidth;var s="scroll"===n||"scroll"===o;return s=s||(n===ht||o===ht)&&e.scrollHeight>e.clientHeight,r||s}};function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var mt=function(e){E()(i,e);var t=vt(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);c()(mt,"RENDER_COMPLETE","".concat("Render",".RENDER_COMPLETE")),c()(mt,"AD_LOAD","".concat("Render",".AD_LOAD")),c()(mt,"AD_LOAD_TIMEOUT","".concat("Render",".AD_LOAD_TIMEOUT"));var gt=new WeakMap,Et=new WeakMap,yt=new WeakMap,wt=new WeakMap,_t=new WeakMap,Ot=function(){function e(t,i){o()(this,e),gt.set(this,{writable:!0,value:void 0}),Et.set(this,{writable:!0,value:void 0}),yt.set(this,{writable:!0,value:{}}),wt.set(this,{writable:!0,value:[]}),_t.set(this,{writable:!0,value:void 0}),f()(this,gt,t),f()(this,Et,i),f()(this,_t,i.position.config.client.features.safeFrame),f()(this,yt,fe(l()(this,_t))),f()(this,wt,i.position.config.service.sizes||[]),t.on($.topic.SIZE,this._onSizeChange,this),t.on($.topic.UNLOAD,this._onUnload,this),t.on(te.topic.SAFE_FRAME,this._onSafeFrameMessage,this),i.on(lt.DESTROY,this.cleanup,this),i.on(lt.SAFE_FRAME_GEOMETRY_CHANGED,this._sendSafeFrameGeometryUpdate,this),i.on(lt.AD_META_CHANGED,this.positionMetaChanged,this),i.pageObserver.on(b.FOCUS,this._sendSafeFrameFocusUpdate,this),i.pageObserver.on(b.BLUR,this._sendSafeFrameFocusUpdate,this)}return s()(e,[{key:"cleanup",value:function(){l()(this,Et).off(lt.DESTROY,this.cleanup,this),l()(this,Et).off(lt.SAFE_FRAME_GEOMETRY_CHANGED,this._sendSafeFrameGeometryUpdate,this),l()(this,Et).off(lt.AD_META_CHANGED,this.positionMetaChanged,this),l()(this,gt).off($.topic.SIZE,this._onSizeChange,this),l()(this,gt).off($.topic.UNLOAD,this._onUnload,this),l()(this,gt).off(te.topic.SAFE_FRAME,this._onSafeFrameMessage,this),l()(this,Et).pageObserver.off(b.FOCUS,this._sendSafeFrameFocusUpdate,this),l()(this,Et).pageObserver.off(b.BLUR,this._sendSafeFrameFocusUpdate,this),l()(this,gt).cleanup()}},{key:"_onSizeChange",value:function(e){var t=e.message.meta,i=t.width,n=t.height;i&&n&&l()(this,wt).indexOf("".concat(i,"x").concat(n))>=0&&l()(this,Et).setSize({width:i,height:n})}},{key:"_onUnload",value:function(){this.cleanup(),l()(this,Et).unloadAd()}},{key:"_onSafeFrameMessage",value:function(e){var t=e.message,i=t.cmd,n=t.meta;if(!1!==l()(this,yt)[i])switch(i){case te.cmd.EXPAND_OVER:case te.cmd.EXPAND_PUSH:this._expand(n,i===te.cmd.EXPAND_PUSH),this._sendStatusUpdate(te.status.EXPANDED,{cmd:i});break;case te.cmd.COLLAPSE:this._collapse(),this._sendStatusUpdate(te.status.COLLAPSED,{cmd:i});break;case te.cmd.READ_COOKIE:this._readCookie(n.cookieName);break;case te.cmd.WRITE_COOKIE:this._writeCookie(n.cookieName,n.cookieData);break;case te.cmd.MSG:this._receivedAdMessage(n);break;case te.cmd.RESIZE_TO:this._resizeTo(n)}else this._sendFailure({cmd:i,reason:"Feature not supported by the host."})}},{key:"_expand",value:function(e){var t=e.top,i=e.left,n=e.right,o=e.bottom,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=j.int(t,0,0),i=j.int(i,0,0),n=j.int(n,0,0),o=j.int(o,0,0);var s=l()(this,Et).size,a={width:s.width+n+i,height:s.height+o+t};r||(a.dx=-i,a.dy=-t),l()(this,Et).updateGeometry(a,r)}},{key:"_collapse",value:function(){l()(this,Et).resetGeometry()}},{key:"_resizeTo",value:function(e){var t=e.width,i=e.height;t=j.int(t,0,0),i=j.int(i,0,0),l()(this,Et).setSize({width:t,height:i}),this._sendStatusUpdate(te.status.RESIZE_TO,{cmd:te.cmd.RESIZE_TO,info:{w:t,h:i}})}},{key:"_readCookie",value:function(e){var t=Ve(window.document,e),i=te.cmd.READ_COOKIE;this._sendStatusUpdate(te.status.READ_COOKIE,{cmd:i,info:t})}},{key:"_writeCookie",value:function(e,t){t.value&&t.value.length>1e3&&(t.value=t.value.substring(0,1e3)),t.expires=t.expires||null,t.expires&&"[object Date]"!==Object.prototype.toString.call(t.expires)&&(t.expires=null),function(e,t,i){if(i&&"string"==typeof i.value){var n=t+"="+i.value;i.expires&&(n+="; expires="+i.expires.toUTCString()),e.cookie=n}}(window.document,e,t);var i=te.cmd.WRITE_COOKIE;this._sendStatusUpdate(te.status.WRITE_COOKIE,{cmd:i,info:t.value})}},{key:"_receivedAdMessage",value:function(e){l()(this,Et).adMessageReceived(e)}},{key:"_sendStatusUpdate",value:function(e,t){var i=t.cmd,n=t.reason,o=t.info;this.messenger.send(new te({status:e,meta:{cmd:i,reason:n,info:o}}))}},{key:"_sendFailure",value:function(e){var t=e.cmd,i=e.reason,n=e.info;this._sendStatusUpdate(te.status.FAILED,{cmd:t,reason:i,info:n})}},{key:"positionMetaChanged",value:function(e){l()(this,_t)&&l()(this,_t).enabled?this._sendStatusUpdate(te.status.META_UPDATE,{info:e.meta}):console.warn("Messages can be sent only to SafeFrame positions.")}},{key:"_sendSafeFrameGeometryUpdate",value:function(e){l()(this,gt).send(new te({status:te.status.GEOMETRY_UPDATE,meta:{info:e.meta}}))}},{key:"_sendSafeFrameFocusUpdate",value:function(e){l()(this,gt).send(new te({status:te.status.FOCUS_CHANGE,meta:{info:e.type===b.FOCUS}}))}},{key:"messenger",get:function(){return l()(this,gt)}},{key:"component",get:function(){return l()(this,Et)}}]),e}();function Tt(){return Math.floor(1e7*Math.random()).toString()}function St(e,t){var i,n,o={id:"jacSandbox_"+Tt(),name:JSON.stringify(e),title:"Advertisement",itemtype:"https://schema.org/WPAdBlock",itemscope:"",tabindex:"-1",allowtransparency:"true",scrolling:"no"},r=t.features.sandbox;r&&(o.sandbox=r.allow.map((function(e){return"allow-".concat(e)})).join(" "),o.allow=(i=r.features,n=[],Object.keys(i).forEach((function(e){var t=i[e];if(t.enabled){var o=[];o.push(e),t.allow&&t.allow.forEach((function(e){0===(e=e.trim()).indexOf("https:")?o.push(e):0===e.indexOf("http:")?o.push(e.replace("http:","https:")):o.push("https://"+e)})),n.push(o.join(" "))}})),n.join(";")),r.features.fullscreen.enabled&&(o.allowfullscreen=!0));var s=document.createElement("iframe");Object.keys(o).forEach((function(e){s.setAttribute(e,o[e])}));var a=e.adData.content.size,c=a.width,u=a.height;return d.setStyles(s,{position:"absolute",top:"0",left:"0",width:"".concat(c,"px"),height:"".concat(u,"px"),border:"0",overflow:"hidden",zIndex:t.layout.zIndex}),s}function bt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e.children,n=i.length-1;n>=0;n--)i[n]!==t&&e.removeChild(i[n])}var Dt=new WeakMap,Rt=new WeakMap,Pt=new WeakMap,kt=function(){function e(t){o()(this,e),Dt.set(this,{writable:!0,value:void 0}),Rt.set(this,{writable:!0,value:void 0}),Pt.set(this,{writable:!0,value:void 0}),f()(this,Dt,t)}return s()(e,null,[{key:"create",value:function(t){return new e(t)}}]),s()(e,[{key:"render",value:function(e){var t=e.clientBaseUrl;if(t){var i=l()(this,Dt).position,n=l()(this,Dt).element,o={adData:e,token:Tt()},r=i.containerType;r===be&&function(e,t){e.safeFrame={geom:t.safeFrameGeometry.buildGeometry(),focus:t.pageObserver.hasFocus,meta:t.position.config.client.meta}}(o,l()(this,Dt));var s=f()(this,Rt,St(o,i.config.client));l()(this,Pt)&&l()(this,Pt).cleanup(),bt(n,s),r===be?s.src="".concat(t,"/safeframe.html"):r===De&&(s.src="".concat(t,"/sandbox.html")),n.appendChild(s),f()(this,Pt,function(e,t,i,n){var o=i.position.config.client.render.timeout||5e3,r=!1,s=new ae(e.contentWindow,t.token);return s.listen(),s.on($.topic.WRITE_COMPLETE,(function(){e.removeAttribute("name"),n.trigger(new mt(mt.RENDER_COMPLETE))})),s.on($.topic.PAGE_LOAD,(function(){r||(r=!0,n.trigger(new mt(mt.AD_LOAD)))})),setTimeout((function(){r||(r=!0,e.removeAttribute("name"),n.trigger(new mt(mt.AD_LOAD_TIMEOUT)))}),o),new Ot(s,i)}(s,o,l()(this,Dt),this)),r===Re&&function(e,t){var i=e.contentWindow.document;i.open(),i.write('<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>html,body{margin:0;padding:0}</style></head><body><script src="'+t+'"><\/script><script>var inFIF=true,inDapIF=true;<\/script></body></html>'),i.close()}(s,"".concat(t,"/jac.js"))}else console.error("Rendering aborted: URL of JAC library not defined.")}},{key:"clear",value:function(){bt(l()(this,Dt).element)}},{key:"reset",value:function(){l()(this,Dt).element.parentNode.removeChild(l()(this,Dt).element)}},{key:"resize",value:function(e){var t=e.width,i=e.height,n=e.top,o=void 0===n?0:n,r=e.left,s=void 0===r?0:r;e.resizeContainer&&d.setStyles(l()(this,Dt).element,{position:"relative",width:"".concat(t,"px"),height:"".concat(i,"px")}),l()(this,Rt)&&d.setStyles(l()(this,Rt),{width:"".concat(t,"px"),height:"".concat(i,"px"),top:"".concat(o,"px"),left:"".concat(s,"px")})}},{key:"sandbox",get:function(){return l()(this,Pt)}}]),e}();Object.assign(kt.prototype,W);var At=kt,Ct=function(){function e(t){var i=t.t,n=void 0===i?0:i,r=t.l,s=void 0===r?0:r,a=t.r,u=void 0===a?0:a,l=t.b,h=void 0===l?0:l;o()(this,e),c()(this,"offsetTop",void 0),c()(this,"offsetLeft",void 0),c()(this,"offsetBottom",void 0),c()(this,"offsetRight",void 0),c()(this,"width",void 0),c()(this,"height",void 0),this.offsetTop=n,this.offsetLeft=s,this.offsetRight=u,this.offsetBottom=h,this.width=Math.max(this.offsetRight-this.offsetLeft,0),this.height=Math.max(this.offsetBottom-this.offsetTop,0)}return s()(e,[{key:"normalize",value:function(){this.offsetTop=Math.max(this.offsetTop,0),this.offsetLeft=Math.max(this.offsetLeft,0),this.offsetRight=Math.max(this.offsetRight,0),this.offsetBottom=Math.max(this.offsetBottom,0),this.width=Math.max(this.offsetRight-this.offsetLeft,0),this.height=Math.max(this.offsetBottom-this.offsetTop,0)}},{key:"toSafeFrameClip",value:function(){return{t:this.offsetTop,l:this.offsetLeft,r:this.offsetRight,b:this.offsetBottom,w:this.width,h:this.height}}},{key:"getOffsetDifference",value:function(e){var t={top:0,right:0,bottom:0,left:0};return this.offsetTop>e.offsetTop&&this.offsetTop<e.offsetBottom&&(t.top=this.offsetTop-e.offsetTop),this.offsetLeft>e.offsetLeft&&this.offsetLeft<e.offsetRight&&(t.left=this.offsetLeft-e.offsetLeft),this.offsetRight<e.offsetRight&&this.offsetRight>e.offsetLeft&&(t.right=e.offsetRight-this.offsetRight),this.offsetBottom<e.offsetBottom&&this.offsetBottom>e.offsetTop&&(t.bottom=e.offsetBottom-this.offsetBottom),t}},{key:"addHorizontalClipping",value:function(e,t){e>this.offsetLeft&&(this.offsetLeft=e),t<this.offsetRight&&(this.offsetRight=t)}},{key:"addVerticalClipping",value:function(e,t){e>this.offsetTop&&(this.offsetTop=e),t<this.offsetBottom&&(this.offsetBottom=t)}}]),e}();function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=pt.getElementGeometry(e,t),n=m.getPageScollInfo(),o={t:i.top,l:i.left,r:i.right,b:i.bottom,w:i.width,h:i.height,z:i.zIndex};return(n.y||n.x)&&(o.l+=n.x,o.t+=n.y),o.b=o.t+i.height,o.r=o.l+i.width,Object.keys(o).forEach((function(e){"number"==typeof o[e]&&(o[e]=Math.round(o[e]))})),o}function Nt(){var e=m.getPageScollInfo(),t=pt.getWindowGeometry();return{t:e.y,l:e.x,r:e.x+t.width,b:e.y+t.height,w:t.width,h:t.height}}function Mt(e,t,i){for(var n,o,r,s=m.getPageScollInfo(),a=d.getComputedStyle(e);a;){var c=e===i;if("block"===a.display||"absolute"===a.position||"none"!==a.float){var u=It(e),l=u.t,h=u.l,f=u.r,p=u.b,v=e.offsetWidth,g=e.offsetHeight,E=e.clientWidth,y=e.clientHeight;!n&&v>E&&(n=v-E),!o&&g>y&&(o=g-y),c?(e.scrollWidth>E&&(h=0,f=(window.innerWidth||v)+s.x,window.innerWidth&&window.innerWidth>E&&(f-=window.innerWidth-E),t.addHorizontalClipping(h,f)),e.scrollHeight>y&&(l=0,p=(window.innerHeight||g)+s.y,window.innerHeight&&window.innerHeight>y&&(p-=window.innerHeight-y),t.addVerticalClipping(l,p))):(n&&f-h===v&&(f-=n),o&&p-l===g&&(p-=o),pt.isClippingElement(e,"X",a)&&t.addHorizontalClipping(h,f),pt.isClippingElement(e,"Y",a)&&t.addVerticalClipping(l,p),!r&&pt.isScrollableElement(e,a)&&(r=e))}if(c)break;if(!(e=e.parentNode))break;a=d.getComputedStyle(e)}return{scrollParent:r,xScrollBarHeight:o,yScrollBarWidth:n}}var Lt=new WeakMap,Ft=new WeakMap,jt=new WeakMap,xt=new WeakMap,Ut=function(){function e(t,i){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;o()(this,e),Lt.set(this,{writable:!0,value:void 0}),Ft.set(this,{writable:!0,value:void 0}),jt.set(this,{writable:!0,value:void 0}),xt.set(this,{writable:!0,value:void 0}),f()(this,Lt,t),f()(this,Ft,i),f()(this,jt,r),f()(this,xt,D((function(){return n.dispatchGeometryChange()}),1e3)),l()(this,Lt).on(b.SCROLL,l()(this,xt)),l()(this,Lt).on(b.RESIZE,l()(this,xt))}return s()(e,[{key:"buildGeometry",value:function(){return{win:this.buildWindowGeometry(),self:this.buildSelfGeometry(),exp:this.buildExpandableGeometry(),par:this.buildParentGeometry()}}},{key:"winHasFocus",value:function(){return l()(this,Lt).hasFocus}},{key:"dispatchGeometryChange",value:function(){this.trigger(new T(e.GEOMETRY_UPDATE,this.buildGeometry()))}},{key:"destroy",value:function(){l()(this,Lt).off(b.SCROLL,l()(this,xt)),l()(this,Lt).off(b.RESIZE,l()(this,xt))}},{key:"buildWindowGeometry",value:function(){var e=m.getWindowLocation(),t=m.getViewportDimension();return{t:e.y,l:e.x,r:t.w+e.x,b:t.h+e.y,w:t.w,h:t.h}}},{key:"buildSelfGeometry",value:function(){var e=It(l()(this,Ft),l()(this,jt)),t=pt.getVisibilityMetrics(l()(this,Ft),l()(this,jt));return e.xiv=parseFloat(t.xPercentage.toFixed(2)),e.yiv=parseFloat(t.yPercentage.toFixed(2)),e.iv=parseFloat(t.totalPercentage.toFixed(2)),e}},{key:"buildExpandableGeometry",value:function(){var e=It(l()(this,Ft)),t=m.getDocumentElement(),i=Nt(),n=new Ct(i),o=Mt(l()(this,Ft),n,t);n.normalize();var r=new Ct(e).getOffsetDifference(n),s={t:r.top,l:r.left,r:r.right,b:r.bottom};return o.scrollParent?(s.xs=!!o.xScrollBarHeight,s.ys=!!o.yScrollBarWidth):(s.xs=t.scrollWidth>t.clientWidth,s.ys=t.scrollHeight>t.clientHeight),s}},{key:"buildParentGeometry",value:function(){var e=m.getDocumentElement(),t=Nt(),i=new Ct(t),n=Mt(l()(this,Ft),i,e);if(n.scrollParent){var o=It(n.scrollParent),r=new Ct(o);return Mt(n.scrollParent,r,e),r.addHorizontalClipping(t.l,t.r),r.addVerticalClipping(t.t,t.b),r.normalize(),r.toSafeFrameClip()}return i.normalize(),i.toSafeFrameClip()}}]),e}();c()(Ut,"GEOMETRY_UPDATE","GEOMETRY_UPDATE"),Object.assign(Ut.prototype,W);var Gt=Ut;function Wt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var Ht=new WeakMap,Vt=new WeakMap,zt=new WeakMap,Jt=new WeakMap,Bt=new WeakMap,Zt=new WeakMap,qt=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,ni=function(){function e(t,i,n){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;o()(this,e),Ht.set(this,{writable:!0,value:void 0}),Vt.set(this,{writable:!0,value:void 0}),zt.set(this,{writable:!0,value:void 0}),Jt.set(this,{writable:!0,value:void 0}),Bt.set(this,{writable:!0,value:void 0}),Zt.set(this,{writable:!0,value:!1}),qt.set(this,{writable:!0,value:!1}),Yt.set(this,{writable:!0,value:!1}),Xt.set(this,{writable:!0,value:!1}),Kt.set(this,{writable:!0,value:void 0}),Qt.set(this,{writable:!0,value:void 0}),$t.set(this,{writable:!0,value:void 0}),ei.set(this,{writable:!0,value:!0}),ti.set(this,{writable:!0,value:void 0}),ii.set(this,{writable:!0,value:void 0}),c()(this,"position",void 0),c()(this,"element",void 0),c()(this,"renderer",void 0),this.position=t,this.element=i,f()(this,Ht,n),f()(this,$t,s),this.renderer=At.create(this),this.renderer.on(mt.RENDER_COMPLETE,this._onRenderComplete,this),this.renderer.on(mt.AD_LOAD,this._onAdLoad,this),this.renderer.on(mt.AD_LOAD_TIMEOUT,this._onAdLoadTimeOut,this),f()(this,Jt,(function(){return r._onMouseOver()})),f()(this,Bt,(function(){return r._onMouseOut()})),this.element.addEventListener("mouseover",l()(this,Jt)),this.element.addEventListener("mouseout",l()(this,Bt)),t.containerType===be&&this._addSafeFrameGeometry()}return s()(e,[{key:"_addSafeFrameGeometry",value:function(){var e=this;f()(this,ti,new Gt(l()(this,Ht),this.element,l()(this,$t))),f()(this,ii,(function(t){e.position.containerType===be&&e.trigger(new lt(lt.SAFE_FRAME_GEOMETRY_CHANGED,t.meta))})),l()(this,ti).on(Gt.GEOMETRY_UPDATE,l()(this,ii),this)}},{key:"_removeSafeFrameGeometry",value:function(){l()(this,ti).destroy(),l()(this,ti).off(Gt.GEOMETRY_UPDATE,l()(this,ii),this),f()(this,ti,null)}},{key:"_processAndInjectAd",value:function(){if(f()(this,Yt,!1),l()(this,Vt).status===Te)l()(this,Vt).content.size={width:1,height:1,unit:"px"},this.trigger(new lt(lt.NO_AD,{name:this.position.name}));else if(l()(this,Vt).status!==Oe)return;this.trigger(new lt(lt.RENDER_START,{name:this.position.name})),f()(this,ei,!1),ce.isMobileMomentAd(l()(this,Vt))&&(l()(this,Vt).content.size=ce.computeDisplaySize(this.position)),this.setSize(l()(this,Vt).content.size),this.renderer.render(l()(this,Vt))}},{key:"render",value:function(e){var t=this;f()(this,Yt,!0),f()(this,Vt,e),this.position.updateContainerType(e.meta),!l()(this,zt)&&l()(this,Ht)&&(f()(this,zt,(function(){return t._pageStateChanged()})),l()(this,Ht).on(b.SCROLL,l()(this,zt)),l()(this,Ht).on(b.RESIZE,l()(this,zt)),l()(this,Ht).on(b.VISIBILITY,l()(this,zt))),this._pageStateChanged(),this.position.config.client.render.requireViewable||this._processAndInjectAd()}},{key:"show",value:function(){d.setStyles(this.element,{display:"block"}),this.trigger(new lt(lt.SHOW))}},{key:"hide",value:function(){d.setStyles(this.element,{display:"none"}),this.trigger(new lt(lt.HIDE))}},{key:"destroy",value:function(){l()(this,Ht).off(b.SCROLL,l()(this,zt)),l()(this,Ht).off(b.RESIZE,l()(this,zt)),l()(this,Ht).off(b.VISIBILITY,l()(this,zt)),this.renderer.off(mt.RENDER_COMPLETE,this._onRenderComplete,this),this.renderer.off(mt.AD_LOAD,this._onAdLoad,this),this.renderer.off(mt.AD_LOAD_TIMEOUT,this._onAdLoadTimeOut,this),this.element.removeEventListener("mouseover",l()(this,Jt)),this.element.removeEventListener("mouseout",l()(this,Bt)),this.renderer.reset(),f()(this,ei,!0),l()(this,ti)&&this._removeSafeFrameGeometry(),this.trigger(new lt(lt.DESTROY))}},{key:"updateGeometry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f()(this,Zt,!0),this.renderer.resize({width:e.width,height:e.height,top:e.dy||0,left:e.dx||0,resizeContainer:t});var i=this.getGeometry();this.trigger(new lt(lt.RESIZE,i))}},{key:"resetGeometry",value:function(){if(f()(this,Zt,!1),l()(this,Kt)){this.renderer.resize({width:l()(this,Kt).width,height:l()(this,Kt).height,top:0,left:0,resizeContainer:!0});var e=this.getGeometry();this.trigger(new lt(lt.RESIZE,e))}}},{key:"getGeometry",value:function(){return pt.getElementGeometry(this.element)}},{key:"_isAreaInView",value:function(){var e=this.position.config.client.instrumentation,t=e.viewability.percent/100,i=pt.getVisibilityMetrics(this.element,l()(this,$t)),n=i.totalPercentage>=t,o=0;return e.viewability.pixels>0&&(o=i.totalPercentage*i.containerPixels),n||e.viewability.pixels>0&&o>=e.viewability.pixels}},{key:"unloadAd",value:function(){this.hide(),this.renderer.clear(),f()(this,ei,!0),f()(this,Kt,null),this.trigger(new lt(lt.NO_AD,{name:this.position.name}))}},{key:"setSize",value:function(e){ce.isMobileMomentAd(l()(this,Vt))||l()(this,Kt)&&l()(this,Kt).width===e.width&&l()(this,Kt).height===e.height||(f()(this,Kt,e),this.renderer.resize({width:e.width,height:e.height,resizeContainer:!0}),this.trigger(new lt(lt.AD_SIZE_CHANGED,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({name:this.position.name},l()(this,Kt)))))}},{key:"_pageStateChanged",value:function(){var e=this;this._isAreaInView()&&l()(this,Ht).isVisible?l()(this,Qt)||(l()(this,ei)?this._viewTimeCounterElapsed():f()(this,Qt,l()(this,$t).setTimeout((function(){return e._viewTimeCounterElapsed()}),1e3))):(l()(this,Qt)&&f()(this,Qt,l()(this,$t).clearTimeout(l()(this,Qt))),this._changeViewabilityState(!1)),this.trigger(new lt(lt.GEOMETRY_CHANGED))}},{key:"_viewTimeCounterElapsed",value:function(){f()(this,Qt,l()(this,$t).clearTimeout(l()(this,Qt)));var e=this.position.config,t=this._isAreaInView();this._changeViewabilityState(t),e.client.render.requireViewable&&l()(this,Yt)&&t&&this._processAndInjectAd()}},{key:"_changeViewabilityState",value:function(e){e!==l()(this,Xt)&&(f()(this,Xt,e),this._fireVisibilityEvent(e))}},{key:"_fireVisibilityEvent",value:function(e){var t=e?lt.VIEW_START:lt.VIEW_END;this.trigger(new lt(t,{name:this.position.name}))}},{key:"_onRenderComplete",value:function(){this.trigger(new lt(lt.RENDER_COMPLETE,this.adSize))}},{key:"_onAdLoad",value:function(){this.trigger(new lt(lt.AD_LOAD))}},{key:"_onAdLoadTimeOut",value:function(){this.trigger(new lt(lt.AD_LOAD_TIMEOUT))}},{key:"_onMouseOver",value:function(){f()(this,qt,!0)}},{key:"_onMouseOut",value:function(){f()(this,qt,!1),this.trigger(new lt(lt.MOUSE_OUT,{name:this.position.name}))}},{key:"updateMeta",value:function(){this.trigger(new lt(lt.AD_META_CHANGED,this.position.config.client.meta))}},{key:"adMessageReceived",value:function(e){this.trigger(new lt(lt.AD_MESSAGE,e))}},{key:"isInView",get:function(){return l()(this,Xt)}},{key:"isExpanded",get:function(){return l()(this,Zt)}},{key:"hasMouseOver",get:function(){return l()(this,qt)}},{key:"size",get:function(){return l()(this,Kt)||{}}},{key:"adData",get:function(){return l()(this,Vt)}},{key:"safeFrameGeometry",get:function(){return l()(this,ti)}},{key:"pageObserver",get:function(){return l()(this,Ht)}}]),e}();Object.assign(ni.prototype,W);var oi=ni;function ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var si=function(e){E()(i,e);var t=ri(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);c()(si,"ROTATION","Scheduler.ROTATION");var ai=new WeakMap,ci=new WeakMap,ui=new WeakMap,li=new WeakMap,hi=function(){function e(t,i){var n=this;o()(this,e),ai.set(this,{writable:!0,value:5e3}),ci.set(this,{writable:!0,value:void 0}),ui.set(this,{writable:!0,value:{}}),li.set(this,{writable:!0,value:{}}),i===i.top&&(f()(this,ci,t),l()(this,ci).on(b.VISIBILITY,(function(e){return n._pageVisibleChanged(e)}),this))}return s()(e,[{key:"schedule",value:function(e){var t=e.config.client.features.rotation;l()(this,ui)[e.name]?console.warn("Position ".concat(e.name," is already a scheduler managed resource.")):t.enabled?t.limit<1?console.warn("Position ".concat(e.name," should have a positive integer rotation limit.")):l()(this,ui)[e.name]={name:e.name,rotationCount:0,rotationConfig:JSON.parse(JSON.stringify(t))}:console.warn("Position ".concat(e.name," has rotation disabled."))}},{key:"update",value:function(e){var t=e.config.client.features.rotation;if(l()(this,ui)[e.name]){var i=l()(this,ui)[e.name].rotationConfig.enabled;l()(this,ui)[e.name].rotationConfig=JSON.parse(JSON.stringify(t)),l()(this,li)[e.name]&&(i&&!t.enabled?(this._clearRotationTimer(e.name),this._removePositionObservers(l()(this,li)[e.name])):!i&&t.enabled&&this._addPositionObservers(l()(this,li)[e.name]))}else console.warn("Position ".concat(e.name," is not a scheduler managed resource."))}},{key:"remove",value:function(e){l()(this,ui)[e.name]?l()(this,ui)[e.name].rotationConfig.cancellable?this._clearRegistryEntry(e.name):console.warn("Position ".concat(e.name," is not cancellable.")):console.warn("Position ".concat(e.name," is not a scheduler managed position."))}},{key:"restart",value:function(e,t){e.rotated=!1,this._clearRegistryEntry(e.name),this.schedule(e),t&&(this.unsubscribe(t),this.subscribe(t))}},{key:"subscribe",value:function(e){var t=e.position.name;e.position.config.client.features.rotation.enabled&&(l()(this,li)[t]?console.warn("PositionComponent for position ".concat(t," is already subscribed.")):(l()(this,li)[t]=e,this._addPositionObservers(e)))}},{key:"unsubscribe",value:function(e){var t=e.position.name;l()(this,li)[t]?(this._removePositionObservers(e),delete l()(this,li)[t]):console.warn("PositionComponent for position ".concat(t," is not a subscribed entry."))}},{key:"positionPeriodElapsed",value:function(e){var t=l()(this,ui)[e],i=l()(this,li)[e];i&&i.hasMouseOver?t.waitingForMouseToLeave=!0:(t.waitingToBeInView=!0,l()(this,ci).isVisible&&(t.rotationConfig.requireViewable?i&&i.isInView&&this._startRotation(e):this._startRotation(e)))}},{key:"_renderStartedForPosition",value:function(e){var t=e.meta.name,i=l()(this,ui)[t];i.rotationCount<i.rotationConfig.limit&&this._scheduleTimeout(t,i.rotationConfig.period)}},{key:"_mouseLeftForPosition",value:function(e){var t=this,i=e.meta.name,n=l()(this,ui)[i];n.waitingForMouseToLeave&&(l()(this,ui)[i].timeout=setTimeout((function(){t.positionPeriodElapsed(i)}),l()(this,ai)),n.waitingForMouseToLeave=!1)}},{key:"_viewStartedForPosition",value:function(e){var t=e.meta.name;l()(this,ui)[t].waitingToBeInView&&this.positionPeriodElapsed(t)}},{key:"_scheduleTimeout",value:function(e,t){var i=this;l()(this,ui)[e].timeout=setTimeout((function(){i.positionPeriodElapsed(e)}),t)}},{key:"_clearRegistryEntry",value:function(e){this._clearRotationTimer(e),delete l()(this,ui)[e]}},{key:"_clearRotationTimer",value:function(e){l()(this,ui)[e]&&l()(this,ui)[e].timeout&&clearTimeout(l()(this,ui)[e].timeout)}},{key:"_addPositionObservers",value:function(e){e.on(lt.RENDER_START,this._renderStartedForPosition,this),e.on(lt.MOUSE_OUT,this._mouseLeftForPosition,this),e.on(lt.VIEW_START,this._viewStartedForPosition,this)}},{key:"_removePositionObservers",value:function(e){e.off(lt.RENDER_START,this._renderStartedForPosition,this),e.off(lt.MOUSE_OUT,this._mouseLeftForPosition,this),e.off(lt.VIEW_START,this._viewStartedForPosition,this)}},{key:"_startRotation",value:function(e){var t={positionName:e},i=l()(this,ui)[e];i.waitingToBeInView=!1,i.waitingForMouseToLeave=!1,i.rotationCount++,l()(this,li)[e]&&(t.size=l()(this,li)[e].size),this.trigger(new si(si.ROTATION,t))}},{key:"_pageVisibleChanged",value:function(){this._checkPositionsStatusOnPageChange()}},{key:"_checkPositionsStatusOnPageChange",value:function(){var e=this;l()(this,ci).isVisible&&Object.keys(l()(this,ui)).filter((function(t){return l()(e,ui)[t].waitingToBeInView})).forEach((function(t){return e.positionPeriodElapsed(t)}))}},{key:"isManagedPosition",value:function(e){return!!l()(this,ui)[e]}},{key:"registry",get:function(){return l()(this,ui)}},{key:"positionComponents",get:function(){return l()(this,li)}}]),e}();Object.assign(hi.prototype,W);var fi=hi;function di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var pi=function(e){E()(i,e);var t=di(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);c()(pi,"FETCH_START","FETCH_START"),c()(pi,"FETCH_COMPLETE","FETCH_COMPLETE"),c()(pi,"FETCH_TIMEOUT","FETCH_TIMEOUT"),c()(pi,"FETCH_ERROR","FETCH_ERROR"),c()(pi,"RENDER_START","RENDER_START"),c()(pi,"RENDER_COMPLETE","RENDER_COMPLETE"),c()(pi,"POSITION_CREATED","POSITION_CREATED"),c()(pi,"POSITION_ROTATE","POSITION_ROTATE"),c()(pi,"POSITION_RENDER_START","POSITION_RENDER_START"),c()(pi,"POSITION_RENDER_COMPLETE","POSITION_RENDER_COMPLETE"),c()(pi,"POSITION_COLLAPSED","POSITION_COLLAPSED"),c()(pi,"POSITION_VIEW_START","POSITION_VIEW_START"),c()(pi,"POSITION_VIEW_END","POSITION_VIEW_END"),c()(pi,"POSITION_CONFIG_CHANGED","POSITION_CONFIG_CHANGED"),c()(pi,"AD_LOAD_COMPLETE","AD_LOAD_COMPLETE"),c()(pi,"AD_SIZE_CHANGED","AD_SIZE_CHANGED"),c()(pi,"AD_MESSAGE","AD_MESSAGE");var vi=pi,mi=function e(){o()(this,e),c()(this,"usPrivacy","")},gi=function e(){o()(this,e),c()(this,"applies",null),c()(this,"euconsent","")};function Ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var yi=function(e){E()(i,e);var t=Ei(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);c()(yi,"API_NOT_FOUND","".concat("UserRegulation",".API_NOT_FOUND")),c()(yi,"READ_TIMEOUT","".concat("UserRegulation",".READ_TIMEOUT")),c()(yi,"RESOLVED","".concat("UserRegulation",".RESOLVED")),c()(yi,"UPDATED","".concat("UserRegulation",".UPDATED"));var wi,_i="gdpr",Oi="ccpa",Ti=new WeakMap,Si=new WeakMap,bi=new WeakMap,Di=new WeakMap,Ri=new WeakMap,Pi=function(){function e(){o()(this,e),Ti.set(this,{writable:!0,value:0}),Si.set(this,{writable:!0,value:void 0}),bi.set(this,{writable:!0,value:!1}),Di.set(this,{writable:!0,value:{}}),Ri.set(this,{writable:!0,value:void 0}),f()(this,Si,{CCPA:new mi,GDPR:new gi})}return s()(e,null,[{key:"getInstance",value:function(){return wi=wi||new e}},{key:"reset",value:function(){wi=null}}]),s()(e,[{key:"resolve",value:function(e,t){if(t)return f()(this,Ti,null),this._setDataFromConfig(t),void f()(this,bi,!0);if(!l()(this,bi)){if(f()(this,bi,!0),f()(this,Ri,e),"function"!=typeof l()(this,Ri).__cmp&&"function"!=typeof l()(this,Ri).__uspapi&&"function"!=typeof l()(this,Ri).__tcfapi)return f()(this,Ti,null),void this.trigger(new yi(yi.API_NOT_FOUND));this._readRegulatoryData()}}},{key:"_dispatchRegulationsResolvedEvent",value:function(){this.trigger(new yi(yi.RESOLVED))}},{key:"_dispatchRegulationsUpdatedEvent",value:function(){this.trigger(new yi(yi.UPDATED))}},{key:"_regulationResolved",value:function(e){l()(this,Di)[e]&&delete l()(this,Di)[e],0===Object.keys(l()(this,Di)).length&&(null===l()(this,Ti)?this._dispatchRegulationsUpdatedEvent():(clearTimeout(l()(this,Ti)),f()(this,Ti,null),this._dispatchRegulationsResolvedEvent()))}},{key:"_setDataFromConfig",value:function(e){e.gdpr&&(e.gdpr.euconsent?(l()(this,Si).GDPR.applies=1,l()(this,Si).GDPR.euconsent=""+e.gdpr.euconsent):l()(this,Si).GDPR.applies=["","0","false",!1,0,void 0,null].indexOf(e.gdpr.applies)>-1?0:1),e.ccpa&&e.ccpa.usPrivacy&&(l()(this,Si).CCPA.usPrivacy=""+e.ccpa.usPrivacy),this._dispatchRegulationsResolvedEvent()}},{key:"_readCCPAData",value:function(){var e=this;l()(this,Ri).__uspapi("getUSPData",1,(function(t,i){i&&(l()(e,Si).CCPA.usPrivacy=t.uspString||"",e._regulationResolved(Oi))}))}},{key:"_readTCFv1Data",value:function(){var e=this;l()(this,Ri).__cmp("getConsentData",null,(function(t,i){i&&(l()(e,Si).GDPR.applies=!1===t.gdprApplies?0:1,l()(e,Si).GDPR.euconsent=t.consentData||"",e._regulationResolved(_i))}))}},{key:"_readTCFv2Data",value:function(){var e=this;l()(this,Ri).__tcfapi("addEventListener",2,(function(t,i){if(("error"===t.cmpStatus||!i)&&"function"==typeof l()(e,Ri).__cmp&&l()(e,Di)[_i])return l()(e,Ri).__tcfapi("removeEventListener",2,(function(){}),t.listenerId),void e._readTCFv1Data();"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus||!i||(l()(e,Si).GDPR.applies=!1===t.gdprApplies?0:1,l()(e,Si).GDPR.euconsent=t.tcString||"",e._regulationResolved(_i))}))}},{key:"_readRegulatoryData",value:function(){var e=this;f()(this,Ti,setTimeout((function(){Object.keys(l()(e,Di)).length>0?e.trigger(new yi(yi.READ_TIMEOUT,{})):e._dispatchRegulationsResolvedEvent(),f()(e,Ti,null)}),500)),"function"==typeof l()(this,Ri).__uspapi&&(l()(this,Di)[Oi]="_readCCPAData"),"function"!=typeof l()(this,Ri).__tcfapi&&"function"!=typeof l()(this,Ri).__cmp||(l()(this,Di)[_i]="function"==typeof l()(this,Ri).__tcfapi?"_readTCFv2Data":"_readTCFv1Data"),Object.keys(l()(this,Di)).forEach((function(t){var i=l()(e,Di)[t];e[i]()}))}},{key:"data",get:function(){return l()(this,Si)}},{key:"resolved",get:function(){return null===l()(this,Ti)}}]),e}();Object.assign(Pi.prototype,W);var ki=Pi,Ai=function(e,t){if("string"==typeof e&&e)if(window.crypto&&crypto.subtle&&crypto.subtle.digest){var i=new TextEncoder("utf-8").encode(e.trim().toLowerCase());crypto.subtle.digest("SHA-256",i).then((function(e){var i=Array.from(new Uint8Array(e));t(i.map((function(e){return("00"+e.toString(16)).slice(-2)})).join(""))}))}else t("");else t("")};function Ci(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ii(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ci(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ni=function(){var e={};try{e=JSON.parse(localStorage.getItem("unified-identity"))||{}}catch(e){}return e},Mi=function(e){return Ii({},Ni()[e]||{})},Li=function(e,t){!function(e){try{localStorage.setItem("unified-identity",JSON.stringify(e))}catch(e){}}(Ii(Ii({},Ni()),{},c()({},e,t)))},Fi=function(e,t,i){var n=new XMLHttpRequest,o=Object.keys(t||{}).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&");n.onreadystatechange=function(e){n.readyState===XMLHttpRequest.DONE&&(0===n.status||n.status>=200&&n.status<400?i(JSON.parse(n.responseText)):i())};try{n.withCredentials=!0,n.open("GET","".concat(e,"?").concat(o),!0),n.send(t)}catch(e){}};function ji(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function xi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ji(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ui={};Ui.syncHashedEmail=function(e){var t=e.hashedEmail,i=e.gdpr,n=e.gdprConsent;if(t){var o,r=Mi(t);if(r.vmuid)if(!!(o=r.vmuid.lastUpdated)&&(new Date-new Date(o))/36e5<72)return;var s=xi(xi({"1p":1,he:t},void 0!==i?{gdpr:i}:{}),void 0!==n?{gdpr_consent:n}:{});Fi("https://ups.analytics.yahoo.com/ups/58300/fed",s,(function(e){e&&Li(t,xi(xi({},r),{},{vmuid:{value:e.vmuid,lastUpdated:(new Date).toISOString()}}))}))}},Ui.syncIds=function(e){e.hashedEmail&&Ui.syncHashedEmail(e)};var Gi=Ui;function Wi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Hi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Vi=function(e,t){var i=e.email,n=e.gdpr,o=e.gdprConsent;!function(e,t){e?e.indexOf("@")<0?t(e):Ai(e,t):t("")}(i,(function(e){Gi.syncIds(Hi(Hi({},e?{hashedEmail:e}:{}),{},{gdpr:n,gdprConsent:o}));var i=Mi(e),r=i.vmuid?i.vmuid.value:void 0;t(r?{vmuid:r}:{})}))},zi=Vi;function Ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}"undefined"!=typeof exports&&(exports.getIds=Vi);var Bi=function(e){E()(i,e);var t=Ji(i);function i(){return o()(this,i),t.apply(this,arguments)}return i}(T);c()(Bi,"TIMEOUT","TIMEOUT"),c()(Bi,"RESOLVED","RESOLVED"),c()(Bi,"UPDATED","UPDATED");var Zi=new WeakMap,qi=new WeakMap,Yi=function(){function e(){o()(this,e),Zi.set(this,{writable:!0,value:void 0}),qi.set(this,{writable:!0,value:{}})}return s()(e,[{key:"resolve",value:function(e){var t=this;if(e.service.user.email){var i={email:e.service.user.email};null!==e.service.user.regs.gdpr.applies&&(i.gdpr=!!e.service.user.regs.gdpr.applies,i.gdprConsent=e.service.user.regs.gdpr.euconsent),f()(this,Zi,setTimeout((function(){f()(t,Zi,null),t.trigger(new Bi(Bi.TIMEOUT))}),500)),zi(i,(function(e){clearTimeout(l()(t,Zi)),f()(t,Zi,null),l()(t,qi).VMUID&&e.vmuid&&l()(t,qi).VMUID!==e.vmuid?(l()(t,qi).VMUID=e.vmuid,t.trigger(new Bi(Bi.UPDATED))):(l()(t,qi).VMUID=e.vmuid,t.trigger(new Bi(Bi.RESOLVED)))}))}else f()(this,Zi,null)}},{key:"resolved",get:function(){return null===l()(this,Zi)}},{key:"ids",get:function(){return l()(this,qi)}}]),e}();Object.assign(Yi.prototype,W);var Xi=Yi,Ki="".concat("jac.inspect",".position"),Qi=function e(){o()(this,e)};c()(Qi,"PAGE_LOAD","".concat("jac.inspect",".page.pageLoad")),c()(Qi,"PING","".concat("jac.inspect",".handshake.ping")),c()(Qi,"PONG","".concat("jac.inspect",".handshake.pong")),c()(Qi,"POSITION_ADD","".concat(Ki,".add")),c()(Qi,"FETCH_BEGIN","".concat(Ki,".fetchBegin")),c()(Qi,"FETCH_COMPLETE","".concat(Ki,".fetchComplete")),c()(Qi,"FETCH_TIMEOUT","".concat(Ki,".fetchTimeout")),c()(Qi,"POSITION_ROTATE","".concat(Ki,".rotate")),c()(Qi,"POSITION_REMOVE","".concat(Ki,".remove")),c()(Qi,"POSITION_IN_VIEW","".concat(Ki,".inView")),c()(Qi,"POSITION_OUT_VIEW","".concat(Ki,".outView")),c()(Qi,"POSITION_RENDER_START","".concat(Ki,".renderStart")),c()(Qi,"POSITION_RENDER_COMPLETE","".concat(Ki,".renderComplete")),c()(Qi,"POSITION_COLLAPSED","".concat(Ki,".collapsed")),c()(Qi,"AD_LOAD_COMPLETE","".concat(Ki,".ad.loadComplete")),c()(Qi,"AD_SIZE_CHANGED","".concat(Ki,".ad.sizeChanged")),c()(Qi,"POSITION_CONFIG_CHANGED","".concat(Ki,".configChanged")),c()(Qi,"POSITION_AD_MARKUP_REQUESTED","".concat(Ki,".ad.markupRequested")),c()(Qi,"POSITION_AD_MARKUP","".concat(Ki,".ad.markup"));var $i=/\d\.\d\.\d(-rc\.\d{1,})?\/jac\.js$/,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,on=new WeakMap,rn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(o()(this,e),en.set(this,{writable:!0,value:void 0}),tn.set(this,{writable:!0,value:void 0}),c()(this,"networkType",void 0),nn.set(this,{writable:!0,value:!0}),on.set(this,{writable:!0,value:void 0}),!t.performance)return console.warn("No performance support available"),void f()(this,nn,!1);f()(this,on,t);var i=t.navigator,n=i.connection||i.mozConnection||i.webkitConnection;this.networkType=n?n.effectiveType:"unknown";var r=t.performance;f()(this,en,parseFloat(r.timing.navigationStart.toFixed(2))),f()(this,tn,parseFloat(r.timing.responseEnd.toFixed(2)));var s=r.getEntriesByType("navigation");s&&s[0]&&f()(this,tn,parseFloat((s[0].responseEnd+l()(this,en)).toFixed(2)))}return s()(e,[{key:"getClientResourceTiming",value:function(){if(l()(this,nn)){var e=l()(this,on).performance.getEntriesByType("resource").filter((function(e){return e.name.match($i)}));return e.length>0?e[0]:void 0}}},{key:"getFetchResourceTiming",value:function(e){if(l()(this,nn)&&e&&j.isString(e)&&!(e.length<20)){var t=l()(this,on).performance.getEntriesByType("resource").filter((function(t){return"script"===t.initiatorType&&t.name===e}));return t.length>0?t[t.length-1]:void 0}}},{key:"responseEnd",get:function(){return l()(this,tn)}},{key:"timeOrigin",get:function(){return l()(this,en)}}]),e}(),sn=function(){function e(){o()(this,e)}return s()(e,null,[{key:"createPongEvent",value:function(e,t,i){var n=(i=i||new rn).getClientResourceTiming(),o={topic:Qi.PONG,meta:{timestamp:(new Date).getTime(),responseEnd:i.responseEnd,history:t,client:{version:e.version},adServer:{meta:{},params:{}},site:{spaceId:e.config.service.site.spaceId,name:e.config.service.site.name}}};return n&&(o.meta.client.loadTime=n.responseEnd,o.meta.client.loadComplete=n.responseEnd+i.timeOrigin,o.meta.client.url=n.name),Object.keys(e.config.service.adServer).filter((function(e,t){return 0===t})).forEach((function(t){var i=e.config.service.adServer[t];o.meta.adServer.name=t,o.meta.adServer.params=i.params,t===we["1AS"]&&(o.meta.adServer.meta.region=i.region)})),o}},{key:"createPositionAddEvent",value:function(e,t){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r=e._positions[t];if("string"==typeof r.config.client.targetElement){i=r.config.client.targetElement;var s=o.getElementById(i);n=s?s.getBoundingClientRect().top:null}var a={topic:Qi.POSITION_ADD,meta:{timestamp:(new Date).getTime(),config:r.config,name:t,elementId:i,elementTop:n,sizes:r.config.service.sizes,containerType:r.containerType,params:r.config.service.params}};return a}},{key:"createFetchBeginEvent",value:function(e,t,i,n){return{topic:Qi.FETCH_BEGIN,meta:{timestamp:n,name:e,url:t,prefetched:!!i}}}},{key:"createFetchTimeoutEvent",value:function(e,t){return{topic:Qi.FETCH_TIMEOUT,meta:{timestamp:(new Date).getTime(),name:e,url:t}}}},{key:"createFetchCompleteEvent",value:function(e){var t=e.jac,i=e.positionName,n=e.url,o=e.jillTimings,r=e.positionResponse,s=e.requestTimings,a=t._positions[i],c={meta:r.meta},u=r.creativeId;return{topic:Qi.FETCH_COMPLETE,meta:{timestamp:(new Date).getTime(),name:i,url:n,upstreamResponseDuration:o.upstreamDuration,serviceResponseDuration:o.totalRequestDuration,totalServiceResponseDuration:s?s.duration:null,processingDuration:o.processingDuration,alias:a?a.config.service.alias:void 0,creativeId:u,adData:c,status:r.status}}}},{key:"createPositionRotateEvent",value:function(e){return{topic:Qi.POSITION_ROTATE,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionRemoveEvent",value:function(e){return{topic:Qi.POSITION_REMOVE,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionInViewEvent",value:function(e){return{topic:Qi.POSITION_IN_VIEW,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionOutOfViewEvent",value:function(e){return{topic:Qi.POSITION_OUT_VIEW,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionRenderStartEvent",value:function(e,t){var i=e._positions[t];return{topic:Qi.POSITION_RENDER_START,meta:{timestamp:(new Date).getTime(),name:t,timeout:i.config.client.render.timeout}}}},{key:"createPositionRenderCompleteEvent",value:function(e,t,i,n){var o=e._positions[t],r={topic:Qi.POSITION_RENDER_COMPLETE,meta:{timestamp:(new Date).getTime(),name:t,containerType:o.containerType}};return void 0!==P()(i)&&void 0!==P()(n)&&(r.meta.size=i+"x"+n),r}},{key:"createAdSizeChangedEvent",value:function(e,t,i){var n={topic:Qi.AD_SIZE_CHANGED,meta:{timestamp:(new Date).getTime(),name:e}};return void 0!==P()(t)&&void 0!==P()(i)&&(n.meta.size=t+"x"+i),n}},{key:"createAdLoadCompleteEvent",value:function(e){return{topic:Qi.AD_LOAD_COMPLETE,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPageLoadEvent",value:function(e){return{topic:Qi.PAGE_LOAD,meta:{timestamp:e}}}},{key:"createPositionCollapsedEvent",value:function(e){return{topic:Qi.POSITION_COLLAPSED,meta:{timestamp:(new Date).getTime(),name:e}}}},{key:"createPositionConfigChangedEvent",value:function(e,t){return{topic:Qi.POSITION_CONFIG_CHANGED,meta:{timestamp:(new Date).getTime(),name:e,config:t}}}},{key:"createPositionAdMarkupEvent",value:function(e,t){return{topic:Qi.POSITION_AD_MARKUP,meta:{timestamp:(new Date).getTime(),name:e,markup:t}}}}]),e}();function an(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var cn=new WeakMap,un=new WeakMap,ln=new WeakMap,hn=new WeakMap,fn=function(){function e(){o()(this,e),cn.set(this,{writable:!0,value:void 0}),un.set(this,{writable:!0,value:void 0}),ln.set(this,{writable:!0,value:[]}),hn.set(this,{writable:!0,value:{}})}return s()(e,[{key:"activate",value:function(e,t){var i=this;f()(this,un,t),"1"===Ae.getParameter(e.location.href,"jac.inspect")&&this._launchInspector(),this.on(Qi.PING,this._onPing,this),this.on(Qi.POSITION_AD_MARKUP_REQUESTED,this._onMarkupRequested,this),this._initInternalListeners(t),e.addEventListener("message",(function(e){var t=e.data.topic;t!==Qi.PING&&t!==Qi.POSITION_AD_MARKUP_REQUESTED||i.trigger(new T(t,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?an(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):an(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({source:e.source},e.data.meta)))}))}},{key:"produceEvent",value:function(e){l()(this,cn)?l()(this,cn).postMessage(e,"*"):l()(this,ln).push(e)}},{key:"_launchInspector",value:function(){var e=document.createElement("script");e.src="https://jacky-prod-us-east-1.s3.amazonaws.com/jacky/bootstrap/jacky-bootstrap.min.js",document.head.appendChild(e)}},{key:"_initInternalListeners",value:function(e){e.on(vi.POSITION_CREATED,this._onPositionCreated,this),e._jill.on(qe.FETCH_START,this._onFetchStart,this),e._jill.on(qe.RESPONSE_PROCESSED,this._onJillResponseProcessed,this),e._jill.on(qe.FETCH_TIMEOUT,this._onJillFetchTimeout,this),e.on(vi.POSITION_ROTATE,this._onPositionRotate,this),e.on(vi.POSITION_VIEW_START,this._onPositionViewStart,this),e.on(vi.POSITION_VIEW_END,this._onPositionViewEnd,this),e.on(vi.POSITION_RENDER_START,this._onPositionRenderStart,this),e.on(vi.POSITION_RENDER_COMPLETE,this._onPositionRenderComplete,this),e.on(vi.POSITION_COLLAPSED,this._onPositionCollapsed,this),e.on(vi.AD_LOAD_COMPLETE,this._onAdLoadComplete,this),e.on(vi.AD_SIZE_CHANGED,this._onAdSizeChanged,this),e._pageObserver.on(b.LOADED,this._onPageLoad,this),e.on(vi.POSITION_CONFIG_CHANGED,this._onPositionConfigChanged,this)}},{key:"_onPing",value:function(e){var t=l()(this,un).config;t&&t.service?l()(this,cn)?console.warn("Already responded to the ping request."):(f()(this,cn,e.meta.source),this._sendPong()):console.warn("No config set yet. Can not reply to inspect ping requests.")}},{key:"_onMarkupRequested",value:function(e){e.meta&&e.meta.name?l()(this,cn)?l()(this,hn)[e.meta.name]&&this.produceEvent(sn.createPositionAdMarkupEvent(e.meta.name,l()(this,hn)[e.meta.name])):console.warn("No ping initialization request got."):console.warn("No position name provided in the ad markup request.")}},{key:"_sendPong",value:function(){var e=sn.createPongEvent(l()(this,un),l()(this,ln));this.produceEvent(e),f()(this,ln,[])}},{key:"_onPositionCreated",value:function(e){this.produceEvent(sn.createPositionAddEvent(l()(this,un),e.meta.positionName))}},{key:"_onFetchStart",value:function(e){var t=this,i=e.meta.url,n=e.meta.prefetched,o=(new Date).getTime();Object.keys(e.meta.request.positions).forEach((function(e){t.produceEvent(sn.createFetchBeginEvent(e,i,n,o))}))}},{key:"_onJillFetchTimeout",value:function(e){var t=this,i=e.meta.url;e.meta.positionNames.forEach((function(e){t.produceEvent(sn.createFetchTimeoutEvent(e,i))}))}},{key:"_onJillResponseProcessed",value:function(e){var t=this,i=e.meta.url,n=e.meta.response,o=n.adServerResponse,r=o.adServer.requestDuration,s=n.service.timings;s.upstreamDuration=r;var a=l()(this,un),c=(new rn).getFetchResourceTiming(i);Object.keys(o.positions).forEach((function(e){l()(t,hn)[e]=o.positions[e].content.markup,t.produceEvent(sn.createFetchCompleteEvent({jac:a,positionName:e,url:i,jillTimings:s,positionResponse:o.positions[e],requestTimings:c}))}))}},{key:"_onPositionRotate",value:function(e){this.produceEvent(sn.createPositionRotateEvent(e.meta.positionName))}},{key:"_onPositionViewStart",value:function(e){this.produceEvent(sn.createPositionInViewEvent(e.meta.positionName))}},{key:"_onPositionViewEnd",value:function(e){this.produceEvent(sn.createPositionOutOfViewEvent(e.meta.positionName))}},{key:"_onPositionRenderStart",value:function(e){this.produceEvent(sn.createPositionRenderStartEvent(l()(this,un),e.meta.positionName))}},{key:"_onPositionRenderComplete",value:function(e){this.produceEvent(sn.createPositionRenderCompleteEvent(l()(this,un),e.meta.positionName,e.meta.width,e.meta.height))}},{key:"_onAdLoadComplete",value:function(e){this.produceEvent(sn.createAdLoadCompleteEvent(e.meta.positionName))}},{key:"_onAdSizeChanged",value:function(e){this.produceEvent(sn.createAdSizeChangedEvent(e.meta.positionName,e.meta.width,e.meta.height))}},{key:"_onPageLoad",value:function(e){this.produceEvent(sn.createPageLoadEvent(e.meta.timestamp))}},{key:"_onPositionCollapsed",value:function(e){this.produceEvent(sn.createPositionCollapsedEvent(e.meta.positionName))}},{key:"_onPositionConfigChanged",value:function(e){this.produceEvent(sn.createPositionConfigChangedEvent(e.meta.positionName,e.meta.config))}},{key:"history",get:function(){return l()(this,ln)}},{key:"adHistory",get:function(){return l()(this,hn)}}]),e}();Object.assign(fn.prototype,W);var dn=fn;function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O()(e);if(t){var o=O()(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return w()(this,i)}}var vn=function(e){E()(i,e);var t=pn(i);function i(e,n){var r;return o()(this,i),(r=t.call(this,e)).meta=n,r}return i}(T);c()(vn,"COUNTER","".concat("Collector",".COUNTER")),c()(vn,"DURATION","".concat("Collector",".DURATION"));var mn="JacLoadDelay",gn="FetchDelay",En="FetchNetworkDuration",yn="PositionFetchDuration",wn="PositionRenderDelay",_n="PositionRenderDuration",On="AdLoadDuration",Tn="PositionFetchErrorCount";function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"".concat(e,"_").concat(JSON.stringify(t)):e}var bn=new WeakMap,Dn=new WeakMap,Rn=new WeakMap,Pn=new WeakMap,kn=new WeakMap,An=new WeakMap,Cn=new WeakMap,In=new WeakMap,Nn=function(){function e(t,i){o()(this,e),bn.set(this,{writable:!0,value:void 0}),Dn.set(this,{writable:!0,value:void 0}),Rn.set(this,{writable:!0,value:{}}),Pn.set(this,{writable:!0,value:{}}),kn.set(this,{writable:!0,value:{}}),An.set(this,{writable:!0,value:void 0}),Cn.set(this,{writable:!0,value:void 0}),In.set(this,{writable:!0,value:void 0}),f()(this,bn,t),f()(this,Dn,i||new rn),f()(this,An,l()(this,Dn).networkType),f()(this,Cn,l()(this,Dn).responseEnd)}return s()(e,[{key:"start",value:function(){var e=l()(this,bn);e._jill.on(qe.FETCH_START,this._onFetchStart,this),e._jill.on(qe.FETCH_COMPLETE,this._onJillFetchComplete,this),e.on(vi.FETCH_COMPLETE,this._onFetchComplete,this),e.on(vi.POSITION_RENDER_START,this._onPositionRenderStart,this),e.on(vi.POSITION_RENDER_COMPLETE,this._onPositionRenderComplete,this),e.on(vi.AD_LOAD_COMPLETE,this._onAdLoadComplete,this),e.on(vi.FETCH_ERROR,this._onFetchError,this);var t={networkType:l()(this,An)};this.markDurationStart(mn,t,l()(this,Cn)),f()(this,In,(new Date).getTime()),this.markDurationEnd(mn,t,l()(this,In))}},{key:"stop",value:function(){var e=l()(this,bn);e._jill.off(qe.FETCH_START,this._onFetchStart,this),e._jill.off(qe.FETCH_COMPLETE,this._onJillFetchComplete,this),e.off(vi.FETCH_COMPLETE,this._onFetchComplete,this),e.off(vi.POSITION_RENDER_START,this._onPositionRenderStart,this),e.off(vi.POSITION_RENDER_COMPLETE,this._onPositionRenderComplete,this),e.off(vi.AD_LOAD_COMPLETE,this._onAdLoadComplete,this),e.off(vi.FETCH_ERROR,this._onFetchError,this)}},{key:"flush",value:function(){f()(this,Pn,{}),f()(this,kn,{})}},{key:"markDurationStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i=i||(new Date).getTime();var n=Sn(e,t);l()(this,Rn)[n]&&console.warn("".concat(n," duration metric already started.")),l()(this,Rn)[n]={name:e,startTime:i,dimensions:t}}},{key:"markDurationEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i=i||(new Date).getTime();var n=Sn(e,t);if(l()(this,Rn)[n]){var o=l()(this,Rn)[n];o.endTime=i,o.duration=parseFloat((o.endTime-o.startTime).toFixed(2)),l()(this,Pn)[n]=l()(this,Pn)[n]||[],l()(this,Pn)[n].push(o),delete l()(this,Rn)[n],this._notifyMetricEvent(new vn(vn.DURATION,o))}else console.error("".concat(n," duration metric not started."))}},{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=Sn(e,t),n=l()(this,kn)[i]=l()(this,kn)[i]||{name:e,count:0,dimensions:t};n.count++,this._notifyMetricEvent(new vn(vn.COUNTER,n))}},{key:"_onFetchStart",value:function(e){var t=this,i=Object.keys(e.meta.request.positions),n=l()(this,An);l()(this,Pn)[gn]||(this.markDurationStart(gn,{networkType:n},l()(this,In)),this.markDurationEnd(gn,{networkType:n})),i.forEach((function(e){t.markDurationStart(yn,{positionName:e,networkType:n})}))}},{key:"_onJillFetchComplete",value:function(e){var t=e.meta.url,i=l()(this,Dn).getFetchResourceTiming(t);if(i&&i.duration){var n=l()(this,An);this.markDurationStart(En,{networkType:n},i.startTime),this.markDurationEnd(En,{networkType:n},i.responseEnd)}}},{key:"_onFetchComplete",value:function(e){var t=this,i=e.meta.positionNames,n=l()(this,An);i.forEach((function(e){t.markDurationEnd(yn,{positionName:e,networkType:n}),t.markDurationStart(wn,{positionName:e,networkType:n})}))}},{key:"_onPositionRenderStart",value:function(e){var t=e.meta.positionName,i=l()(this,An),n=Sn(wn,{positionName:t,networkType:i});l()(this,Rn)[n]&&this.markDurationEnd(wn,{positionName:t,networkType:i}),this.markDurationStart(_n,{positionName:t,networkType:i})}},{key:"_onPositionRenderComplete",value:function(e){var t=e.meta.positionName,i=l()(this,An);this.markDurationEnd(_n,{positionName:t,networkType:i}),this.markDurationStart(On,{positionName:t,networkType:i})}},{key:"_onAdLoadComplete",value:function(e){var t=e.meta.positionName,i=l()(this,An);this.markDurationEnd(On,{positionName:t,networkType:i})}},{key:"_onFetchError",value:function(e){var t=this;e.meta.positionNames.forEach((function(e){t.incrementCounter(Tn,{positionName:e})}))}},{key:"_notifyMetricEvent",value:function(e){var t=this;setTimeout((function(){t.trigger(e)}),0)}},{key:"durations",get:function(){var e=this;return Object.keys(l()(this,Pn)).reduce((function(t,i){return t.concat(l()(e,Pn)[i])}),[])}},{key:"counters",get:function(){var e=this;return Object.keys(l()(this,kn)).map((function(t){return l()(e,kn)[t]}))}}]),e}();function Mn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ln(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Mn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}Object.assign(Nn.prototype,W);var Fn="undefined"!=typeof $JAC_METRICS_QUEUE_DELAY$?$JAC_METRICS_QUEUE_DELAY$:5e3,jn=new WeakMap,xn=new WeakMap,Un=new WeakMap,Gn=new WeakMap,Wn=new WeakMap,Hn=new WeakMap,Vn=new WeakMap,zn=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;o()(this,e),jn.set(this,{writable:!0,value:void 0}),xn.set(this,{writable:!0,value:void 0}),Un.set(this,{writable:!0,value:void 0}),Gn.set(this,{writable:!0,value:{}}),Wn.set(this,{writable:!0,value:!1}),Hn.set(this,{writable:!0,value:void 0}),Vn.set(this,{writable:!0,value:void 0}),f()(this,jn,t);var r=n.JAC_CONFIG||{},s=r.service&&r.service.host,a=r.service&&r.service.site&&r.service.site.name;this.setGlobalTags({siteName:a}),this.setMetricsHost(s||"https://jill.fc.yahoo.com/"),f()(this,Un,i.version),f()(this,Vn,n)}return s()(e,[{key:"activate",value:function(){var e=this;l()(this,Hn)||(l()(this,jn).on(vn.COUNTER,this._enqueueReport,this),l()(this,jn).on(vn.DURATION,this._enqueueReport,this),f()(this,Hn,(function(){return e.report()})),l()(this,Vn).addEventListener("unload",l()(this,Hn)))}},{key:"deactivate",value:function(){l()(this,Hn)&&(l()(this,jn).off(vn.COUNTER,this._enqueueReport,this),l()(this,jn).off(vn.DURATION,this._enqueueReport,this),l()(this,Vn).removeEventListener("unload",l()(this,Hn)),f()(this,Hn,null))}},{key:"setGlobalTags",value:function(e){var t=e.siteName;f()(this,Gn,Ln(Ln({},l()(this,Gn)),{},{siteName:t}))}},{key:"setMetricsHost",value:function(e){f()(this,xn,"".concat(e).concat("v1/client/m"))}},{key:"report",value:function(){var e=l()(this,jn).durations.map((function(e){return{type:"duration",value:e.duration,name:e.name,tags:e.dimensions||void 0}})),t=l()(this,jn).counters.map((function(e){return{type:"count",value:e.count,name:e.name,tags:e.dimensions||void 0}})),i=e.concat(t);if(!(i.length<=0)){var n=JSON.stringify({jacVersion:l()(this,Un),tags:l()(this,Gn)||void 0,metrics:i});"function"==typeof l()(this,Vn).navigator.sendBeacon?l()(this,Vn).navigator.sendBeacon(l()(this,xn),n):(new(l()(this,Vn).Image)).src="".concat(l()(this,xn),"?data=").concat(encodeURIComponent(n)),l()(this,jn).flush()}}},{key:"_enqueueReport",value:function(){var e=this;l()(this,Wn)||(f()(this,Wn,!0),setTimeout((function(){e.report(),f()(e,Wn,!1)}),Fn))}},{key:"jacVersion",get:function(){return l()(this,Un)}},{key:"collector",get:function(){return l()(this,jn)}},{key:"globalTags",get:function(){return l()(this,Gn)}},{key:"beaconUrl",get:function(){return l()(this,xn)}}]),e}();Object.assign(zn.prototype,W);var Jn=new WeakMap,Bn=function(){function e(){o()(this,e),c()(this,"collector",void 0),c()(this,"reporter",void 0),Jn.set(this,{writable:!0,value:void 0})}return s()(e,[{key:"init",value:function(e){this.collector=new Nn(e),this.reporter=new zn(this.collector,e),this.collector.start()}},{key:"processJillMetricFlag",value:function(e){void 0===l()(this,Jn)&&(f()(this,Jn,!1!==e),this.reporter&&l()(this,Jn)&&this.reporter.activate(),this.collector&&!l()(this,Jn)&&this.collector.stop())}},{key:"configUpdated",value:function(e){var t=e.service.site&&e.service.site.name;this.reporter.setGlobalTags({siteName:t}),e.service.host&&this.reporter.setMetricsHost(e.service.host)}}]),e}();function Zn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function qn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Zn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Yn=window.JAC_BASE_URL||"https://jac.yahoosandbox.com",Xn=P()("0.1.6")!==M?"0.1.6":"0.0.0",Kn={},Qn=new tt(Xn),$n=new X,eo=new fi($n,window),to=ki.getInstance(),io=new Xi,no=new dn,oo=new Bn;function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn;return"".concat(e,"/").concat(vo.version)}function so(e){return P()(e)===N?document.getElementById(e):(console.error("Support for targetElement as HTML element is not supported yet, use ID instead."),null)}function ao(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(P()(e)!==N)return console.warn("Non-string positionName found that is ignored: ".concat(e,".")),!1;if(!t||!t.client||!t.service&&!vo.config.service.positions[e])return console.warn("Invalid position config for position ".concat(e,".")),!1;if(n&&!Kn[e])return console.warn("No ad data for position ".concat(e,".")),!1;var o=t.client.targetElement;return o?!(i&&!so(o))||(console.warn("Target HTML element not found for position ".concat(e,".")),!1):(console.warn("No target HTML element configured for position ".concat(e,".")),!1)}function co(e){return e?!!e.isServiceConfigValid()||(console.warn("JAC Config has missing/invalid information."),!1):(console.warn("JAC Config has not been set."),!1)}function uo(e,t){var i=e.filter((function(e){return P()(e)===N&&t[e]})),n=e.filter((function(e){return-1===i.indexOf(e)}));return 0===i.length&&console.warn("Fetch aborted because there are no valid positions."),n.length>0&&console.warn("The following positions were ignored",n),i}function lo(e){to.resolved?e():(to.on(yi.RESOLVED,e),to.on(yi.READ_TIMEOUT,e),to.on(yi.API_NOT_FOUND,e))}function ho(e){lo((function(){!function(e){io.resolved?e():(io.on(Bi.RESOLVED,e),io.on(Bi.TIMEOUT,e))}(e)}))}function fo(e,t){ho((function(){vo.trigger(new vi(vi.FETCH_START,{positionNames:e})),Qn.fetchAds(e,t)}))}function po(e){vo.trigger(new vi(vi.POSITION_CONFIG_CHANGED,{positionName:e.target.name,config:e.meta}))}var vo={_jill:Qn,_scheduler:eo,_adData:Kn,_positions:{},_positionComponents:{},_pageObserver:$n,_userRegulations:to,_userIdentity:io,_inspectHandler:no,_renderingPositionNames:[],_remainingRenderingPositionsMap:{},config:null,get version(){return Xn},setConfig:function(e){var t=this,i=e;this.config=new Be(e);var n=i.service&&i.service.user?i.service.user.regs:void 0;to.resolve(window,n),to.resolved&&go(),io.resolved&&Eo();var o=this.config.service.positions,r=this.config.client.positions,s=[],a=[];r&&(e=Be.applyDefaultPosition(e),Object.keys(this._positions).filter((function(e){return!r[e]})).forEach((function(e){return t.destroyPosition(e)})),Object.keys(r).forEach((function(i){var n={service:e.service&&e.service.positions?e.service.positions[i]:{},client:e.client.positions[i]},c=o&&o[i],u=t._createPosition(i,{service:c||{},client:r[i]},n);Kn[i]?u.config.client.render.auto&&t._pageObserver.domLoaded&&a.push(i):u&&u.config.client.fetch.auto&&s.push(i)})));oo.configUpdated(this.config),function(e){if(e.client&&j.isFunction(e.client.onReady)){var t=e.client.onReady;try{t()}catch(e){console.error("Error while calling JAC_CONFIG.onReady():",e)}}}(i),s.length>0&&this.fetch(s),a.length>0&&this.render(a)},getConfig:function(){return this.config?this.config.clone():void 0},processQueue:function(){Qn.process()},createPosition:function(e,t){var i=this._createPosition(e,t),n=i?i.config.client:void 0;Kn[e]?n.render.auto&&this._pageObserver.pageLoaded&&this.render([e]):n&&n.fetch.auto&&this.fetch([e])},_createPosition:function(e,t,i){if(this.config){if(ao(e,t)){this._positions[e]?this._positions[e].update(t):(this._positions[e]=new ct(e,t),this._positions[e].inputConfig=i||t,this._positions[e].on(ot.CONFIG_UPDATE,po),this.trigger(new vi(vi.POSITION_CREATED,{positionName:e})),this._positions[e].config.client.features.rotation.enabled&&eo.schedule(this._positions[e]));var n=this._positions[e].config;if(t.service&&(this.config.service.positions[e]=Object.assign({},n.service)),t.client&&(this.config.client.positions[e]=Object.assign({},n.client)),n.client.content&&n.client.content.markup){var o=n.client.content;Kn[e]={status:Oe,content:{markup:o.markup,size:qn(qn({},o.size),{},{unit:_e})},config:n,clientBaseUrl:ro()}}return this._positions[e]}}else console.warn("JAC Config has not been set.")},_createPositionComponent:function(e){var t=this,i=e.name,n=so(e.config.client.targetElement),o=document.createElement("div");o.id="jacPosition_".concat(i),n.appendChild(o);var r=new oi(e,o,this._pageObserver),s={positionName:i};return r.on(lt.RENDER_START,(function(){t.trigger(new vi(vi.POSITION_RENDER_START,s))})),r.on(lt.RENDER_COMPLETE,(function(i){var n=Object.assign(s,i.meta);t.trigger(new vi(vi.POSITION_RENDER_COMPLETE,n)),function(e){vo._remainingRenderingPositionsMap[e]&&(delete vo._remainingRenderingPositionsMap[e],Object.keys(vo._remainingRenderingPositionsMap).length<=0&&vo.trigger(new vi(vi.RENDER_COMPLETE,{positionNames:vo._renderingPositionNames})))}(e.name)})),r.on(lt.VIEW_START,(function(){t.trigger(new vi(vi.POSITION_VIEW_START,s))})),r.on(lt.VIEW_END,(function(){t.trigger(new vi(vi.POSITION_VIEW_END,s))})),r.on(lt.AD_LOAD,(function(){t.trigger(new vi(vi.AD_LOAD_COMPLETE,s))})),r.on(lt.NO_AD,(function(){t.trigger(new vi(vi.POSITION_COLLAPSED,s))})),r.on(lt.AD_SIZE_CHANGED,(function(e){var i=Object.assign(s,e.meta);t.trigger(new vi(vi.AD_SIZE_CHANGED,i))})),r.on(lt.DESTROY,(function(){eo.unsubscribe(r),delete t._positionComponents[i]})),r.on(lt.AD_MESSAGE,(function(e){t.trigger(new vi(vi.AD_MESSAGE,{positionName:i,message:e.meta}))})),eo.subscribe(r),r},destroyPosition:function(e){var t=this._positionComponents[e];t&&t.destroy();var i=this._positions[e];i&&(this._positions[e].off(ot.CONFIG_UPDATE,po),eo.isManagedPosition(e)&&eo.remove(i),delete this._positions[e]),delete vo._remainingRenderingPositionsMap[e],vo._renderingPositionNames=vo._renderingPositionNames.filter((function(t){return t!==e}))},fetch:function(e){var t=this;if(co(this.config))if(j.isSet(e)||(e=Object.keys(this._positions)),Array.isArray(e)&&0!==e.length){var i=uo(e,this._positions);if(i.length>0)i.filter((function(e){return eo.isManagedPosition(e)})).forEach((function(e){t._positions[e].update({service:vo.config.service.positions[e],client:vo.config.client.positions[e]}),eo.restart(t._positions[e],t._positionComponents[e])})),fo(i,this.config)}else console.warn("First argument for JAC.fetch() should be an array of position names")},fetchGroup:function(e){if(co(this.config))if(P()(e)===N&&this.config.service.groups[e]){var t=uo(this.config.service.groups[e].positions,this.config,this._positions);t.length>0&&function(e,t,i){ho((function(){vo.trigger(new vi(vi.FETCH_START,{positionNames:t})),Qn.fetchGroupPositions(e,t,i)}))}(e,t,this.config.service)}else console.warn("groupName can not be found")},render:function(e){var t=this;if(j.isSet(e)||(e=Object.keys(Kn)),Array.isArray(e)&&0!==e.length){var i=[];this.trigger(new vi(vi.RENDER_START,{positionNames:e})),this._renderingPositionNames=e,this._remainingRenderingPositionsMap={},e.forEach((function(e){t._remainingRenderingPositionsMap[e]=!0;var n=t._positions[e];ao(e,n?n.config:null,!0,!0)&&n?(t._positionComponents[e]||(t._positionComponents[e]=t._createPositionComponent(n)),t._positionComponents[e].render(Kn[e]),delete Kn[e]):i.push(e)})),i.length>0&&console.warn("The following positions were ignored "+i)}else console.warn("First argument for JAC.render() should be an array of position names.")},updateMeta:function(e,t,i,n){var o=this;if(Array.isArray(e)&&0!==e.length)if(!t||j.isString(t)&&!i)console.warn("Invalid meta was provided.");else{var r=[];e.forEach((function(e){o._positionComponents[e]?o.config.updateMeta(e,t,i,n)&&o._positionComponents[e].updateMeta():r.push(e)})),r.length>0&&console.warn("The following positions were ignored from the message execution "+r)}else console.warn("First argument for JAC.updateMeta() should be an array of position names.")}};function mo(e){var t=e.filter((function(e){var t=vo._positions[e];return t&&t.config&&t.config.client.render.auto}));t.length>0&&vo.render(t)}function go(){vo.config.setRegulatoryData(to),io.resolve(vo.config)}function Eo(){vo.config.setUserIdentity(io)}Object.assign(vo,W);var yo=vo;Object.assign(yo,{PageObserver:X,PageEvent:b}),window!==window.top&&"undefined"==typeof JAC_CONFIG?function(e){var t=function(e){var t,i,n,o=e.name;if(!o)throw Error("No data provided for the position sandbox.");e.name="";try{e.frameElement.removeAttribute("name")}catch(e){}try{var r=JSON.parse(o);t=r.token,i=r.adData,n=r.safeFrame}catch(e){throw Error("Invalid data provided for the position sandbox.")}if(!t)throw Error("Missing sandbox token.");if(!i||!i.content)throw Error("Missing sandbox ad data.");if(!i.content.markup)throw Error("Missing sandbox ad markup.");if(!i.content.size||!i.content.size.width||!i.content.size.height)throw Error("Missing sandbox ad size.");if(!i.config||!i.config.service||!i.config.client)throw Error("Missing sandbox position config.");var s=i.config.service.sizes,a=s?s.map((function(e){var t=e.split("x"),i=Q()(t,2),n=i[0],o=i[1];return{width:parseInt(n),height:parseInt(o)}})):[],c=i.status!==Te&&!ce.isMobileMomentAd(i)&&(!i.meta||!i.meta.aolSize)&&a.length>1;return{token:t,adMarkup:i.content.markup,size:i.content.size,detectSize:c,allowedSizes:a,positionConfig:i.config,safeFrameData:n}}(e),i=t.token,n=t.adMarkup,o=t.size,r=t.detectSize,s=t.allowedSizes,a=t.positionConfig,c=t.safeFrameData;!function(e,t){me=new ae(t.top,e)}(i,e),function(e,t){e.JAC={version:P()("0.1.6")!==M?"0.1.6":"0.0.0",sandbox:new he(me,t)}}(e,a);var u=a.client.features.safeFrame;u&&u.enabled&&function(e,t,i){me.listen(),e.$sf={ext:new Ee(me,t,i)},e.Y={SandBox:{vendor:new ye(me)}}}(e,a,c),function(e){if("complete"===document.readyState)return e();if(void 0!==window.addEventListener)window.addEventListener("load",e,!1);else if(void 0!==document.addEventListener)document.addEventListener("load",e,!1);else if(void 0!==window.attachEvent)window.attachEvent("onload",e);else if("function"==typeof window.onload){var t=window.onload;window.onload=function(){t(),e()}}else window.onload=e}((function(){return Pe({detectSize:r,initialWidth:o.width,initialHeight:o.height,allowedSizes:s})})),function(e,t){e.document.write("<div>".concat(t,"</div>"))}(e,n),me.send(new $({topic:$.topic.WRITE_COMPLETE}))}(window):(window.JAC=yo,function(e){Qn.on(qe.RESPONSE_PROCESSED,(function(e){var t=e.meta.response;oo.processJillMetricFlag(t.client.metrics);var i=t.adServerResponse.positions,n=Object.keys(i);n.forEach((function(e){var n=i[e],o=vo._positions[e];if(o){if(n.config=o.config,n.clientBaseUrl=ro(t.client.url),n.meta=n.meta||{},n.meta.isMobileMoment=ce.isMobileMomentAd(n),vo._adData[e]=n,!o.rotated&&o.config.client.features.rotation.enabled){var r=new He(o,n).createNewPositionRotationConfig(vo.config.service.adServer);o.updateRotationConfig(r)&&eo.update(o)}}else console.warn("Response for a non-existing position ".concat(e," processed."))})),vo.trigger(new vi(vi.FETCH_COMPLETE,{positionNames:n,response:{positions:i}})),$n.domLoaded&&mo(n)})),Qn.on(qe.FETCH_TIMEOUT,(function(e){var t=e.meta.positionNames;t.forEach((function(e){vo._positions[e]?vo._adData[e]={status:Te,content:{},clientBaseUrl:ro()}:console.warn("Timeout for a non-existing position ".concat(e," received."))})),$n.domLoaded&&mo(t),vo.trigger(new vi(vi.FETCH_TIMEOUT,e.meta))})),Qn.on(qe.FETCH_ERROR,(function(e){vo.trigger(new vi(vi.FETCH_ERROR,e.meta))})),eo.on(si.ROTATION,(function(e){var t=vo.config.service,i=e.meta.positionName,n=vo._positions[e.meta.positionName],o=e.meta.size;if(!n.rotated){n.rotated=!0;var r=new He(n,vo._positionComponents[i].adData);n.alias=r.getRotationAdSizeAlias(e.meta.size)}t=vo.config.createNextRotationConfig(n,o),vo.trigger(new vi(vi.POSITION_ROTATE,{positionName:i})),fo([i],{service:t,client:vo.config.client})})),to.on(yi.API_NOT_FOUND,go),to.on(yi.RESOLVED,go),to.on(yi.READ_TIMEOUT,go),to.on(yi.UPDATED,go),io.on(Bi.RESOLVED,Eo),io.on(Bi.TIMEOUT,Eo),io.on(Bi.UPDATED,Eo),no.activate(e,vo),oo.init(vo),function(e){e.JAC_CONFIG&&vo.setConfig(e.JAC_CONFIG)}(e),vo.processQueue(),He.init(e),$n.on(b.DOM_LOADED,(function(){mo(Object.keys(vo._adData)),!vo.config||vo.config.client.trackers.opus?lo((function(){return function(e){var t=to.data.GDPR,i=to.data.CCPA,n=Ae.removeParameters(e.document.referrer),o="".concat("https://opus.analytics.yahoo.com/tag/opus-frame.html?id=3")+"&gdpr=".concat(null===t.applies?"":t.applies)+"&gdpr_consent=".concat(t.euconsent)+"&us_privacy=".concat(i.usPrivacy)+"&referrer=".concat(encodeURIComponent(n));m.injectTrackingPixel(o,e)}(e)})):vo.config&&vo.config.client.trackers.smartPixel&&function(e){var t=Ae.removeParameters(e.document.referrer),i="".concat("https://tag.idsync.analytics.yahoo.com/sp-frame.html")+"?referrer=".concat(encodeURIComponent(t));m.injectTrackingPixel(i,e)}(e),vo.config&&vo.config.client.trackers.msftSync&&((new Image).src="https://cms.analytics.yahoo.com/cms?partner_id=MSFT")}))}(window))}]);
//# sourceMappingURL=jac.js.map