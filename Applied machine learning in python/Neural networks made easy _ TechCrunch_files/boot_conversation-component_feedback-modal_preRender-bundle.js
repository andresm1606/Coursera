(window.webpackJsonp_spotim_580132258=window.webpackJsonp_spotim_580132258||[]).push([[6],{108:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SortBy=void 0,t.SortBy=r,function(e){e.BEST="best",e.NEWEST="newest",e.OLDEST="oldest",e.SOCIAL="social"}(r||(t.SortBy=r={}))},112:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return(0,a.default)({},t.payload,(0,a.default)({},"Overall",{count:0}));case d:return(0,o.default)(e,(function(e){var n=t.payload,r=n.conversationId,a=n.messagesTyping,o=n.currentUserId;e[r]={NewComment:{count:0,users:{}}};var s=0;(0,i.default)(a,(function(t){var n=t.messageId||"NewComment";if(e[r][n]={count:t.count,users:{}},(0,i.default)(t.users,(function(t){var a=t.user_id;o===a&&(e[r][n].count-=1,s++)})),e[r][n].count>0){var a=f(t.users,o);a&&(e[r][n].users[a.user_id]={imageId:a.image_id})}})),e[r].Overall.count-=s}));default:return e}},t.startTyping=function(e,t,n){return{type:d,payload:{conversationId:e,messagesTyping:t,currentUserId:n}}},t.getTypingsCount=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Overall",n=(0,s.default)(e,'typingUsers["'.concat(e.conversation.id,'"]["').concat(t,'"]'),{});return n.count||0},t.getTypingStateOfUsers=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NewComment";if(!l(e,t))return[];return E(e,t)},t.isConversationIdExistsInTypingUsers=l,t.getUsersFromMessages=E,t.initializeTyping=function(e){return{type:c,payload:e}},t.getNumberOfTypingUsers=function(e){return e.typingUsers[e.conversation.id].Overall.count},t.TYPING_DELAY=void 0;var a=r(n(33)),o=r(n(21)),i=r(n(538)),s=r(n(109)),u=r(n(550)),c="typing-modules/INIT",d="typing-module/SET";t.TYPING_DELAY=15e3;function l(e,t){return(0,u.default)(e,"conversation")&&(0,u.default)(e,'typingUsers["'.concat(e.conversation.id,'"]["').concat(t,'"]'))}function E(e,t){var n=[],r=(0,s.default)(e,"conversation.id"),a=(0,s.default)(e,"typingUsers[".concat(r,"]")),o=[];return(0,i.default)(a,(function(e,r){"NewComment"!==t&&t!==r||(0,i.default)(e.users,(function(e,t){e&&-1===n.indexOf(t)&&(o.push({id:t,imageId:e.imageId}),n.push(t))}))})),o}function f(e,t){var n=e.pop();return n&&n.user_id===t&&(n=e.pop()),n}},114:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,i.default)(o.default.mark((function t(n,r){var a,i,l,E,O,p,g,T,v;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f.metrics.apm.start("show_more_replies"),n({type:"GET_REPLIES_START",payload:{parentMessageId:e}}),a=r(),i=a.comments.list,l=a.conversation,E=a.currentUser,O=u.findByMessageId(i,e),p=s.getChildrenStackIds(O).map((function(e){return u.findByStackId(i,e)})).map((function(e){return e&&s.getMessage(e)})).filter((function(e){return e.isMine&&e.isNew})).length,t.next=8,d.fetchCommentReplies(l.postId,e,O.message.offset,c.REPLIES_PAGE_SIZE+p);case 8:g=t.sent,T=S(g.conversation,l,E),v=_(g),n({type:"GET_REPLIES_END",payload:{comments:T,parentMessage:O.message,conversation:v.conversation}}),f.metrics.apm.end("show_more_replies"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),f.metrics.error("getReplies",t.t0),n({type:"GET_REPLIES_END_ERROR",payload:{error:t.t0},error:!0});case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,n){return t.apply(this,arguments)}}()},t.parseConversation=_,t.GET_REPLIES_END_ERROR=t.GET_REPLIES_END=t.GET_REPLIES_START=void 0;var o=a(n(37)),i=a(n(38)),s=r(n(89)),u=r(n(96)),c=n(97),d=r(n(201)),l=n(116),E=n(158),f=n(3);t.GET_REPLIES_START="GET_REPLIES_START";t.GET_REPLIES_END="GET_REPLIES_END";function _(e){return{conversation:{hasNext:e.conversation.has_next,offset:e.conversation.offset}}}function S(e,t,n){var r=(0,l.parseMessage)(t.id,{comments:(0,E.flatComments)(e.comments),users:e.users}).comments,a={};if(n&&n.messagesVoted)for(var o in a=n.messagesVoted)if(a.hasOwnProperty(o)){var i=a[o];a[o]={isVotedUp:1===i,isVotedDown:-1===i}}return r}t.GET_REPLIES_END_ERROR="GET_REPLIES_END_ERROR"},116:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyMessage=c,t.upgradeDeprecated=d,t.parseMessage=function(e,t){var n=s.default.map(t,{comments:(0,u.getMessagesMap)("comments",{parent_id:"parentMessageId",root_comment:"rootMessageId",has_next:"hasNext","rank.ranked_by_current_user":"meVote","rank.ranks_down":"downVotesCount","rank.ranks_up":"upVotesCount",index:"index"})}).comments,r=void 0===n?[]:n,o=[],l={};return Object.keys(t.users).forEach((function(e){var n=Object.assign(t.users[e],{id:e}),r=(0,i.parseUser)(n);o.push(r),l[r.id]=r})),r.filter((function(e){return!c(e)})).forEach((function(t){d(t),t.conversationId=e,(0,a.linkUsersToMessage)(t,l),t.user||(t.user={id:t.userId}),t.isVotedUp=1===t.meVote,t.isVotedDown=-1===t.meVote,delete t.meVote,t.upVotesCount||(t.upVotesCount=0),t.downVotesCount||(t.downVotesCount=0)})),{comments:r,usersList:o}};var a=n(302),o=n(51),i=n(78),s=r(n(83)),u=n(157);function c(e){return!e.entities||0===e.entities.length||e.entities[0].type===o.entityTypes.TEXT&&""===e.entities[0].text&&1===e.entities.length}function d(e){e.entities[0].hasOwnProperty("text")&&(e.entities[0].text=e.entities[0].text.replace(/{{um:([^{}]*)}}/gm,'<span data-mention="$1,,"></span>'))}},117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initDisqusLogin=t.onLogout=t.openSignUpModal=t.openLoginModal=t.openRegistrationModal=void 0;var r=n(3);t.openRegistrationModal=function(e){try{window.__SPOTIM__.initApp("registration",e)}catch(t){r.metrics.error("openRegistrationModal",t,{mode:e.mode})}};t.openLoginModal=function(){try{window.__SPOTIM__.initApp("registration",{mode:"signin"})}catch(e){r.metrics.error("openLoginModal",e)}};t.openSignUpModal=function(){try{window.__SPOTIM__.initApp("registration",{mode:"signup"})}catch(e){r.metrics.error("openSignUpModal",e)}};t.onLogout=function(){try{window.__SPOTIM__.initApp("registration",{mode:"logout"})}catch(e){r.metrics.error("onLogout",e)}};t.initDisqusLogin=function(){try{window.__SPOTIM__.initApp("registration",{mode:"init-disqus-login"})}catch(e){r.metrics.error("initDisqusLogin",e)}}},118:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.setCommunityView=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r){var o=r().moduleOptions.postId,u=(0,i.default)(o);n({type:a.SET_COMMUNITY_VIEW,payload:e}),u.changeObervingModuleOn(e),t&&s(e)}},t.setIsFocusSayControl=function(e){return{type:a.SET_FOCUS_SAY_CONTROL,payload:e}},t.setScrollToHeader=function(e){return{type:a.SCROLL_TO_HEADER,payload:e}};var a=n(39),o=n(219),i=r(n(361));function s(e){try{localStorage.setItem(o.LAST_COMMUNITY_VIEW_KEY,e)}catch(e){}}},127:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.getPageInfo=function(e){return{offset:e.order.length,count:10,hasNext:e.order.length<e.totalCount}},t.hasNext=function(e){return e.order.length<e.totalCount},t.isEmpty=function(e){return 0===e.order.length},t.default=t.NotificationType=void 0;var o,i,s=r(n(33)),u=n(19),c=r(n(21)),d=a(n(94)),l=n(152);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.NotificationType=i,function(e){e.LIKED_MESSAGE="liked-message",e.REPLIED_YOUR_MESSAGE="replied-your-message",e.ALSO_REPLIED="also-replied",e.MENTION="user-mentioned"}(i||(t.NotificationType=i={}));var S={items:{},order:[],isLoading:!1,unseenCount:0,unreadCount:0,totalCount:0,isLoaded:!1},O=(0,u.handleActions)((o={},(0,s.default)(o,d.SET_IS_LOADED,(0,c.default)((function(e,t){t.payload.isLoaded||Object.assign(e,S),e.isLoaded=t.payload.isLoaded}))),(0,s.default)(o,d.GET_START,(0,c.default)((function(e){e.isLoading=!0}))),(0,s.default)(o,d.GET_END,(0,c.default)((function(e,t){var n=t.payload,r=n.unseenCount,a=n.unreadCount,o=n.totalCount,i=n.notifications,s=void 0===i?[]:i,u=n.reset,c=void 0!==u&&u,d=n.offset,l=void 0===d?0:d;c&&Object.assign(e,S),null!=r&&(e.unseenCount=r),null!=a&&(e.unreadCount=a),null!=o&&(e.totalCount=o),e.isLoading=!1,0===l&&s.reverse();var E,_=f(s);try{for(_.s();!(E=_.n()).done;){var O=E.value;e.items[O.id]||(0===l?e.order.unshift(O.id):e.order.push(O.id)),e.items[O.id]=p(O)}}catch(e){_.e(e)}finally{_.f()}}))),(0,s.default)(o,d.MARK_ALL_READ,(0,c.default)((function(e){for(var t=0,n=Object.values(e.items);t<n.length;t++){n[t].read=!0}}))),(0,s.default)(o,d.MARK_AS_READ,(0,c.default)((function(e,t){var n=t.payload.id,r=e.items[n];r&&(r.read=!0)}))),(0,s.default)(o,d.SET_UNSEEN_NOTIFICATION_COUNT,(0,c.default)((function(e,t){var n=t.payload.unseenNotificationsCount;e.unseenCount=n}))),o),S);t.default=O;function p(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({read:!1,updatedAt:new Date,conversationId:void 0,conversationUrl:void 0,conversationTitle:void 0,spotId:void 0,userId:void 0,messageId:void 0,users:{},message:void 0,totalCount:0},e);return t.users=(0,l.parseUsers)(e.users),t}},129:function(e,t,n){"use strict";function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function a(){var e=r;return e()+e()+e()+e()+e()+e()+e()+e()}Object.defineProperty(t,"__esModule",{value:!0}),t.shortGuid=r,t.guid=a,t.default=void 0;var o=a;t.default=o},132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageStatus=t.HIGHLIGHT=t.PENDING=t.BLOCKED=t.APPROVED=void 0;t.APPROVED="approved";t.BLOCKED="blocked";t.PENDING="pending";var r;t.HIGHLIGHT="highlight",t.MessageStatus=r,function(e){e.APPROVED="approved",e.BLOCKED="blocked",e.PENDING="pending"}(r||(t.MessageStatus=r={}))},133:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TPolicyTag=void 0,t.TPolicyTag=r,function(e){e.UPPERCASE="uppercase",e.IMAGE="image",e.VIDEO="video",e.EXTERNAL_LINK="external_link",e.DUPLICATION="duplication",e.PERSPECTIVE="perspective",e.BLACKLISTED="blacklisted_sender",e.SPAM="spam",e.UNSUBSTANTIAL="unsubstantial",e.SUSPENDED="suspended"}(r||(t.TPolicyTag=r={}))},134:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMessages=t.UPDATED_MESSAGES=void 0;var a=n(19),o=r(n(630)),i=r(n(660)),s=r(n(1)),u=n(132),c=r(n(344));t.UPDATED_MESSAGES="UPDATED_MESSAGES";var d=(0,a.createAction)("UPDATED_MESSAGES",(0,i.default)((0,o.default)(c.default),(0,o.default)((function(e){return s.default.get("init_data.config.policy.roger_mode",!1)&&e&&e.message&&e.message.status!==u.APPROVED?null:null==e?void 0:e.message}))));t.updateMessages=d},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REALTIME_MESSAGE_VOTE=void 0;t.REALTIME_MESSAGE_VOTE="REALTIME_MESSAGE_VOTE"},136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLICKED_SHOW_MORE_COMMENTS_EVENT_NAME=t.CLICKED_SHOW_MORE_REPLIES_EVENT_NAME=t.DISQUS_FORUM_CLAIM_EVENT_NAME=t.SPOT_IM_LOGIN_START=t.CONVERSATION_SELECTOR=t.CONVERSATION_ID=t.MODALS_SELECTOR=t.MODULE_NAME=void 0;t.MODULE_NAME="Conversation";t.MODALS_SELECTOR="#spot-im-frame-modal";t.CONVERSATION_ID="spcv_conversation";t.CONVERSATION_SELECTOR='[data-spotim-module="conversation"], [data-spot-im-module-default-area="conversation"]';t.SPOT_IM_LOGIN_START="spot-im-login-start";t.DISQUS_FORUM_CLAIM_EVENT_NAME="spot-im-forum-claim";t.CLICKED_SHOW_MORE_REPLIES_EVENT_NAME="spot-im-show-more-replies-clicked";t.CLICKED_SHOW_MORE_COMMENTS_EVENT_NAME="spot-im-show-more-comments-clicked"},152:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getUserMap=l,t.parseUser=function(e){return d(d({},(0,s.parseUser)(e)),{},{notificationsCount:e.notifications_counter,isMuted:e.is_muted,messagesVoted:e.rank})},t.parseUsers=function(e){return e&&Array.isArray(e)?e.reduce((function(e,t){return e[t.id]=(0,o.createUserObject)(t),e}),{}):e},t.getUsersMap=function(e,t){return(0,u.array)(l("",t),e)};var a=r(n(33)),o=n(269),i=n(531),s=n(20),u=n(189);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.length>0&&(e+="."),function(){return Object.assign({display_name:"".concat(e,"displayName"),id:"".concat(e,"id"),user_id:"".concat(e,"id"),image_id:"".concat(e,"imageId"),background_image_id:"".concat(e,"coverImageId"),about:"".concat(e,"about"),location:"".concat(e,"location"),language:"".concat(e,"language"),workplace:"".concat(e,"workplace"),interests:"".concat(e,"interests"),user_name:"".concat(e,"username"),online:"".concat(e,"isOnline"),points:"".concat(e,"points"),is_moderator:"".concat(e,"isModerator"),is_admin:"".concat(e,"isAdmin"),is_journalist:"".concat(e,"isJournalist"),notifications_counter:"".concat(e,"notificationsCount"),comments_count:"".concat(e,"commentsCount"),up_votes_count:"".concat(e,"upVotesCount"),up_votes_received_count:"".concat(e,"upVotesReceivedCount"),unseen_notifications_count:"".concat(e,"unseenNotificationsCount"),rank:"".concat(e,"messagesVoted"),email:"".concat(e,"email"),verified:"".concat(e,"isEmailVerified"),social:"".concat(e,"socialNetworks"),registered:"".concat(e,"isRegistered"),anonymous:"".concat(e,"isAnonymized"),spot_token:"".concat(e,"token"),"liked-message":"".concat(e,"emailNotifyLikedMessage"),"user-mentioned":"".concat(e,"emailNotifyUserMentioned"),"replied-your-message":"".concat(e,"emailNotifyRepliedYourMessage"),private_profile:"".concat(e,"isPrivate"),sso_user:"".concat(e,"isSsoUser"),is_super_admin:"".concat(e,"isSuperAdmin"),spotim_device_ticket:"".concat(e,"spotimDeviceTicket"),following:"".concat(e,"following"),actions:"".concat(e,"actions"),is_community_moderator:"".concat(e,"isCommunityModerator"),is_muted:"".concat(e,"isMuted"),network_device_ticket:"".concat(e,"networkDeviceTicket"),reputation:"".concat(e,"reputation"),sso_data:(0,i.ssoDataMap)("".concat(e,"ssoData"))},t)}}},157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageMap=o,t.getMessagesMap=function(e,t){return(0,r.array)(o("",t),e)};var r=n(189),a=n(577);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.length>0&&(e+="."),function(){return Object.assign({id:"".concat(e,"id"),type:"".concat(e,"type"),status:"".concat(e,"status"),conversation_id:"".concat(e,"conversationId"),"rank.positive":"".concat(e,"upVotesCount"),"rank.negative":"".concat(e,"downVotesCount"),"rank.+":"".concat(e,"upVotesCount"),"rank.-":"".concat(e,"downVotesCount"),"+":"".concat(e,"upVotesCount"),"-":"".concat(e,"downVotesCount"),views:"".concat(e,"viewsCount"),replies_count:"".concat(e,"repliesCount"),user_id:"".concat(e,"userId"),written_at:"".concat(e,"postedAt"),edited:"".concat(e,"isEdited"),deleted:"".concat(e,"isDeleted"),anonymous:"".concat(e,"isAnonymized"),"metadata.version":"".concat(e,"version"),"metadata.reply_to.reply_id":"".concat(e,"parentMessageId"),"metadata.reply_to.user_id":"".concat(e,"replyToUserId"),"metadata.display_name":"".concat(e,"userDisplayName"),content:(0,a.getMessageEntitiesMap)("".concat(e,"entities")),stars:"".concat(e,"starsRating"),depth:"".concat(e,"depth"),offset:"".concat(e,"offset"),reply_parent_deleted:"".concat(e,"isReplyParentDeleted"),reply_parent_id:"".concat(e,"parentMessageId"),parent_comment_id:"".concat(e,"rootMessageId"),featured:"".concat(e,"featured"),featuredComment:"".concat(e,"featuredComment"),user_display_name:"".concat(e,"userDisplayName"),published:"".concat(e,"isPublished")},t)}}},158:function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t=[];if(0===e.replies.length)return t;var n,a=r(e.replies);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.push(i),t=t.concat(o(i))}}catch(e){a.e(e)}finally{a.f()}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.flatComments=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(e){var n,a=r(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.push(i),t=t.concat(o(i))}}catch(e){a.e(e)}finally{a.f()}}return t}},159:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.updateReportedComments=function(e){return{type:s.UPDATE_REPORTED_COMMENTS,payload:{reportedComments:e}}},t.default=void 0;var a=r(n(33)),o=n(19),i=r(n(21)),s=n(39),u=(0,o.handleActions)((0,a.default)({},s.UPDATE_REPORTED_COMMENTS,(0,i.default)((function(e,t){var n=t.payload.reportedComments;n&&Object.keys(n).forEach((function(t){e[t]=!0}))}))),{});t.default=u},160:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TPolicyVerdict=void 0,t.TPolicyVerdict=r,function(e){e.APPROVE_ALL="approve_all",e.PUBLISH_AND_MODERATE="publish_and_moderate",e.REQUIRE_APPROVAL="require_approval",e.BLOCK_ALL="block_all",e.FORCE_APPROVE_ALL="force_approve_all",e.FORCE_BLOCK_ALL="force_block_all"}(r||(t.TPolicyVerdict=r={}))},166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteMessages=function(e){return function(t){t({type:"DELETE_MESSAGES",payload:{messages:e.map(r)}})}},t.DELETE_MESSAGES=void 0;function r(e){return{id:e.id}}t.DELETE_MESSAGES="DELETE_MESSAGES"},167:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.rejectMessages=function(e){return function(t){var n=e.map(o);a.default.get("init_data.config.policy.roger_mode",!1)||t({type:"REJECT_MESSAGES",payload:{messages:n}})}},t.REJECT_MESSAGES=void 0;var a=r(n(1));function o(e){return{id:e.id}}t.REJECT_MESSAGES="REJECT_MESSAGES"},168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{type:"EXPAND_AGGREGATED_MESSAGES"}},t.EXPAND_AGGREGATED_MESSAGES=void 0;t.EXPAND_AGGREGATED_MESSAGES="EXPAND_AGGREGATED_MESSAGES"},169:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,i.default)(o.default.mark((function t(n,r){var a,i,d,l,_;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r(),i=a.conversation,t.prev=1,t.next=4,c.fetchCommentReplies(i.postId,e.message.id,e.message.offset,u.REPLIES_PAGE_SIZE);case 4:d=t.sent,l=f(d,i),_=E(d),n({type:"GET_PREVIOUS_REPLIES_END",payload:{replies:l,parentMessage:e.message,conversation:_.conversation}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n({type:"GET_PREVIOUS_REPLIES_END",payload:{error:t.t0},error:!0}),s.metrics.error("getPreviousReplies",t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()},t.parseConversation=E,t.GET_PREVIOUS_REPLIES_END=void 0;var o=a(n(37)),i=a(n(38)),s=n(3),u=n(97),c=r(n(201)),d=n(116),l=n(158);function E(e){return{conversation:{hasNext:e.conversation.has_next,offset:e.conversation.offset}}}function f(e,t){return(0,d.parseMessage)(t.id,{comments:(0,l.flatComments)(e.conversation.comments),users:e.conversation.users}).comments}t.GET_PREVIOUS_REPLIES_END="GET_PREVIOUS_REPLIES_END"},170:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.setTranslationInitialized=t.setConversationStatus=t.setUserInitialized=t.setTokenInitialized=void 0;var a,o=r(n(33)),i=r(n(21)),s=n(19),u=n(39),c={isUserInitialized:!1,conversationStatus:n(64).ConversationStatus.FETCHING,isTranslationInitialize:!1,isTokenInitialized:!1},d=(0,s.createAction)(u.SET_TOKEN_INITIALIZED);t.setTokenInitialized=d;var l=(0,s.createAction)(u.SET_USER_INITIALIZED);t.setUserInitialized=l;var E=(0,s.createAction)(u.SET_CONVERSATION_STATUS);t.setConversationStatus=E;var f=(0,s.createAction)(u.SET_TRANSLATION_INITIALIZED);t.setTranslationInitialized=f;var _=(0,s.handleActions)((a={},(0,o.default)(a,u.SET_USER_INITIALIZED,(0,i.default)((function(e,t){e.isUserInitialized=t.payload.isUserInitialized}))),(0,o.default)(a,u.SET_TOKEN_INITIALIZED,(0,i.default)((function(e,t){e.isTokenInitialized=t.payload.isTokenInitialized}))),(0,o.default)(a,u.SET_CONVERSATION_STATUS,(0,i.default)((function(e,t){e.conversationStatus=t.payload.conversationStatus}))),(0,o.default)(a,u.SET_TRANSLATION_INITIALIZED,(0,i.default)((function(e,t){e.isTranslationInitialize=t.payload.isTranslationInitialize}))),a),c);t.default=_},171:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.setReadOnly=void 0;var a=r(n(33)),o=r(n(21)),i=n(19),s=n(39),u=(0,i.createAction)(s.SET_READ_ONLY_CONVERSATION);t.setReadOnly=u;var c=(0,i.handleActions)((0,a.default)({},s.SET_READ_ONLY_CONVERSATION,(0,o.default)((function(e,t){return t.payload.isReadOnly}))),!1);t.default=c},182:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessagesCountToFetch=function(){return+(a.default.get("elementOptions.messagesCount")||a.default.get("tenant_config.conversation.read_batch_size",20))};var a=r(n(1))},189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.array=function(e,t){return function(){return Object.assign(e(),{"~":t})}}},190:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatform=t.setPlatform=t.default=void 0;var a=r(n(33)),o=n(191);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLATFORM":return s(s({},e),{},{type:t.payload.platform});default:return e}};t.setPlatform=function(e){return{type:"SET_PLATFORM",payload:{platform:e}}};t.getPlatform=function(e){var t=e.platform.type;return t===o.PLATFORMS.MOBILE?o.PLATFORMS.MOBILE:t===o.PLATFORMS.DESKTOP?o.PLATFORMS.DESKTOP:t===o.PLATFORMS.TABLET?o.PLATFORMS.TABLET:void 0}},191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLATFORMS=void 0;t.PLATFORMS={MOBILE:"mobile",DESKTOP:"desktop",TABLET:"tablet"}},201:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchConversation=function(e,t,n,r,o,i,s,u,c,d){return(0,a.default)("v1.0.0/conversation/read",{method:"POST",postId:t,data:{conversation_id:n||"".concat(e,"_").concat(t),count:u,offset:i,sort_by:c,depth:d}})},t.fetchCommentReplies=function(e,t,n,r){return(0,a.default)("v1.0.0/conversation/read",{method:"POST",postId:e,data:{count:r,offset:n,parent_id:t}})};var a=r(n(58))},202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeSignupWizard=function(){return function(e){e({type:"CLOSE_SIGNUP_WIZARD"})}},t.CLOSE_SIGNUP_WIZARD=void 0;t.CLOSE_SIGNUP_WIZARD="CLOSE_SIGNUP_WIZARD"},203:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.email,n=e.spotId,r=e.url;return function(){var e=(0,o.default)(a.default.mark((function e(o){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"REQUEST_VERIFY_EMAIL",payload:{email:t,spotId:n,url:r}}),e.prev=1,e.next=4,(0,s.verifyEmailStart)({email:t,url:r,spotId:n});case 4:o({type:"RESPONSE_VERIFY_EMAIL",payload:{email:t,spotId:n,url:r}}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),o({type:"RESPONSE_VERIFY_EMAIL",payload:{error:e.t0},error:!0}),i.metrics.error("verifyEmail",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},t.RESPONSE_VERIFY_EMAIL=t.REQUEST_VERIFY_EMAIL=t.RESPONSE_VERIFY_USERNAME=t.REQUEST_VERIFY_USERNAME=void 0;var a=r(n(37)),o=r(n(38)),i=n(3),s=n(583);t.REQUEST_VERIFY_USERNAME="REQUEST_VERIFY_USERNAME";t.RESPONSE_VERIFY_USERNAME="RESPONSE_VERIFY_USERNAME";t.REQUEST_VERIFY_EMAIL="REQUEST_VERIFY_EMAIL";t.RESPONSE_VERIFY_EMAIL="RESPONSE_VERIFY_EMAIL"},217:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageStackList=h,t.getMessageStack=function(e,t){return d.findByMessageId(e.list,t)},t.wasAggregated=function(e,t){return e.transferredFromAggregatedStackIds.indexOf(t)>-1},t.getMoreCount=function(e,t){var n=l.getChildrenStackIds(t).map((function(t){return d.findByStackId(e.list,t)})).filter((function(e){return e&&!e.message.isDeleted})).length;return l.getRepliesCount(t)-n},t.getAllCount=function(e,t){var n=0,r=h(e),a=d.findByMessageId(r,l.getMessage(t).rootMessageId);a&&(n=l.getRepliesCount(a));return n},t.default=void 0;var o,i=r(n(33)),s=n(51),u=n(19),c=r(n(21)),d=a(n(96)),l=a(n(89)),E=n(97),f=n(114),_=n(169),S=n(134),O=n(135),p=n(166),g=n(168),T=n(39),v=n(202),A=n(63),m=r(n(665)),I=r(n(346)),y=n(90),R=n(167),M=n(347);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={list:d.createMessagesStackListObject(),transferredFromAggregatedStackIds:[],loading:!1,loadingFromShowMore:!1,pagination:(0,M.createPaginationObject)(),scrollTo:!1,isPostCommentActionEnabled:!1},P=(0,u.handleActions)((o={},(0,i.default)(o,T.INITIALIZE_CONVERSATION,(0,c.default)((function(e,t){var n=t.payload,r=n.pagination,a=n.scrollToComments,o=void 0!==a&&a;e.list=(0,m.default)(e.list,t),e.loading=!1,e.pagination=(0,M.createPaginationObject)(r),e.scrollTo=o}))),(0,i.default)(o,T.CLEAR_CONVERSATION,(function(e){return b(b({},e),L)})),(0,i.default)(o,T.FETCH_CONVERSATION_START,(0,c.default)((function(e,t){t.payload.isFromShowMore?e.loadingFromShowMore=!0:e.loading=!0}))),(0,i.default)(o,T.FETCH_CONVERSATION_END,{next:(0,c.default)((function(e,t){var n=t.payload,r=n.pagination,a=n.scrollToComments,o=void 0!==a&&a,i=r.sortBy!==e.pagination.sortBy?d.createMessagesStackListObject():e.list;e.list=(0,m.default)(i,t),e.loading=!1,e.loadingFromShowMore=!1,e.pagination=(0,M.createPaginationObject)(r),e.scrollTo=o})),throw:(0,c.default)((function(e){e.loading=!1,e.loadingFromShowMore=!1}))}),(0,i.default)(o,T.ADD_HIGHLIGHTED_MESSAGE,(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t)}))),(0,i.default)(o,g.EXPAND_AGGREGATED_MESSAGES,(0,c.default)((function(e){for(var t=d.getAggregatedStacksSequence(e.list),n=Math.min(E.AGGREGATE_MESSAGES_EXPAND_CHUNK,t.length),r=0;r<n;r++){var a=t[r];a.isAggregated=!1,e.transferredFromAggregatedStackIds.push(a.id),0===a.message.depth&&e.list.rootOrder.unshift(a.id),e.list.aggregatedMessage.shift()}}))),(0,i.default)(o,T.SET_CURRENT_USER,(0,c.default)((function(e,t){var n=t.payload.currentUser;(0,A.isLoggedIn)(n)&&Object.values(e.list.messages).forEach((function(e){e.isPostCommentActionEnabled=!1}))}))),(0,i.default)(o,v.CLOSE_SIGNUP_WIZARD,(0,c.default)((function(e){Object.values(e.list.messages).forEach((function(e){e.isPostCommentActionEnabled=!1})),e.isPostCommentActionEnabled=!1}))),(0,i.default)(o,T.CREATE_MESSAGE_START,(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t),e.pagination=(0,I.default)(e.pagination,t),e.failedMessageTemp=void 0}))),(0,i.default)(o,T.CREATE_MESSAGE_END,{next:(0,c.default)((function(e,t){var n=t.payload,r=n.message,a=n.isLoggedIn;0!==r.depth||a||(e.isPostCommentActionEnabled=!0),e.list=(0,m.default)(e.list,t)})),throw:(0,c.default)((function(e,t){var n=t.payload,r=n.message,a=n.isLoggedIn;0!==r.depth||a||(e.isPostCommentActionEnabled=!1),e.list=(0,m.default)(e.list,t),t.payload.error&&(e.failedMessageTemp=t.payload)}))}),(0,i.default)(o,T.CLEAN_FAILED_MESSAGE,(0,c.default)((function(e,t){e.failedMessageTemp=void 0,e.list=(0,m.default)(e.list,t),e.pagination=(0,I.default)(e.pagination,t)}))),(0,i.default)(o,T.CHANGE_MESSAGE_ID,(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t)}))),(0,i.default)(o,T.REJECT_MESSAGE_START,(0,c.default)((function(e,t){e.list.messages[t.payload.message.id].message.messageModeratingStage=y.MessageModeratingStages.LOADING}))),(0,i.default)(o,T.REJECT_MESSAGE_END,(0,c.default)((function(e,t){e.list.messages[t.payload.message.id].message.messageModeratingStage=y.MessageModeratingStages.FINISHED,e.list.messages[t.payload.message.id].message.status=s.statuses.BLOCKED,e.list.messages[t.payload.message.id].message.isPublished=!1}))),(0,i.default)(o,T.REJECT_MESSAGE_FAILED,(0,c.default)((function(e,t){e.list.messages[t.payload.message.id].message.messageModeratingStage=y.MessageModeratingStages.FAILED,e.list.messages[t.payload.message.id].message.messageModeratingFailedType=y.MessageModeratingFailedType.REJECT}))),(0,i.default)(o,(0,u.combineActions)(f.GET_REPLIES_END,_.GET_PREVIOUS_REPLIES_END,p.DELETE_MESSAGES,R.REJECT_MESSAGES,T.DELETE_MESSAGE_START,T.REPORT_MESSAGE_END).toString(),(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t)}))),(0,i.default)(o,T.GLOBAL_REJECT_MESSAGE_END,(0,c.default)((function(e,t){var n=t.payload.message,r=d.findByMessageId(e.list,n.id);if(r)if(0===n.depth)if(n.isDeleted)r.message=b(b(b({},r.message),n),{},{user:b(b({},r.message.user),n.user)}),r.childrenStackIds.map((function(t){return d.findByStackId(e.list,t)})).forEach((function(e){e.message.replyToUsername="",e.message.replyToDisplayName="",e.message.replyToUserId=void 0}));else{var a=e.list.messages[n.id].message.parentMessageId;if(a){var o=e.list.messages[a];o.childrenStackIds=o.childrenStackIds.filter((function(e){return e!==n.id})),o.message.repliesCount--}else e.list.rootOrder=e.list.rootOrder.filter((function(e){return e!==n.id}));delete e.list.messages[n.id]}else{if(n.isDeleted)e.list.messages[n.id]=n,r.childrenStackIds.map((function(t){return d.findByStackId(e.list,t)})).forEach((function(e){e.message.replyToUsername="",e.message.replyToDisplayName="",e.message.replyToUserId=void 0}));else{var i=e.list.messages[n.parentMessageId];i.childrenStackIds=i.childrenStackIds.filter((function(e){return e!==n.id})),i.message.repliesCount--}delete e.list.messages[n.id]}}))),(0,i.default)(o,(0,u.combineActions)(T.EDIT_MESSAGE_START,T.EDIT_MESSAGE_END).toString(),{next:(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t)})),throw:(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t)}))}),(0,i.default)(o,T.APPROVE_MESSAGE_START,(0,c.default)((function(e,t){e.list.messages[t.payload.messageId].message.messageModeratingStage=y.MessageModeratingStages.LOADING}))),(0,i.default)(o,T.APPROVE_MESSAGE_END,(0,c.default)((function(e,t){e.list.messages[t.payload.messageId].message.messageModeratingStage=y.MessageModeratingStages.FINISHED,e.list.messages[t.payload.messageId].message.status=s.statuses.APPROVED}))),(0,i.default)(o,T.APPROVE_MESSAGE_FAILED,(0,c.default)((function(e,t){e.list.messages[t.payload.messageId].message.messageModeratingStage=y.MessageModeratingStages.FAILED,e.list.messages[t.payload.messageId].message.messageModeratingFailedType=y.MessageModeratingFailedType.APPROVE}))),(0,i.default)(o,(0,u.combineActions)(T.MODERATION_USER_STATUS,T.PIN_MESSAGE_STATUS,T.TOGGLE_MARK_MESSAGE,T.VOTE_TOGGLE_MESSAGE_START,S.UPDATED_MESSAGES,O.REALTIME_MESSAGE_VOTE,T.MUTE_USER,T.UNMUTE_USER).toString(),(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t)}))),(0,i.default)(o,T.SHOW_REPORT_MESSAGE_MODAL,(0,c.default)((function(e,t){var n=t.payload;e.showReportMessageModal=n}))),(0,i.default)(o,T.REALTIME_MESSAGE_NEW,(0,c.default)((function(e,t){e.list=(0,m.default)(e.list,t),e.pagination=(0,I.default)(e.pagination,t)}))),(0,i.default)(o,T.UPDATE_MESSAGE_FEATURED,(0,c.default)((function(e,t){var n=t.payload,r=e.list.rootOrder.indexOf(n.id);e.list.rootOrder.splice(r,1),e.list.rootOrder.unshift(n.id),e.list.messages[n.id].message.featuredComment="top"}))),(0,i.default)(o,T.REQUEST_TOGGLE_HIDE_CONVERSATION,(0,c.default)((function(e){e.loading=!0}))),(0,i.default)(o,T.RESPONSE_TOGGLE_HIDE_CONVERSATION,(0,c.default)((function(e){e.loading=!1}))),(0,i.default)(o,T.SET_USER_VOTES,(0,c.default)((function(e,t){t.payload.messages.forEach((function(t){e.list.messages[t.id]=t}))}))),(0,i.default)(o,T.ADD_FEATURED_COMMENT,(0,c.default)((function(e,t){var n=t.payload;e.list.messages[n.id].message.featured=!0}))),(0,i.default)(o,T.REMOVE_FEATURED_COMMENT,(0,c.default)((function(e,t){var n=t.payload;"top"===n.featuredComment?(e.list.messages[n.id].message.featuredComment="",e.list.messages[n.id].message.featured=!0):e.list.messages[n.id].message.featured=!1}))),(0,i.default)(o,T.PIN_FEATURED_COMMENT,(0,c.default)((function(e,t){var n=t.payload;for(var r in e.list.messages)"top"===e.list.messages[r].message.featuredComment&&(e.list.messages[r].message.featuredComment="");var a=e.list.rootOrder.indexOf(n.id);e.list.rootOrder.splice(a,1),e.list.rootOrder.unshift(n.id),e.list.messages[n.id].message.featuredComment="top",e.list.messages[n.id].message.featured=!0}))),o),L);function h(e){return e.list}t.default=P},218:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMessageIdInList=function(e,t,n){var r=e.findIndex((function(e){return e===t}));-1!==r&&(e[r]=n)},t.reportMessage=function(e){return i(i({},e),{},{isReported:!0,isDeleted:!0})};var a=r(n(33));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},219:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCommunityView=t.LAST_COMMUNITY_VIEW_KEY=void 0;var a=r(n(1)),o=n(64);t.LAST_COMMUNITY_VIEW_KEY="SPOTIM_LAST_COMMUNITY_VIEW";var i=a.default.get("tenant_config.shared.default_community_view",o.CommunityViewTabTypes.Explore),s=a.default.get("elementOptions.defaultCommunityView",""),u=function(){try{return localStorage.getItem("SPOTIM_LAST_COMMUNITY_VIEW")||s||i}catch(e){return o.CommunityViewTabTypes.Explore}}();t.defaultCommunityView=u},220:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.stripQueryStringAndHash=function(e){return e.split("?")[0].split("#")[0]},t.queryStringFromObject=s,t.buildUrl=c,t.composeUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.urlParams,r=t.queryString;return c(e=Object.keys(n).reduce((function(e,t){return e.indexOf(":".concat(t))>=-1&&(e=e.replace(":".concat(t),n[t])),e}),e),r)},t.removeParams=d,Object.defineProperty(t,"objectFromQueryString",{enumerable:!0,get:function(){return i.objectFromQueryString}}),t.default=void 0;var a=r(n(87)),o=n(679),i=n(680);function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object.keys(e).reduce((function(t,n){return[].concat((0,a.default)(t),["".concat(n,"=").concat(encodeURIComponent(e[n]))])}),[]).join("&");return t&&n.length>0&&(n="?".concat(n)),n}function u(e){var t=e.indexOf("?");if(-1===t)return{};var n=e.substring(t).slice(1).split("&"),r={};return n.forEach((function(e){""!==(e=e.split("="))[0]&&(r[e[0]]=decodeURIComponent(e[1]||""))})),JSON.parse(JSON.stringify(r))}function c(e,t){var n=e,r={};if(n){var a=n.indexOf("?");a>-1&&(r=u(n),n=n.substring(0,a))}else n="";var o=s(Object.assign(r,t));return o.length>0&&(n+=o),n}function d(e,t){return t.reduce((function(e,t){return function(e,t){var n=e,r=e.indexOf("?");if(-1!==r){var a=e.substring(0,r),o=e.substring(r+1),i=new RegExp("&"+t+"(=[^&]*)?|^"+t+"(=[^&]*)?&?");o=o.replace(i,""),n=a+(o.length>0?"?":"")+o}return n}(e,t)}),e)}var l={parseUrl:u,buildUrl:c,getKey:o.getKey,setKey:function(e,t,n){var r=e,a=new RegExp("([?&])"+t+"=.*?(&|$)","i");if(e.match(a))r=e.replace(a,"$1"+t+"="+n+"$2");else{var o=-1!==e.indexOf("?")?"&":"?";r=e+o+t+"="+n}return r},removeParams:d,hasQueryString:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=u(e),a=!1;return r.hasOwnProperty(t)&&(a=null===n||r[t]===n),a}};t.default=l},221:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e.split("_"))};var a=r(n(326))},255:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getConversationData=function(e){return O.apply(this,arguments)};var a,o=r(n(37)),i=r(n(38)),s=r(n(1)),u=n(108),c=r(n(58)),d=n(182),l=n(257),E=function(e){return Object.values(u.SortBy).includes(e)};function f(e){var t,n,r=e.isLiveBlog,a=(t=s.default.get("elementOptions.sortBy",""),n=s.default.get("tenant_config.conversation.abTestedSortBy",""),E(t)?t:E(n)?n:void 0),o=null!=a?a:s.default.get("init_data.config.sort_by");if(r)return a||u.SortBy.NEWEST;var i=(0,l.getUserLastSorting)();return i&&E(i)?i:o}function _(){var e=s.default.get("host_options.shouldCollapseReplies",!1),t=s.default.get("tenant_config.conversation.abTestedShouldCollapseReplies",!1);return e||t}!function(e){e.Conversation="conversation",e.Post="post"}(a||(a={}));var S=s.default.get("queryParams.spot_im_content_type",a.Conversation);function O(){return(O=(0,i.default)(o.default.mark((function e(t){var r,i,u,l,E,O,p,g,T,v,A,m,I;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.postId,i=t.element,u=t.isPreview,l=t.isLiveBlog,!u){e.next=6;break}return e.next=4,n.e(56).then(n.t.bind(null,1057,7));case 4:return E=e.sent,e.abrupt("return",E.default);case 6:return O="true"===i.dataset.ignoreQueryParams,p=f({isLiveBlog:l}),g=(0,d.getMessagesCountToFetch)(),T=O||S!==a.Conversation?null:s.default.get("queryParams.spot_im_comment_id")||s.default.get("queryParams.spot_im_reply_id"),(i.dataset.spotImScrollToReply||i.dataset.spotImScrollToComment)&&(T=i.dataset.spotImScrollToComment||i.dataset.spotImScrollToReply),v=s.default.get("queryParams.TEAM_ROUTE","v1.0.0"),A=_()?1:2,m={sort_by:p,offset:0,count:g,message_id:T,depth:A},s.default.get("elementOptions.socialReviews",!1)&&(m.with_star_rating=!0),e.next=18,(0,c.default)("".concat(v,"/conversation/read"),{data:m,method:"POST",postId:r});case 18:return I=e.sent,e.abrupt("return",{data:I});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserLastSorting=function(){var e;try{e=window.localStorage.getItem("SPOTIM_USER_SORTING")}catch(e){}return e},t.saveUserLastSorting=void 0;t.saveUserLastSorting=function(e){try{window.localStorage.setItem("SPOTIM_USER_SORTING",e)}catch(e){}}},259:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.parseLiveBlog=d,t.getEventLoction=function(e){return e.location},t.getReporters=l,t.isReporter=function(e,t){return l(e).indexOf(t)>-1},t.isLiveBlogOnline=function(e){return e.isLive},t.getEndDate=function(e){return e.endDate},t.getStartDate=function(e){return e.startTime},t.default=t.initLiveBlog=void 0;var a=r(n(33)),o=n(19),i=r(n(83)),s={reporters:[],location:void 0,isLive:!1},u=(0,o.createAction)("LIVE_BLOG/INIT",d);t.initLiveBlog=u;var c=(0,o.handleActions)((0,a.default)({},"LIVE_BLOG/INIT",(function(e,t){var n=t.payload;return{reporters:n.reporters,location:n.location,isLive:n.live,endDate:n.endDate,startTime:n.startTime}})),s);function d(e){return i.default.map(e,{id:"id",code:"code",title:"title",where:"location",live:"live",started_at:"startTime",end_date:"endDate",end_hour:"endHour",end_minute:"endMinute",next_occurrence:"nextStartTime",reporters_ids:"reporters",comments_disabled:"commentsDisabled",repeating:"isRepeating",weekly_days:"repeatingDays"})}function l(e){return e.reporters}t.default=c},262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepExtendObject=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.shift();return n.forEach((function(t){for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(a[n]=a[n]||{},e(a[n],t[n])):a[n]=t[n]})),a}},269:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createUserObject=function(e){var t=(0,o.default)({},e);return c({id:(null==e?void 0:e.id)||(null==e?void 0:e.userId),displayName:void 0,imageId:void 0,username:void 0,isModerator:!1,isRegistered:!1,isSuperAdmin:!1,isCommunityModerator:!1,isJournalist:!1,isAdmin:!1,reputation:{total:1},ssoData:{isSubscriber:void 0},email:void 0,isEmailVerified:!1,unseenNotificationsCount:void 0,notificationsCount:null==e?void 0:e.notificationsCount,messagesVoted:null==e?void 0:e.messagesVoted},t)},t.getDisplayName=function(e){return(0,i.getDisplayName)(e)},t.isSameUser=function(e,t){return(0,i.isSameUser)(e,t)},t.getThumbnailUrl=function(e,t){var n=c({crop:"thumb",gravity:"face",height:24,width:24},t);return s.cloudinary.url(e.imageId,n)};var a=r(n(33)),o=r(n(70)),i=n(20),s=n(95);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},274:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowRect=function(){return new i({right:window.innerWidth,bottom:window.innerHeight})},t.getElementRect=function(e){var t=e.getBoundingClientRect();return new i(t)},t.Rect=void 0;var a=r(n(35)),o=r(n(36)),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.top,r=void 0===n?0:n,o=t.left,i=void 0===o?0:o,s=t.right,u=void 0===s?0:s,c=t.bottom,d=void 0===c?0:c;(0,a.default)(this,e),this.top=r,this.left=i,this.right=u,this.bottom=d}return(0,o.default)(e,[{key:"getHeight",value:function(){return Math.max(this.bottom-this.top,0)}},{key:"getWidth",value:function(){return Math.max(this.right-this.left,0)}},{key:"isEmpty",value:function(){return this.top===this.bottom||this.left===this.right}},{key:"isNegative",value:function(){return this.top>this.bottom||this.left>this.right}},{key:"getArea",value:function(){return this.getHeight()*this.getWidth()}},{key:"intersect",value:function(t){return new e({top:Math.max(this.top,t.top),left:Math.max(this.left,t.left),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom)})}},{key:"addFrameRect",value:function(t){return new e({top:t.top+this.top,left:t.left+this.left,right:t.left+this.right,bottom:t.top+this.bottom})}},{key:"toObject",value:function(){return{top:this.top,left:this.left,right:this.right,bottom:this.bottom}}}],[{key:"fromObject",value:function(t){return new e(t)}}]),e}();t.Rect=i},275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStatus=function(e,t){var n="NOT_VISIBLE";e&&(t>0&&t<.5?n="LESS_HALF_VISIBLE":t>=.5&&t<1?n="MORE_HALF_VISIBLE":1===t&&(n="FULL_VISIBLE"));return n},t.VISIBILITY_STATUS=t.FULL_VISIBLE=t.MORE_HALF_VISIBLE=t.LESS_HALF_VISIBLE=t.NOT_VISIBLE=void 0;t.NOT_VISIBLE="NOT_VISIBLE";t.LESS_HALF_VISIBLE="LESS_HALF_VISIBLE";t.MORE_HALF_VISIBLE="MORE_HALF_VISIBLE";t.FULL_VISIBLE="FULL_VISIBLE";var r={NOT_VISIBLE:"NOT_VISIBLE",LESS_HALF_VISIBLE:"LESS_HALF_VISIBLE",MORE_HALF_VISIBLE:"MORE_HALF_VISIBLE",FULL_VISIBLE:"FULL_VISIBLE"};t.VISIBILITY_STATUS=r},276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAuthenticationEnd=function(e,t){return{type:"FETCH_AUTHENTICATION_END",payload:{networkId:e,token:t}}},t.FETCH_AUTHENTICATION_END=void 0;t.FETCH_AUTHENTICATION_END="FETCH_AUTHENTICATION_END"},277:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.updateProfileImage=function(e){return(0,i.default)("me/profile",{method:"POST",data:{image_id:e}})},t.getModerationTicketsResource=function(e){return u.apply(this,arguments)};var a=r(n(37)),o=r(n(38)),i=r(n(73)),s=r(n(83));function u(){return(u=(0,o.default)(a.default.mark((function e(t){var n,r,o,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.postId,r=t.spotId,e.next=3,(0,i.default)("me/moderation-tickets/spot/".concat(r,"/post/").concat(n),{data:{}});case 3:return o=e.sent,u=o.body,e.abrupt("return",s.default.map(u,{spot_id:"spotId",moderation_tickets:{"~":"moderationTickets",id:"id",type:"type",tag:"tag"}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkUsersToMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.userId;e.user=t[n],e.userDisplayName&&(e.user.displayName=e.userDisplayName);e.entities&&e.entities.forEach((function(e){"user-mention"===e.type.toLowerCase()&&(e.user=t[e.userId])}));if(e.replyToUserId&&!e.replyToDisplayName){var r=t[e.replyToUserId];r&&(e.replyToDisplayName=r.displayName||r.username)}}},303:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createConversationObject=s,t.removeStarsRatingVote=function(e,t){var n=e.starsRatingCount,r=e.averageStarsRating;if(t>0){r=(r*n-t)/(n-=1)}return s(i(i({},e),{},{starsRatingCount:n,averageStarsRating:r}))},t.getTotalMessages=function(e){return e.messagesCount},t.getTotalComments=function(e){return e.commentsCount},t.getConversationMap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;e.length>0&&(e+=".");return function(){return Object.assign({conversation_id:"".concat(e,"id"),etag:"".concat(e,"etag"),spot_id:"".concat(e,"spotId"),post_id:"".concat(e,"postId"),comments_count:"".concat(e,"commentsCount"),messages_count:"".concat(e,"messagesCount"),"stars.average":"".concat(e,"averageStarsRating"),"stars.count":"".concat(e,"starsRatingCount"),"stars.segments":"".concat(e,"starsRatingSegments"),hidden:"".concat(e,"isHidden"),"metadata.community_question":"".concat(e,"communityQuestion")},t)}};var a=r(n(33));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i({id:void 0,spotId:null,postId:null,etag:null,pageUrl:null,messagesCount:-1,commentsCount:-1,averageStarsRating:null,starsRatingCount:0,isHidden:!1,communityQuestion:void 0,shouldFetchFeaturedComment:!1},e)}},304:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.startOptimizedMessageStack=function(){return{type:s.START_OPTIMIZED_MESSAGE_STACK}},t.stopOptimizedMessageStack=function(){return{type:s.STOP_OPTIMIZED_MESSAGE_STACK}},t.default=void 0;var a,o=r(n(33)),i=n(19),s=n(39);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(0,i.handleActions)((a={},(0,o.default)(a,s.START_OPTIMIZED_MESSAGE_STACK,(function(e){return c(c({},e),{},{optimizedMessageStack:!1})})),(0,o.default)(a,s.STOP_OPTIMIZED_MESSAGE_STACK,(function(e){return c(c({},e),{},{optimizedMessageStack:!1})})),(0,o.default)(a,s.STOP_OPTIMIZED_MESSAGE_STACK,(function(e){return c(c({},e),{},{optimizedMessageStack:!1})})),(0,o.default)(a,s.SHOW_NEW_MESSAGE_TOAST,(function(e,t){return e.newMessageToast&&e.newMessageToast.show?e:c(c({},e),{},{newMessageToast:{message:t.payload.message,show:!0}})})),(0,o.default)(a,s.HIDE_NEW_MESSAGE_TOAST,(function(e){return c(c({},e),{},{newMessageToast:{show:!1}})})),(0,o.default)(a,s.SET_SIGNUP_WIZARD_MESSAGE_ID,(function(e,t){return c(c({},e),{},{signupWizardMessageId:t.payload.messageId})})),a),{optimizedMessageStack:!1,newMessageToast:{show:!1}});t.default=d},305:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.addFollowersData=function(e){var t;return t=e.map((function(e){return(0,d.parseUser)(e)})),Object.assign(e,t),{type:c.REALTIME_FACE_LIST,payload:e}},t.default=void 0;var a,o=r(n(33)),i=r(n(87)),s=n(19),u=n(78),c=n(39),d=n(20),l=[],E=(0,s.handleActions)((a={},(0,o.default)(a,c.INITIALIZE_CONVERSATION,(function(e,t){var n=t.payload.followers;return f((0,i.default)(n))})),(0,o.default)(a,c.CLEAR_CONVERSATION,(function(){return l})),(0,o.default)(a,c.REALTIME_FACE_LIST,(function(e,t){return f(t.payload)})),a),l);function f(e){return e.map(u.createUserObject)}t.default=E},344:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.map(e,(0,s.getMessageMap)("message")).message;t.isVotedUp=1===e.rank.ranked_by_current_user,t.isVotedDown=-1===e.rank.ranked_by_current_user,t.downVotesCount=e.rank.ranks_down,t.upVotesCount=e.rank.ranks_up,t.parentMessageId=e.parent_id;var n=(0,o.parseUser)(e.users[e.user_id]);t.user=n,t.userDisplayName&&(t.user.displayName=t.userDisplayName);t.id!==e.root_comment?(t.depth=(t.depth||0)+1,t.rootMessageId=e.root_comment):(t.depth=0,t.rootMessageId=t.id);n.isOnline=!0,t.status===a.statuses.BLOCKED&&t.isDeleted&&(t.isDeleted=!1);return{user:n,message:t}};var a=n(51),o=n(78),i=r(n(83)),s=n(157)},345:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMessageStack=O,t.default=void 0;var o,i=r(n(33)),s=n(19),u=r(n(21)),c=a(n(89)),d=n(39),l=n(135),E=n(218);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=(0,s.handleActions)((o={},(0,i.default)(o,(0,s.combineActions)(d.EDIT_MESSAGE_START,d.EDIT_MESSAGE_END).toString(),{next:(0,u.default)((function(e,t){var n=t.payload.message;e.message=O(e,n)})),throw:(0,u.default)((function(e,t){var n=t.payload.message;e.message=O(e,n)}))}),(0,i.default)(o,d.REPORT_MESSAGE_END,(0,u.default)((function(e){var t=e.message;e.message=(0,E.reportMessage)(t)}))),(0,i.default)(o,l.REALTIME_MESSAGE_VOTE,(0,u.default)((function(e,t){var n=t.payload.message;e.message=O(e,n)}))),(0,i.default)(o,d.VOTE_TOGGLE_MESSAGE_START,(0,u.default)((function(e,t){var n=t.payload,r=n.operation,a=n.message,o=a.isVotedDown,i=a.isVotedUp;"up"===r?(o&&(e.message.isVotedDown=!1,e.message.downVotesCount-=1),i?(e.message.isVotedUp=!1,e.message.upVotesCount-=1):(e.message.isVotedUp=!0,e.message.upVotesCount+=1)):"down"===r&&(i&&(e.message.isVotedUp=!1,e.message.upVotesCount-=1),o?(e.message.isVotedDown=!1,e.message.downVotesCount-=1):(e.message.isVotedDown=!0,e.message.downVotesCount+=1))}))),(0,i.default)(o,d.TOGGLE_MARK_MESSAGE,(0,u.default)((function(e,t){var n=t.payload.message;e.message.isMarked=n.isMarked}))),(0,i.default)(o,d.PIN_MESSAGE_STATUS,(0,u.default)((function(e,t){var n=t.payload.message;e.message.isPinned=n.isPinned}))),(0,i.default)(o,d.MUTE_USER,(0,u.default)((function(e){e.message.user.isMuted=!0}))),(0,i.default)(o,d.UNMUTE_USER,(0,u.default)((function(e){e.message.user.isMuted=!1}))),(0,i.default)(o,d.MODERATION_USER_STATUS,(0,u.default)((function(e,t){var n=t.payload,r=n.isUserAllowed,a=n.isUserBlocked;e.message.user.isAllowListed=r,e.message.user.isBlockListed=a}))),o),c.createMessageStackObject());function O(e,t){return _(_(_({},e.message),t),{},{depth:e.message.depth,isVotedUp:e.message.isVotedUp,isVotedDown:e.message.isVotedDown,repliesCount:e.message.repliesCount,user:_(_({},e.message.user),t.user)})}t.default=S},346:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getSortBy=function(e){return e.comments.pagination.sortBy},t.default=void 0;var a,o=r(n(33)),i=n(19),s=r(n(21)),u=n(39),c=n(90),d=n(347),l=(0,i.handleActions)((a={},(0,o.default)(a,u.CREATE_MESSAGE_START,(0,s.default)((function(e,t){var n=t.payload,r=n.message;!n.isRetry&&(0,c.isRootMessage)(r)&&e.offset++}))),(0,o.default)(a,u.CLEAN_FAILED_MESSAGE,(0,s.default)((function(e,t){var n=t.payload.message;(0,c.isRootMessage)(n)&&e.offset--}))),(0,o.default)(a,u.REALTIME_MESSAGE_NEW,(0,s.default)((function(e,t){var n=t.payload.messageStack,r=0===n.message.depth;r||e.offset++,(n.isAggregated||r)&&e.commentsRead++}))),a),(0,d.createPaginationObject)());t.default=l},347:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createPaginationObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s({offset:0,commentsRead:0,pageSize:10,sortBy:o.SortBy.BEST,hasNext:!1},e)};var a=r(n(33)),o=n(108);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(349);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(670);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_IS_MOBILE=void 0;t.SET_IS_MOBILE="SET_IS_MOBILE"},355:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Badges=void 0,t.Badges=r,function(e){e.MODERATOR="moderator",e.REPORTER="reporter",e.JOURNALIST="journalist",e.COMMUNITY_MODERATOR="community-moderator",e.ADMIN="admin",e.SUBSCRIBER="subscriber"}(r||(t.Badges=r={}))},358:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.setUnseenNotificationsCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:i.SET_UNSEEN_NOTIFICATION_COUNT,payload:{unseenNotificationsCount:e}});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};var a=r(n(37)),o=r(n(38)),i=n(94)},359:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.initConversation=void 0;var a=r(n(37)),o=r(n(38)),i=n(39),s=n(64),u=n(360),c=r(n(1)),d=n(94),l=n(170),E=n(112),f=n(159);function _(e){var t;e.pagination.sortBy||(e.pagination.sortBy=c.default.get("init_data.config.sort_by"));try{(t=window.localStorage.getItem("SPOTIM_REPORTED_COMMENTS"))&&(e.reportedComments=JSON.parse(t))}catch(e){}return e}t.initConversation=function(e){var t=e.data,n=e.postId,r=e.contentType;return function(){var e=(0,o.default)(a.default.mark((function e(o,c){var S,O,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O=t.conversation.community_question,(p=_(p=(0,u.parseConversation)(t.conversation))).shouldReloadComments=!0,p.conversation.postId=n,p.conversation.contentType=r,(null===(S=p.moduleOptions)||void 0===S?void 0:S.isSterileConversation)?o({type:i.CLEAR_CONVERSATION}):o({type:i.INITIALIZE_CONVERSATION,payload:p}),o((0,E.initializeTyping)(p.conversation.id)),o((0,f.updateReportedComments)(p.reportedComments)),o({type:i.SET_COMMUNITY_QUESTION,payload:{moduleOptions:{communityQuestion:O}}}),o({type:d.SET_IS_LOADED,payload:{isLoaded:!1}}),o((0,l.setConversationStatus)({conversationStatus:s.ConversationStatus.LOADED}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},360:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.parseConversation=function(e){var t=i.default.map(e,(0,c.getConversationMap)("conversation"),{avatars:"followersIds",offset:"pagination.offset",comments_read:"pagination.commentsRead",has_next:"pagination.hasNext",sort_by:"pagination.sortBy",star_rating_summary:"starRatingSummary"}),n=t.conversation,r=t.followersIds,l=t.pagination,E=t.starRatingSummary;n.postId=(0,s.default)(n.id);var f=(0,a.parseMessage)(n.id,{comments:(0,o.flatComments)(e.comments),users:e.users}),_=f.comments,S=f.usersList,O=[];r&&(O=(0,d.default)(r,S));return l.sortBy=l.sortBy||u.SortBy.BEST,{conversation:n,followersIds:r,pagination:l,comments:_,followers:O,starRatingSummary:E}},t.parseLiveBlog=function(e,t){var n=i.default.map(e,(0,c.getConversationMap)("conversation"),{avatars:"followersIds",offset:"pagination.offset",comments_read:"pagination.commentsRead",has_next:"pagination.hasNext",sort_by:"pagination.sortBy"}),r=n.conversation,o=n.followersIds,s=n.pagination,l=i.default.map(t,{id:"id",code:"code",title:"title",where:"location",live:"live",started_at:"startTime",end_date:"endDate",end_hour:"endHour",end_minute:"endMinute",next_occurrence:"nextStartTime",reporters_ids:"reporters",comments_disabled:"commentsDisabled",repeating:"isRepeating",weekly_days:"repeatingDays"}),E=(0,a.parseMessage)(r.id,e),f=E.comments,_=E.usersList;f=f.filter((function(e){return!e.isDeleted}));var S=[];o&&(S=(0,d.default)(o,_));return s.sortBy=s.sortBy||u.SortBy.BEST,{conversation:r,event:l,followersIds:o,pagination:s,comments:f,followers:S}};var a=n(116),o=n(158),i=r(n(83)),s=r(n(221)),u=n(108),c=n(303),d=r(n(706))},361:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(33)),o=r(n(35)),i=r(n(36)),s=r(n(709)),u=r(n(31)),c={Conversation:"conversation",Explore:"explore"},d=function(){function e(){(0,o.default)(this,e),this.element=void 0}return(0,i.default)(e,[{key:"startObservingOn",value:function(e,t){this.element=e,u.default.startObservingOn(this.element,this.getModuleName(t))}},{key:"changeObervingModuleOn",value:function(e){var t;null===(t=u.default.changeObervingModuleOn)||void 0===t||t.call(u.default,this.element,this.getModuleName(e))}},{key:"getModuleName",value:function(e){return c[e]||e}}],[{key:"getInstance",value:function(t){var n,r,o=null===(n=window.__SPOTIM__)||void 0===n||null===(r=n.ConversationTimeSpent)||void 0===r?void 0:r[t];return o||(o=new e,(0,s.default)(window,{__SPOTIM__:{ConversationTimeSpent:(0,a.default)({},t,o)}})),o}}]),e}();var l=function(e){return d.getInstance(e)};t.default=l},365:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.isBackToCommentsWithoutConversationPage=function(e){var t;if(e||!o)return!1;var n=s.find((function(e){return"conversation-page"===e.module}));return!i||(null==n||null===(t=n.excludeSources)||void 0===t?void 0:t.includes(i))};var a=r(n(1)),o=a.default.get("queryParams.spot_im_highlight_immediate",!1),i=a.default.get("queryParams.spot_im_redirect_source",""),s=a.default.get("tenant_config.launcher.immediateConfig",[])},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_READ_ONLY_CONVERSATION=t.NOTIFY_STARS_RATING_FAILED=t.SET_TOKEN_INITIALIZED=t.SET_TRANSLATION_INITIALIZED=t.SET_CONVERSATION_STATUS=t.SET_USER_INITIALIZED=t.SCROLL_TO_HEADER=t.SET_FOCUS_SAY_CONTROL=t.CHANGE_USER_DISPLAY_NAME=t.PRELOAD_CONVERSATION=t.SET_COMMUNITY_VIEW=t.UPDATE_USER_SUSPENSION=t.FETCH_USER_SUSPENSION_STATUS=t.REALTIME_MODERATE=t.NOTIFY_MODERATION_ALERT_RENDERED=t.CLOSE_MODERATION_ALERT=t.MODERATE_MESSAGE_BLOCK=t.MODERATE_MESSAGE=t.SET_SIGNUP_WIZARD_MESSAGE_ID=t.HIDE_NEW_MESSAGE_TOAST=t.SHOW_NEW_MESSAGE_TOAST=t.UPDATE_REPORTED_COMMENTS=t.BLOCKLIST_USER_END=t.BLOCKLIST_USER_FAILED=t.BLOCKLIST_USER_START=t.UNMUTE_USER=t.MUTE_USER=t.UPDATE_SHOULD_FETCH_FEATURED_COMMENT=t.PIN_FEATURED_COMMENT=t.REMOVE_FEATURED_COMMENT=t.ADD_FEATURED_COMMENT=t.SAY_CONTROL_RENDERED=t.EXPAND_COLLAPSED_COMMENTS=t.EXPAND_CHILDREN=t.UPDATE_CONVERSATION_MESSAGES_COUNT=t.STOP_OPTIMIZED_MESSAGE_STACK=t.START_OPTIMIZED_MESSAGE_STACK=t.SHOW_REPORT_MESSAGE_MODAL=t.SET_MESSAGES=t.SET_USER_VOTES=t.SET_MODERATION_DEFAULT_POLICY=t.GET_MODERATION_DEFAULT_POLICY=t.PIN_MESSAGE_STATUS=t.MODERATION_USER_STATUS=t.SET_IS_SETTING_COMMUNITY_QUESTION=t.SET_COMMUNITY_QUESTION=t.GLOBAL_REJECT_MESSAGE_END=t.BLUR_SAY_CONTROL=t.NOTIFY_TYPING=t.UNFOCUS_SAY_CONTROL=t.FOCUS_SAY_CONTROL=t.CLOSE_REPLY_SAY_CONTROL=t.CLOSE_EDIT_SAY_CONTROL=t.RANK_CONVERSATION_MESSAGE_SAY_CONTROL=t.OPEN_MESSAGE_SAY_CONTROL=t.OPEN_EDIT_SAY_CONTROL=t.OPEN_MAIN_SAY_CONTROL=t.REALTIME_FACE_LIST=t.UPDATE_MESSAGE_FEATURED=t.REALTIME_MESSAGE_NEW=t.FETCH_CONVERSATION_END=t.FETCH_CONVERSATION_START=t.VOTE_TOGGLE_MESSAGE_END=t.VOTE_TOGGLE_MESSAGE_START=t.REPORT_MESSAGE_END=t.TOGGLE_MARK_MESSAGE=t.CHANGE_MESSAGE_ID=t.EDIT_MESSAGE_END=t.EDIT_MESSAGE_START=t.REJECT_MESSAGE_FAILED=t.REJECT_MESSAGE_END=t.REJECT_MESSAGE_START=t.DELETE_MESSAGE_END=t.DELETE_MESSAGE_START=t.APPROVE_MESSAGE_FAILED=t.APPROVE_MESSAGE_END=t.APPROVE_MESSAGE_START=t.CLEAN_FAILED_MESSAGE=t.CREATE_MESSAGE_END=t.CREATE_MESSAGE_START=t.GET_STARS_RATING_SUMMARY=t.RANK_CONVERSATION=t.SET_CURRENT_USER=t.RESET_UP_VOTES=t.ADD_HIGHLIGHTED_MESSAGE=t.RESPONSE_GET_UP_VOTES=t.REQUEST_GET_UP_VOTES=t.RESPONSE_TOGGLE_HIDE_CONVERSATION=t.REQUEST_TOGGLE_HIDE_CONVERSATION=t.GET_BASIC_USER_PROFILE_END=t.GET_BASIC_USER_PROFILE_START=t.SCROLL_TO_MESSAGE=t.CONVERSATION_LOAD=t.INITIALIZE_MODULE_OPTIONS=t.CLEAR_CONVERSATION=t.INITIALIZE_CONVERSATION=void 0;t.INITIALIZE_CONVERSATION="INITIALIZE_CONVERSATION";t.CLEAR_CONVERSATION="CLEAR_CONVERSATION";t.INITIALIZE_MODULE_OPTIONS="INITIALIZE_MODULE_OPTIONS";t.CONVERSATION_LOAD="CONVERSATION_LOAD";t.SCROLL_TO_MESSAGE="SCROLL_TO_MESSAGE";t.GET_BASIC_USER_PROFILE_START="GET_BASIC_USER_PROFILE_START";t.GET_BASIC_USER_PROFILE_END="GET_BASIC_USER_PROFILE_END";t.REQUEST_TOGGLE_HIDE_CONVERSATION="REQUEST_TOGGLE_HIDE_CONVERSATION";t.RESPONSE_TOGGLE_HIDE_CONVERSATION="RESPONSE_TOGGLE_HIDE_CONVERSATION";t.REQUEST_GET_UP_VOTES="REQUEST_GET_UP_VOTES";t.RESPONSE_GET_UP_VOTES="RESPONSE_GET_UP_VOTES";t.ADD_HIGHLIGHTED_MESSAGE="ADD_HIGHLIGHTED_MESSAGE";t.RESET_UP_VOTES="RESET_UP_VOTES";t.SET_CURRENT_USER="SET_CURRENT_USER";t.RANK_CONVERSATION="RANK_CONVERSATION";t.GET_STARS_RATING_SUMMARY="GET_STARS_RATING_SUMMARY";t.CREATE_MESSAGE_START="CREATE_MESSAGE_START";t.CREATE_MESSAGE_END="CREATE_MESSAGE_END";t.CLEAN_FAILED_MESSAGE="CLEAN_FAILED_MESSAGE";t.APPROVE_MESSAGE_START="APPROVE_MESSAGE_START";t.APPROVE_MESSAGE_END="APPROVE_MESSAGE_END";t.APPROVE_MESSAGE_FAILED="APPROVE_MESSAGE_FAILED";t.DELETE_MESSAGE_START="DELETE_MESSAGE_START";t.DELETE_MESSAGE_END="DELETE_MESSAGE_END";t.REJECT_MESSAGE_START="REJECT_MESSAGE_START";t.REJECT_MESSAGE_END="REJECT_MESSAGE_END";t.REJECT_MESSAGE_FAILED="REJECT_MESSAGE_FAILED";t.EDIT_MESSAGE_START="EDIT_MESSAGE_START";t.EDIT_MESSAGE_END="EDIT_MESSAGE_END";t.CHANGE_MESSAGE_ID="CHANGE_MESSAGE_ID";t.TOGGLE_MARK_MESSAGE="TOGGLE_MARK_MESSAGE";t.REPORT_MESSAGE_END="REPORT_MESSAGE_END";t.VOTE_TOGGLE_MESSAGE_START="VOTE_TOGGLE_MESSAGE_START";t.VOTE_TOGGLE_MESSAGE_END="VOTE_TOGGLE_MESSAGE_END";t.FETCH_CONVERSATION_START="FETCH_CONVERSATION_START";t.FETCH_CONVERSATION_END="FETCH_CONVERSATION_END";t.REALTIME_MESSAGE_NEW="REALTIME_MESSAGE_NEW";t.UPDATE_MESSAGE_FEATURED="UPDATE_MESSAGE_FEATURED";t.REALTIME_FACE_LIST="REALTIME_FACE_LIST";t.OPEN_MAIN_SAY_CONTROL="OPEN_SAY_CONTROL";t.OPEN_EDIT_SAY_CONTROL="OPEN_EDIT_SAY_CONTROL";t.OPEN_MESSAGE_SAY_CONTROL="OPEN_MESSAGE_SAY_CONTROL";t.RANK_CONVERSATION_MESSAGE_SAY_CONTROL="RANK_CONVERSATION_MESSAGE_SAY_CONTROL";t.CLOSE_EDIT_SAY_CONTROL="CLOSE_EDIT_SAY_CONTROL";t.CLOSE_REPLY_SAY_CONTROL="CLOSE_REPLY_SAY_CONTROL";t.FOCUS_SAY_CONTROL="FOCUS_SAY_CONTROL";t.UNFOCUS_SAY_CONTROL="UNFOCUS_SAY_CONTROL";t.NOTIFY_TYPING="NOTIFY_TYPING";t.BLUR_SAY_CONTROL="BLUR_SAY_CONTROL";t.GLOBAL_REJECT_MESSAGE_END="GLOBAL_REJECT_MESSAGE_END";t.SET_COMMUNITY_QUESTION="SET_COMMUNITY_QUESTION";t.SET_IS_SETTING_COMMUNITY_QUESTION="SET_IS_SETTING_COMMUNITY_QUESTION";t.MODERATION_USER_STATUS="MODERATION_USER_STATUS";t.PIN_MESSAGE_STATUS="PIN_MESSAGE_STATUS";t.GET_MODERATION_DEFAULT_POLICY="GET_MODERATION_DEFAULT_POLICY";t.SET_MODERATION_DEFAULT_POLICY="SET_MODERATION_DEFAULT_POLICY";t.SET_USER_VOTES="SET_USER_VOTES";t.SET_MESSAGES="SET_MESSAGES";t.SHOW_REPORT_MESSAGE_MODAL="SHOW_REPORT_MESSAGE_MODAL";t.START_OPTIMIZED_MESSAGE_STACK="START_OPTIMIZED_MESSAGE_STACK";t.STOP_OPTIMIZED_MESSAGE_STACK="STOP_OPTIMIZED_MESSAGE_STACK";t.UPDATE_CONVERSATION_MESSAGES_COUNT="UPDATE_CONVERSATION_MESSAGES_COUNT";t.EXPAND_CHILDREN="EXPAND_CHILDREN";t.EXPAND_COLLAPSED_COMMENTS="EXPAND_COLLAPSED_COMMENTS";t.SAY_CONTROL_RENDERED="SAY_CONTROL_RENDERED";t.ADD_FEATURED_COMMENT="ADD_FEATURED_COMMENT";t.REMOVE_FEATURED_COMMENT="REMOVE_FEATURED_COMMENT";t.PIN_FEATURED_COMMENT="PIN_FEATURED_COMMENT";t.UPDATE_SHOULD_FETCH_FEATURED_COMMENT="UPDATE_SHOULD_FETCH_FEATURED_COMMENT";t.MUTE_USER="MUTE_USER";t.UNMUTE_USER="UNMUTE_USER";t.BLOCKLIST_USER_START="BLOCKLIST_USER_START";t.BLOCKLIST_USER_FAILED="BLOCKLIST_USER_FAILED";t.BLOCKLIST_USER_END="BLOCKLIST_USER_END";t.UPDATE_REPORTED_COMMENTS="UPDATE_REPORTED_COMMENTS";t.SHOW_NEW_MESSAGE_TOAST="SHOW_NEW_MESSAGE_TOAST";t.HIDE_NEW_MESSAGE_TOAST="HIDE_NEW_MESSAGE_TOAST";t.SET_SIGNUP_WIZARD_MESSAGE_ID="SET_SIGNUP_WIZARD_MESSAGE_ID";t.MODERATE_MESSAGE="MODERATE_MESSAGE";t.MODERATE_MESSAGE_BLOCK="MODERATE_MESSAGE_BLOCK";t.CLOSE_MODERATION_ALERT="CLOSE_MODERATION_ALERT";t.NOTIFY_MODERATION_ALERT_RENDERED="NOTIFY_MODERATION_ALERT_RENDERED";t.REALTIME_MODERATE="REALTIME_MODERATE";t.FETCH_USER_SUSPENSION_STATUS="FETCH_USER_SUSPENSION_STATUS";t.UPDATE_USER_SUSPENSION="UPDATE_USER_SUSPENSION";t.SET_COMMUNITY_VIEW="SET_COMMUNITY_VIEW";t.PRELOAD_CONVERSATION="PRELOAD_CONVERSATION";t.CHANGE_USER_DISPLAY_NAME="CHANGE_USER_DISPLAY_NAME";t.SET_FOCUS_SAY_CONTROL="SET_FOCUS_SAY_CONTROL";t.SCROLL_TO_HEADER="SCROLL_TO_HEADER";t.SET_USER_INITIALIZED="SET_USER_INITIALIZED";t.SET_CONVERSATION_STATUS="SET_CONVERSATION_STATUS";t.SET_TRANSLATION_INITIALIZED="SET_TRANSLATION_INITIALIZED";t.SET_TOKEN_INITIALIZED="SET_TOKEN_INITIALIZED";t.NOTIFY_STARS_RATING_FAILED="NOTIFY_STARS_RATING_FAILED";t.SET_READ_ONLY_CONVERSATION="SET_READ_ONLY_CONVERSATION"},50:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.combineReducers)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({authentication:d.default,moduleOptions:N.default,errors:R.default,currentUser:l.default,conversation:_.default,ui:S.default,comments:M.default,appState:D.default,isReadOnly:U.default,notifications:u.default,followers:p.default,mainSayControl:g.default,messageSayControls:T.default,postCommentAction:v.default,registration:A.default,summaryWidget:m.default,liveBlogConfig:b.default,profileHover:I.default,loadingReplies:f.default,upVotesList:y.default,isMobile:L.default,reportedComments:O.default,userSuspension:P.default,platform:c.default,typingUsers:E.default,communityView:h.default,blocklistUser:C.default,timer:function(){return null}},e))},t.getMaxMobileWidth=function(e){return N.getMaxMobileWidth(e.moduleOptions)},t.isLiveBlog=function(e){return N.isLiveBlog(e.moduleOptions)},t.getCurrentUserId=function(e){return e.currentUser.id},t.isMobile=function(e){return L.isMobileDevice(e.isMobile)},t.isMobileUA=function(e){return L.isMobileUA(e.isMobile)},t.wasAggregated=function(e,t){return M.wasAggregated(e.comments,t)},t.getMessageStack=function(e,t){return M.getMessageStack(e.comments,t)},t.isLiveBlogOnline=function(e){return b.isLiveBlogOnline(e.liveBlogConfig)},t.getEventLoction=function(e){return b.getEventLoction(e.liveBlogConfig)},t.getCurrentUser=function(e){return e.currentUser},t.getReporters=function(e){return b.getReporters(e.liveBlogConfig)},t.getLiveBlogEndDate=function(e){return 1e3*parseInt(b.getEndDate(e.liveBlogConfig))},t.getLiveBlogStartDate=function(e){return 1e3*parseInt(b.getStartDate(e.liveBlogConfig))},t.isReporter=function(e,t){return b.isReporter(e.liveBlogConfig,t)},t.hasCollapsedComments=function(e){return!!(0,s.default)(e,"comments.list.items",[]).find((function(e){var t=e.message||{};return t.isCollapsed&&t.rootMessageId===t.id}))},t.shouldAggregate=function(e){return V||"newest"!==(0,G.getSortBy)(e)||(0,E.getNumberOfTypingUsers)(e)>=j.AGGREGATE_TYPING_THRESHOLD},t.getCommunityView=function(e){return e.communityView.selectedCommunityView},t.getPreloadConversation=function(e){return e.communityView.preloadConversation},t.getShouldScrollToHeader=function(e){return e.communityView.scrollToHeader};var o=a(n(33)),i=n(23),s=a(n(109)),u=a(n(127)),c=a(n(190)),d=a(n(532)),l=a(n(63)),E=r(n(112)),f=a(n(552)),_=a(n(578)),S=a(n(304)),O=a(n(159)),p=a(n(305)),g=a(n(579)),T=a(n(580)),v=a(n(581)),A=a(n(582)),m=a(n(587)),I=a(n(589)),y=a(n(590)),R=a(n(629)),M=r(n(217)),N=r(n(668)),b=r(n(259)),L=r(n(669)),P=a(n(671)),h=a(n(672)),C=a(n(673)),D=a(n(170)),U=a(n(171)),j=n(97),G=n(346);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}try{var V="true"===window.localStorage.getItem("SPOTIM_FORCE_AGGREGATION")}catch(e){}},517:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(37)),o=r(n(38)),i=r(n(129)),s=r(n(518)),u=n(519);var c=function(e,t){return{url:(0,s.default)(e),upload:function(e,n){n||(n=(0,i.default)());var r={public_id:n,timestamp:(new Date).getTime()/1e3};return function(e){return new Promise(function(){var t=(0,o.default)(a.default.mark((function t(n,r){var o,i;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={cloudinary_params:e},t.prev=1,t.next=4,(0,u.cloudinarySign)(o);case 4:i=t.sent,n(i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}())}(r).then((function(n){return r.signature=n.signature,r.file=e,r.api_key=t,new Promise(function(){var e=(0,o.default)(a.default.mark((function e(t,n){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.uploadImage)(r);case 3:o=e.sent,t(o),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())}))}}};t.default=c},518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return function(n,r){if(!n)return"";var a,o=["q_70","fl_lossy"],i=(r=Object.assign({width:null,height:null,crop:null,opacity:null,blur:null,colorize:null,extension:null,radius:null,gravity:null,default:null},r)).extension?"."+r.extension:"";if(o.push("dpr_".concat(3)),r.height&&o.push("h_"+t(r.height)),r.width&&o.push("w_"+t(r.width)),r.crop&&o.push("c_"+r.crop),r.blur&&o.push("e_blur:"+r.blur),r.opacity&&o.push("o_"+r.opacity),r.radius&&o.push("r_"+r.radius),r.gravity&&o.push("g_"+r.gravity),r.default&&o.push("d_"+r.default),r.colorize){var s=r.colorize.replace(/#/g,"");o.push("e_colorize"),o.push("co_rgb:"+s)}return a="/"+(o.length>0?o.join(","):""),e+a+"/v200/"+n+i};function t(e){return Math.ceil(1*e)}};t.default=r},519:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.extractUrl=function(e){return s.apply(this,arguments)},t.cloudinarySign=function(e){return u.apply(this,arguments)},t.uploadImage=function(e){return c.apply(this,arguments)};var a=r(n(37)),o=r(n(38)),i=r(n(73));function s(){return(s=(0,o.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,(0,i.default)("extract",{method:"POST",data:{url:n}});case 3:return r=e.sent,o=r.body,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,o.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.default)("extract/cloudinary/sign",{method:"POST",data:t});case 2:return n=e.sent,r=n.body,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,o.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/com-3pix/image/upload",e.next=3,fetch("https://api.cloudinary.com/v1_1/com-3pix/image/upload",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},524:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportObserver=void 0;var a=r(n(35)),o=r(n(36)),i=r(n(153)),s=n(526),u=n(527),c=n(274),d=n(528),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.samplingRate,r=void 0===n?s.MEDIUM:n,o=t.container,c=void 0===o?void 0:o,d=t.isScrollableContainer,l=void 0!==d&&d;(0,a.default)(this,e),this.parentWindow=void 0,this.observedElements=[],this.isObserving=!1,this.scrollableContainer=l?c:void 0,this.handleEvent=(0,i.default)(this.handleEvent.bind(this),r),this.changeListener=new u.ViewportChangeListener(window,this.scrollableContainer),this.changeListener.onChange(this.handleEvent),c&&(this.observedContainer=this.observe(c))}return(0,o.default)(e,[{key:"setParentWindow",value:function(e,t){this.parentWindow={windowRect:e,frameRect:t},this.handleEvent()}},{key:"startObserving",value:function(){this.changeListener.start(),this.isObserving=!0}},{key:"stopObserving",value:function(){this.changeListener.stop(),this.isObserving=!1}},{key:"observe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.stateChangeHandler,a=n.rectChangeHandler;this.isObserving||this.startObserving();var o=new d.ObservedElement(e,r,a);return this.observedElements.push(o),setTimeout((function(){var e=t.scrollableContainer?(0,c.getElementRect)(t.scrollableContainer):void 0;o.renderState({parentWindow:t.parentWindow,scrollableContainerRect:e})}),0),o}},{key:"unobserve",value:function(e){this.observedElements=this.observedElements.filter((function(t){return t.element!==e})),this.isObserving&&0===this.observedElements.length&&this.stopObserving()}},{key:"handleEvent",value:function(){var e=this;if(!this.observedContainer||this.observedContainer.state.isVisible){var t=this.scrollableContainer?(0,c.getElementRect)(this.scrollableContainer):void 0;this.observedElements.forEach((function(n){n.renderState({parentWindow:e.parentWindow,scrollableContainerRect:t})}))}else this.observedContainer.renderState({parentWindow:this.parentWindow})}},{key:"getVisibilityState",value:function(e){var t,n;if(n=this.observedElements.find((function(t){return t.element===e})))t=n.state;else{n=new d.ObservedElement(e);var r=this.scrollableContainer?(0,c.getElementRect)(this.scrollableContainer):void 0;t=n.renderState({parentWindow:this.parentWindow,scrollableContainerRect:r})}return t}}]),e}();t.ViewportObserver=l},526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LOW=t.MEDIUM=t.HIGH=void 0;t.HIGH=200;t.MEDIUM=500;t.LOW=800;var r={HIGH:200,MEDIUM:500,LOW:800};t.default=r},527:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportChangeListener=void 0;var a=r(n(35)),o=r(n(36)),i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(0,a.default)(this,e),this.target=t,this.scrollableContainer=n,this.handlers=[],this.trigger=this.trigger.bind(this)}return(0,o.default)(e,[{key:"start",value:function(){this.target.addEventListener("scroll",this.trigger),this.target.addEventListener("resize",this.trigger),this.scrollableContainer&&this.scrollableContainer.addEventListener("scroll",this.trigger)}},{key:"stop",value:function(){this.target.removeEventListener("scroll",this.trigger),this.target.removeEventListener("resize",this.trigger),this.scrollableContainer&&this.scrollableContainer.removeEventListener("scroll",this.trigger)}},{key:"onChange",value:function(e){"function"==typeof e&&this.handlers.push(e)}},{key:"trigger",value:function(){this.handlers.forEach((function(e){return e()}))}}]),e}();t.ViewportChangeListener=i},528:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ObservedElement=void 0;var a=r(n(35)),o=r(n(36)),i=n(529),s=n(274),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};(0,a.default)(this,e),this.element=t,this.state=i.initialState,this.stateChangeHandler=n,this.rectChangeHandler=r}return(0,o.default)(e,[{key:"renderState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parentWindow,n=e.scrollableContainerRect,r=(0,s.getElementRect)(this.element),a=(0,s.getWindowRect)(),o=r;t&&(o=o.addFrameRect(t.frameRect));var u=r.intersect(a);return n&&(u=u.intersect(n)),t&&(u=(u=u.addFrameRect(t.frameRect)).intersect(t.windowRect)),this.rectChangeHandler(a,r,o),this.state=(0,i.getVisibilityState)(u,r,o,this.state),this.stateChangeHandler(this.state),this.state}}]),e}();t.ObservedElement=u},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibilityState=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!1,s=0,u=0;if(!e.isNegative())if(i=!0,t.isEmpty())s=1;else{var c=t.getArea();u=e.getArea(),s=u/c}var d=(0,r.getStatus)(i,s,u),l=(0,a.getChange)(o.status,d),E=l!==a.UNCHANGED;l===a.UNCHANGED&&(l=o.change);return{isVisible:i,visiblityRatio:s,visibleArea:u,status:d,elementRect:t,visibleRect:e,viewportRect:n,change:l,hasChange:E}},t.initialState=void 0;var r=n(275),a=n(530),o={isVisible:!1,visiblityRatio:0,visibleArea:0,status:r.NOT_VISIBLE,change:a.UNCHANGED};t.initialState=o},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChange=function(e,t){var n="UNCHANGED";e!==t&&(e===r.NOT_VISIBLE?t===r.LESS_HALF_VISIBLE?n="LESS_HALF_ENTER":t===r.MORE_HALF_VISIBLE?n="MORE_HALF_ENTER":t===r.FULL_VISIBLE&&(n="FULL_ENTER"):e===r.LESS_HALF_VISIBLE?t===r.NOT_VISIBLE?n="FULL_LEAVE":t===r.MORE_HALF_VISIBLE?n="MORE_HALF_ENTER":t===r.FULL_VISIBLE&&(n="FULL_ENTER"):e===r.MORE_HALF_VISIBLE?t===r.NOT_VISIBLE?n="FULL_LEAVE":t===r.LESS_HALF_VISIBLE?n="MORE_HALF_LEAVE":t===r.FULL_VISIBLE&&(n="FULL_ENTER"):e===r.FULL_VISIBLE&&(t===r.NOT_VISIBLE?n="FULL_LEAVE":t===r.LESS_HALF_VISIBLE?n="MORE_HALF_LEAVE":t===r.MORE_HALF_VISIBLE&&(n="LESS_HALF_LEAVE")));return n},t.VISIBILITY_CHANGE=t.FULL_LEAVE=t.MORE_HALF_LEAVE=t.LESS_HALF_LEAVE=t.FULL_ENTER=t.MORE_HALF_ENTER=t.LESS_HALF_ENTER=t.UNCHANGED=void 0;var r=n(275);t.UNCHANGED="UNCHANGED";t.LESS_HALF_ENTER="LESS_HALF_ENTER";t.MORE_HALF_ENTER="MORE_HALF_ENTER";t.FULL_ENTER="FULL_ENTER";t.LESS_HALF_LEAVE="LESS_HALF_LEAVE";t.MORE_HALF_LEAVE="MORE_HALF_LEAVE";t.FULL_LEAVE="FULL_LEAVE";var a={UNCHANGED:"UNCHANGED",LESS_HALF_ENTER:"LESS_HALF_ENTER",MORE_HALF_ENTER:"MORE_HALF_ENTER",FULL_ENTER:"FULL_ENTER",LESS_HALF_LEAVE:"LESS_HALF_LEAVE",MORE_HALF_LEAVE:"MORE_HALF_LEAVE",FULL_LEAVE:"FULL_LEAVE"};t.VISIBILITY_CHANGE=a},531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ssoDataMap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;e.length>0&&(e+=".");return function(){return Object.assign({is_subscriber:"".concat(e,"isSubscriber")},t)}}},532:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getToken=function(e){return e.token},t.getNetworkId=function(e){return e.networkId},t.default=void 0;var a,o=r(n(33)),i=n(19),s=n(276),u=n(533),c=n(534),d=r(n(535));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={status:{isLoading:!1,error:void 0,hasData:!1},networkId:void 0,token:void 0},_=(0,i.handleActions)((a={},(0,o.default)(a,c.FETCH_AUTHENTICATION_START,(function(e){return E(E({},e),{},{status:{isLoading:!0}})})),(0,o.default)(a,s.FETCH_AUTHENTICATION_END,d.default),(0,o.default)(a,u.FETCH_AUTHENTICATION_FAIL,(function(e,t){var n=t.payload.error;return E(E({},e),{},{status:{isLoading:!1,error:n}})})),a),f);t.default=_},533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAuthenticationFail=function(e){return{type:"FETCH_AUTHENTICATION_FAIL",payload:{error:e},error:!0}},t.FETCH_AUTHENTICATION_FAIL=void 0;t.FETCH_AUTHENTICATION_FAIL="FETCH_AUTHENTICATION_FAIL"},534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAuthenticationStart=function(){return{type:"FETCH_AUTHENTICATION_START"}},t.FETCH_AUTHENTICATION_START=void 0;t.FETCH_AUTHENTICATION_START="FETCH_AUTHENTICATION_START"},535:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(33));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e,t){var n=t.payload,r=n.networkId,a=n.token;return""===r&&(r="spotim"),i(i({},e),{},{networkId:r,token:a,status:{isLoading:!1,hasData:!0}})}},536:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.profileImageUpload=function(e){var t=e.rawImage;return function(){var e=(0,o.default)(a.default.mark((function e(n){var r,o,l,E;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.metrics.apm.start("profile_image_upload"),e.next=4,c.cloudinary.upload(t);case 4:if(r=e.sent,o=r.public_id){e.next=8;break}throw new Error("no public id");case 8:return e.next=10,(0,d.updateProfileImage)(o);case 10:l=e.sent,E=(0,i.parseUser)(l.body),n({type:"RESPONSE_PROFILE_IMAGE_UPLOAD",payload:E}),u.default.set(E),s.metrics.apm.end("profile_image_upload"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),n({type:"RESPONSE_PROFILE_IMAGE_UPLOAD",payload:{error:e.t0},error:!0}),s.metrics.error("profileImageUpload",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}()},t.RESPONSE_PROFILE_IMAGE_UPLOAD=void 0;var a=r(n(37)),o=r(n(38)),i=n(78),s=n(3),u=r(n(20)),c=n(95),d=n(277);t.RESPONSE_PROFILE_IMAGE_UPLOAD="RESPONSE_PROFILE_IMAGE_UPLOAD"},537:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getModerationTickets=function(){return function(){var e=(0,o.default)(a.default.mark((function e(t,n){var r,o,u,c,d,l,E;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),o=r.moduleOptions.spotId,u=r.conversation.postId,e.next=3,(0,s.getModerationTicketsResource)({spotId:o,postId:u});case 3:c=e.sent,d=c.moderationTickets,t({type:"GET_MODERATION_TICKETS_END",payload:{moderationTickets:d}}),l=n(),E=l.currentUser,i.default.set(E);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},t.GET_MODERATION_TICKETS_END=void 0;var a=r(n(37)),o=r(n(38)),i=r(n(20)),s=n(277);t.GET_MODERATION_TICKETS_END="GET_MODERATION_TICKETS_END"},552:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=n(19),s=n(114);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(0,i.handleActions)((a={},(0,o.default)(a,s.GET_REPLIES_START,(function(e,t){var n=t.payload.parentMessageId;return c(c({},e),{},{isLoading:!0,rootMessageId:n})})),(0,o.default)(a,s.GET_REPLIES_END,(function(e,t){var n=t.payload.parentMessage;return c(c({},e),{},{isLoading:!1,rootMessageId:n.id})})),a),{rootMessageId:null,isLoading:!1});t.default=d},564:function(e,t){},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageEntityMap=a,t.getMessageEntitiesMap=function(e,t){return(0,r.array)(a("",t),e)};var r=n(189);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.length>0&&(e+="."),function(){return Object.assign({type:"".concat(e,"type"),id:"".concat(e,"id"),text:"".concat(e,"text"),imageId:"".concat(e,"imageId"),originalHeight:"".concat(e,"originalHeight"),originalWidth:"".concat(e,"originalWidth"),mediaHeight:"".concat(e,"mediaHeight"),mediaWidth:"".concat(e,"mediaWidth"),thumbnailHeight:"".concat(e,"thumbnailHeight"),thumbnailWidth:"".concat(e,"thumbnailWidth"),title:"".concat(e,"title"),description:"".concat(e,"description"),url:"".concat(e,"url"),originalUrl:"".concat(e,"originalUrl"),previewUrl:"".concat(e,"previewUrl"),previewHeight:"".concat(e,"previewHeight"),previewWidth:"".concat(e,"previewWidth"),embed:"".concat(e,"embed"),frameType:"".concat(e,"frameType"),userId:"".concat(e,"userId")},t)}}},578:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(n(33)),s=n(19),u=r(n(21)),c=a(n(303)),d=n(39),l=n(90),E=n(116);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=c.createConversationObject(),O=(0,s.handleActions)((o={},(0,i.default)(o,d.INITIALIZE_CONVERSATION,(function(e,t){var n=t.payload;return c.createConversationObject(_(_(_({},S),n.conversation),{},{starRatingSummary:n.starRatingSummary}))})),(0,i.default)(o,d.CLEAR_CONVERSATION,(function(){return S})),(0,i.default)(o,d.FETCH_CONVERSATION_END,(function(e,t){var n=t.payload.conversation;return c.createConversationObject(_(_({},e),n))})),(0,i.default)(o,d.CREATE_MESSAGE_START,(0,u.default)((function(e,t){var n=t.payload.message;(0,l.isRootMessage)(n)?e.isSubmittingComment=!0:(e.isSubmittingReply=!0,e.submittedReplyParentMessageId=n.parentMessageId)}))),(0,i.default)(o,d.CREATE_MESSAGE_END,(0,u.default)((function(e,t){var n=t.payload,r=n.message;n.isRetry||((0,E.isEmptyMessage)(r)||e.messagesCount++,(0,l.isRootMessage)(r)&&e.commentsCount++,r.starsRating>0&&(e.starsRatingCount+=1,e.averageStarsRating=(e.averageStarsRating*e.starsRatingCount+r.starsRating)/e.starsRatingCount)),e.hasCommented=!0,(0,l.isRootMessage)(r)?e.isSubmittingComment=!1:(e.isSubmittingReply=!1,e.submittedReplyParentMessageId=r.parentMessageId)}))),(0,i.default)(o,(0,s.combineActions)(d.MODERATE_MESSAGE_BLOCK,d.UPDATE_USER_SUSPENSION),(0,u.default)((function(e,t){var n=t.payload.message;n&&((0,l.isRootMessage)(n)?e.isSubmittingComment=!1:(e.isSubmittingReply=!1,delete e.submittedReplyParentMessageId))}))),(0,i.default)(o,d.CLOSE_REPLY_SAY_CONTROL,(0,u.default)((function(e,t){e.isSubmittingReply=!1,delete e.submittedReplyParentMessageId}))),(0,i.default)(o,(0,s.combineActions)(d.DELETE_MESSAGE_START,d.REJECT_MESSAGE_START),(0,u.default)((function(e,t){var n=t.payload.message;n.starsRating>0&&(e.starsRatingCount-=1,e.averageStarsRating=(e.averageStarsRating*e.starsRatingCount-n.starsRating)/e.starsRatingCount),e.messagesCount--,0===n.depth&&e.commentsCount--}))),(0,i.default)(o,(0,s.combineActions)(d.DELETE_MESSAGE_END,d.REJECT_MESSAGE_END),(function(e,t){var n=t.payload,r=n.conversation,a=n.starsRating;return c.removeStarsRatingVote(c.createConversationObject(_(_({},e),r)),a)})),(0,i.default)(o,d.EDIT_MESSAGE_START,(function(e,t){var n=t.payload,r=n.conversation,a=n.message;return c.createConversationObject(_(_(_({},e),r),{},{isSubmittingEdit:!0,editedMessageId:a.id}))})),(0,i.default)(o,d.EDIT_MESSAGE_END,(function(e,t){var n=t.payload.conversation;return c.createConversationObject(_(_(_({},e),n),{},{isSubmittingEdit:!1,editedMessageId:void 0}))})),(0,i.default)(o,d.GET_STARS_RATING_SUMMARY,(function(e,t){var n=t.payload,r=n.averageStarsRating,a=n.starsRatingCount;return c.createConversationObject(_(_({},e),{},{averageStarsRating:r,starsRatingCount:a}))})),(0,i.default)(o,d.REALTIME_MESSAGE_NEW,(function(e,t){var n=t.payload.conversation;return c.createConversationObject(_(_({},e),n))})),(0,i.default)(o,d.RESPONSE_TOGGLE_HIDE_CONVERSATION,(function(e){return c.createConversationObject(_(_({},e),{},{isHidden:!e.isHidden}))})),(0,i.default)(o,d.GET_MODERATION_DEFAULT_POLICY,{next:function(e,t){var n=t.payload.defaultPolicy;return c.createConversationObject(_(_({},e),{},{defaultPolicy:n}))}}),(0,i.default)(o,d.UPDATE_CONVERSATION_MESSAGES_COUNT,(0,u.default)((function(e,t){e.messagesCount=t.payload.replies+t.payload.comments,e.commentsCount=t.payload.comments}))),(0,i.default)(o,d.UPDATE_SHOULD_FETCH_FEATURED_COMMENT,(0,u.default)((function(e,t){e.shouldFetchFeaturedComment=t.payload}))),(0,i.default)(o,d.SET_IS_SETTING_COMMUNITY_QUESTION,(0,u.default)((function(e,t){e.isSettingCommunityQuestion=t.payload.isSettingCommunityQuestion}))),o),S);t.default=O},579:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(n(33)),s=n(19),u=n(39),c=a(n(91)),d=n(133),l=n(160);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,s.handleActions)((o={},(0,i.default)(o,u.OPEN_MAIN_SAY_CONTROL,{next:function(e){return f(f({},e),{},{expanded:!1})}}),(0,i.default)(o,u.FOCUS_SAY_CONTROL,{next:function(e,t){var n=t.payload.stackId;return f(f({},e),{},n?{expanded:!1}:{expanded:!0})}}),(0,i.default)(o,u.UNFOCUS_SAY_CONTROL,{next:function(e){return f(f({},e),{},{expanded:!1})}}),(0,i.default)(o,u.CREATE_MESSAGE_START,{next:function(e,t){t.payload.message;return f(f({},e),{},{isStarsRatingFailed:!1})}}),(0,i.default)(o,u.CREATE_MESSAGE_END,{next:function(e,t){var n=t.payload.message;return(null==n?void 0:n.parentMessageId)?e:f(f({},e),{},{starsRating:0,isMessageBlocked:!1,isModerationAlertVisible:!1,verdict:"",tempMessageId:null,isStarsRatingFailed:!1})}}),(0,i.default)(o,u.RANK_CONVERSATION,{next:function(e,t){var n=t.payload.starsRating;return f(f({},e),{},{starsRating:n})}}),(0,i.default)(o,u.NOTIFY_STARS_RATING_FAILED,{next:function(e,t){t.payload.message;return f(f({},e),{},{isStarsRatingFailed:!0})}}),(0,i.default)(o,u.CLOSE_MODERATION_ALERT,{next:function(e,t){return t.payload.parentMessageId||!e.isMessageBlocked?e:f(f({},e),{},{isModerationAlertVisible:!1})}}),(0,i.default)(o,u.MODERATE_MESSAGE_BLOCK,{next:function(e,t){var n=t.payload,r=n.message,a=n.taggers,o=n.verdict,i=n.tempId;return(null==r?void 0:r.parentMessageId)?e:f(f({},e),{},{isMessageBlocked:!0,isModerationAlertVisible:!0,moderationTags:a,verdict:o,tempMessageId:i})}}),(0,i.default)(o,u.NOTIFY_MODERATION_ALERT_RENDERED,{next:function(e,t){return f(f({},e),{},{isModerationAlertRendered:!0})}}),(0,i.default)(o,u.REALTIME_MODERATE,{next:function(e,t){var n=t.payload,r=n.error,a=n.parentMessageId,o=n.tags,i=n.verdict;if(a||r||e.isMessageBlocked)return e;var s=c.isRealtimeMessageBlocked(i,o),u={isModerationAlertVisible:s,moderationTags:s?o:[],verdict:s?i:null};return f(f({},e),u)}}),(0,i.default)(o,(0,s.combineActions)(u.UPDATE_USER_SUSPENSION,u.FETCH_USER_SUSPENSION_STATUS),{next:function(e,t){var n=t.payload,r=n.isUserSuspended,a=n.verdict,o=n.moderationTags,i={verdict:r?a||l.TPolicyVerdict.BLOCK_ALL:null,moderationTags:r?o||[d.TPolicyTag.SUSPENDED]:[],isMessageBlocked:r,isModerationAlertVisible:r};return f(f({},e),i)}}),o),{expanded:!1,starsRating:0,isMessageBlocked:!1,isModerationAlertVisible:!1,isModerationAlertRendered:!1,moderationTags:[],verdict:null,tempMessageId:null,isStarsRatingFailed:!1});t.default=_},580:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(n(33)),s=n(19),u=n(39),c=a(n(91)),d=n(133),l=n(160);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={settings:{isModerationAlertRendered:!1,isUserSuspended:!1}},S=(0,s.handleActions)((o={},(0,i.default)(o,u.INITIALIZE_CONVERSATION,{next:function(e,t){var n=t.payload.highlight,r=void 0===n?{}:n,a=_,o=r.id;return!0===r.isSayControlExpanded&&(a=f(f({},a),{},(0,i.default)({},o,O()))),a}}),(0,i.default)(o,u.CLEAR_CONVERSATION,(function(){return _})),(0,i.default)(o,u.OPEN_MESSAGE_SAY_CONTROL,{next:function(e,t){var n=t.payload.messageId,r=e[n]&&Object.assign({},e[n]),a=r&&r.isRendered;r&&!r.isCreate?r.isCreate=!0:r=O({isCreate:!0,isRendered:a},e.settings.isUserSuspended),r&&void 0===a&&(r.isRendered=!1);var o=Object.assign({},e);return Object.keys(o).forEach((function(e){o[e].isCreate=!1,o[e].isRendered=!1})),o[n]=r,o}}),(0,i.default)(o,u.SAY_CONTROL_RENDERED,(function(e,t){t.payload.messageId})),(0,i.default)(o,u.SAY_CONTROL_RENDERED,(function(e,t){var n=t.payload.messageId,r=e[n];if(r){r=f(f({},r),{},{isRendered:!0});var a=f({},e);return a[n]=r,a}})),(0,i.default)(o,u.OPEN_EDIT_SAY_CONTROL,(function(e,t){var n=t.payload,r=n.messageId,a=n.starsRating,o=e[r],i=o&&o.isRendered;(o=o?f(f({},o),{},{starsRating:a,isEdit:!0}):O({starsRating:a,isEdit:!0,isRendered:i}))&&void 0===i&&(o.isRendered=!1);var s=f({},e);return s[r]=o,s})),(0,i.default)(o,u.RANK_CONVERSATION_MESSAGE_SAY_CONTROL,(function(e,t){var n=t.payload,r=n.starsRating,a=n.messageId;return e[a]=f(f({},e[a]),{},{starsRating:r}),f({},e)})),(0,i.default)(o,u.CREATE_MESSAGE_START,(function(e,t){var n=t.payload.message,r=void 0===n?null:n,a=f({},e);if(r&&r.parentMessageId){var o=e[r.parentMessageId];o||(o=O()),o.isCreate=!0,a[r.parentMessageId]=o}return a})),(0,i.default)(o,u.EDIT_MESSAGE_END,(function(e){var t=f({},e);return p(Object.keys(t).map((function(e){return t[e]}))),t})),(0,i.default)(o,u.CLOSE_EDIT_SAY_CONTROL,(function(e,t){var n=t.payload.messageId,r=f({},e);return r[n].isEdit=!1,r[n].isRendered=!1,r})),(0,i.default)(o,u.CLOSE_REPLY_SAY_CONTROL,(function(e,t){var n=t.payload.messageId,r=f({},e);return r[n].isCreate=!1,r[n].isRendered=!1,r})),(0,i.default)(o,u.CREATE_MESSAGE_END,(function(e,t){var n=t.payload.message.parentMessageId;if(!n)return e;var r=f({},e);return r[n]=O({isMessageBlocked:!1,isModerationAlertVisible:!1,isStarsRatingFailed:!1,moderationTags:[],verdict:void 0}),r})),(0,i.default)(o,u.FETCH_CONVERSATION_END,{next:function(e,t){var n=t.payload.highlight,r=void 0===n?{}:n,a=e,o=r.id;return!0===r.isSayControlExpanded&&(e[o]=O(),a=f({},e)),p(Object.keys(a).map((function(e){return a[e]}))),a}}),(0,i.default)(o,u.MODERATE_MESSAGE_BLOCK,{next:function(e,t){var n=t.payload,r=n.message,a=n.taggers,o=n.verdict,i=n.tempId,s=f({},e);if(r&&r.parentMessageId){var u=e[r.parentMessageId];u||(u=O()),u.isMessageBlocked=!0,u.isCreate=!0,u.isModerationAlertVisible=!0,u.moderationTags=a,u.verdict=o,u.tempMessageId=i,s[r.parentMessageId]=u}return s}}),(0,i.default)(o,u.CLOSE_MODERATION_ALERT,{next:function(e,t){var n=t.payload.parentMessageId,r=f({},e);if(n){var a=e[n];a||(a=O()),a.isModerationAlertVisible=!1,r[n]=a}return r}}),(0,i.default)(o,u.NOTIFY_MODERATION_ALERT_RENDERED,{next:function(e,t){var n=f(f({},e.settings),{},{isModerationAlertRendered:!0});return f(f({},e),{},{settings:n})}}),(0,i.default)(o,u.REALTIME_MODERATE,{next:function(e,t){var n=t.payload,r=n.error,a=n.parentMessageId,o=n.tags,i=n.verdict;if(r||e.isMessageBlocked||e.settings.isUserSuspended)return e;var s=c.isRealtimeMessageBlocked(i,o),u=f({},e);if(a){var d=e[a];d||(d=O()),d.isModerationAlertVisible=s,d.moderationTags=s?o:[],d.verdict=s?i:null,u[a]=d}return u}}),(0,i.default)(o,(0,s.combineActions)(u.UPDATE_USER_SUSPENSION,u.FETCH_USER_SUSPENSION_STATUS),{next:function(e,t){var n=t.payload,r=n.isUserSuspended,a=n.verdict,o=n.moderationTags,s=f(f({},e.settings),{},{isUserSuspended:r}),u=r?Object.keys(e).filter((function(e){return"settings"!==e})).reduce((function(t,n){return f(f({},t),{},(0,i.default)({},n,f(f({},e[n]),{},{isMessageBlocked:!0,isModerationAlertVisible:!0,moderationTags:o||[d.TPolicyTag.SUSPENDED],verdict:a||l.TPolicyVerdict.BLOCK_ALL})))}),{}):e;return f(f({},u),{},{settings:s})}}),o),_);function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f({starsRating:0,isExpanded:!0,isEdit:!1,isCreate:!1,isMessageBlocked:t,isModerationAlertVisible:t,moderationTags:t?[d.TPolicyTag.SUSPENDED]:[],verdict:t?l.TPolicyVerdict.BLOCK_ALL:null,tempMessageId:null},e)}function p(e){e.map((function(e){Object.assign(e,{isCreate:!1,isEdit:!1,isRendered:!1,isMessageBlocked:!1,isModerationAlertVisible:!1,moderationTags:[],verdict:null,tempMessageId:null})}))}t.default=S},581:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=n(19),s=n(202),u=n(39),c=n(63),d=n(90);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=(0,i.handleActions)((a={},(0,o.default)(a,s.CLOSE_SIGNUP_WIZARD,(function(e){return E(E({},e),{},{enabled:!1})})),(0,o.default)(a,u.SET_CURRENT_USER,(function(e,t){var n=t.payload.currentUser;return E(E({},e),{},{enabled:!(0,c.isLoggedIn)(n)})})),(0,o.default)(a,u.CREATE_MESSAGE_START,(function(e,t){var n=t.payload,r=n.message,a=n.isLoggedIn;return E(E({},e),{},{enabled:(0,d.isRootMessage)(r)&&a})})),a),{enabled:!1});t.default=f},582:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=n(19),s=n(203),u=n(584),c=n(585),d=n(586);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={verifyEmailSent:!1,emailSignupUser:null,emailSignupStatus:d.NONE,emailSignupErrorType:null,username:null,usernameAvailable:!1,usernameSuggestions:[],usernameLoading:!1},_=(0,i.handleActions)((a={},(0,o.default)(a,s.RESPONSE_VERIFY_EMAIL,{next:function(e){return E(E({},e),{},{verifyEmailSent:!0})}}),(0,o.default)(a,s.REQUEST_VERIFY_USERNAME,{next:function(e){return E(E({},e),{},{usernameLoading:!0})}}),(0,o.default)(a,s.RESPONSE_VERIFY_USERNAME,{next:function(e,t){var n=t.payload,r=n.username,a=n.isAvailable,o=n.suggestions;return E(E({},e),{},{usernameLoading:!1,username:r,usernameAvailable:a,usernameSuggestions:o})},throw:function(e){return E(E({},e),{},{usernameLoading:!1})}}),(0,o.default)(a,u.REQUEST_SET_CURRENT_USER_EMAIL_SIGNUP,{next:function(e){return E(E({},e),{},{emailSignupStatus:d.LOADING})}}),(0,o.default)(a,u.RESPONSE_SET_CURRENT_USER_EMAIL_SIGNUP,{next:function(e,t){var n=t.error,r=t.payload,a=r.currentUser,o=r.error;return n?(e.emailSignupStatus=d.ERROR,e.emailSignupErrorType=o):(e.emailSignupStatus=d.SUCCESS,e.emailSignupUser=a),E({},e)},throw:function(e,t){var n=t.payload.error;return E(E({},e),{},{emailSignupStatus:d.ERROR,emailSignupErrorType:n&&n.body&&n.body.type||""})}}),(0,o.default)(a,c.SET_CURRENT_USER_RESET,{next:function(e){return E(E({},e),{},{emailSignupStatus:d.NONE,emailSignupErrorType:null,currentUser:null})}}),a),f);t.default=_},583:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.verifyEmailStart=function(e){var t=e.email,n=e.url,r=e.spotId,o={email:t,spot_id:r,referer_url:n};return(0,a.default)("email-connect/verify-start",{method:"POST",data:o})};var a=r(n(73))},584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESPONSE_SET_CURRENT_USER_EMAIL_SIGNUP=t.REQUEST_SET_CURRENT_USER_EMAIL_SIGNUP=void 0;t.REQUEST_SET_CURRENT_USER_EMAIL_SIGNUP="REQUEST_SET_CURRENT_USER_EMAIL_SIGNUP";t.RESPONSE_SET_CURRENT_USER_EMAIL_SIGNUP="RESPONSE_SET_CURRENT_USER_EMAIL_SIGNUP"},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{type:"SET_CURRENT_USER_RESET",payload:{}}},t.SET_CURRENT_USER_RESET=void 0;t.SET_CURRENT_USER_RESET="SET_CURRENT_USER_RESET"},586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOADING=t.ERROR=t.SUCCESS=t.NONE=void 0;t.NONE="none";t.SUCCESS="success";t.ERROR="error";t.LOADING="loading"},587:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(n(33)),s=n(19),u=a(n(588)),c=n(39);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=u.createRatingSummary(),f=(0,s.handleActions)((o={},(0,i.default)(o,c.CREATE_MESSAGE_START,{next:function(e,t){var n=t.payload.message.starsRating;return n>0?u.addRating(e,n):e}}),(0,i.default)(o,c.EDIT_MESSAGE_START,{next:function(e,t){var n=t.payload.message,r=n.oldStarsRating,a=n.starsRating;return u.removeRating(u.addRating(e,a),r)}}),(0,i.default)(o,c.GET_STARS_RATING_SUMMARY,{next:function(e,t){var n=t.payload,r=n.segments,a=n.isExpanded;return u.createRatingSummary(l(l({},e),{},{segments:r,isExpanded:a}))}}),o),E);t.default=f},588:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createRatingSummary=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i({isExpanded:!1,segments:[]},e)},t.addRating=function(e,t){var n=JSON.parse(JSON.stringify(e));return n.segments[t-1]++,n},t.removeRating=function(e,t){var n=JSON.parse(JSON.stringify(e));return n.segments[t-1]--,n},t.getSegmentsList=function(e){return e.segments},t.toJSON=function(e){return{isExpanded:e.isExpanded,segments:e.segments}};var a=r(n(33));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},589:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=n(19),s=n(78),u=n(39);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=(0,i.handleActions)((a={},(0,o.default)(a,u.GET_BASIC_USER_PROFILE_START,{next:function(e){return d(d({},e),{},{loading:!0})}}),(0,o.default)(a,u.GET_BASIC_USER_PROFILE_END,{next:function(e,t){var n=t.payload.user;return d(d({},e),{},{loading:!1,user:(0,s.createUserObject)(n)})},throw:function(e){return d(d({},e),{},{loading:!1,user:null})}}),a),{loading:!1,user:null,error:null});t.default=l},590:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=n(19),s=r(n(591)),u=n(78),c=n(39);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={conversationId:null,loading:!1,users:[],error:null,offset:0,count:0},f=(0,i.handleActions)((a={},(0,o.default)(a,c.RESET_UP_VOTES,{next:function(e){return l(l({},e),E)}}),(0,o.default)(a,c.REQUEST_GET_UP_VOTES,{next:function(e,t){var n=t.payload,r=n.offset,a=n.conversationId;return l(l({},e),{},{conversationId:a,loading:!0,users:0===r?[]:e.users,offset:r})}}),(0,o.default)(a,c.RESPONSE_GET_UP_VOTES,{next:function(e,t){var n=t.payload,r=n.conversationId,a=n.users,o=n.offset,i=n.count;a=a.map(u.createUserObject);var c=e.users;return 0===o?c=a:a.length>0&&(c=(0,s.default)(c,a,"id")),l(l({},e),{},{conversationId:r,loading:!1,users:c,offset:o,count:i})},throw:function(e){return l(l({},e),{},{loading:!1,conversationId:null,users:[]})}}),a),E);t.default=f},629:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87)),o=n(19),i=n(114),s=n(134),u=n(135),c=n(166),d=n(167),l=n(168),E=n(39),f=n(663),_=n(664),S=n(203);var O=(0,o.handleActions)([E.INITIALIZE_CONVERSATION,E.CLEAR_CONVERSATION,E.INITIALIZE_MODULE_OPTIONS,E.FETCH_CONVERSATION_START,E.FETCH_CONVERSATION_END,i.GET_REPLIES_START,i.GET_REPLIES_END_ERROR,E.CREATE_MESSAGE_START,E.CREATE_MESSAGE_END,E.CLEAN_FAILED_MESSAGE,E.DELETE_MESSAGE_START,E.DELETE_MESSAGE_END,E.REJECT_MESSAGE_START,E.REJECT_MESSAGE_END,E.EDIT_MESSAGE_START,E.EDIT_MESSAGE_END,E.VOTE_TOGGLE_MESSAGE_END,E.REPORT_MESSAGE_END,E.REALTIME_MESSAGE_NEW,s.UPDATED_MESSAGES,u.REALTIME_MESSAGE_VOTE,c.DELETE_MESSAGES,d.REJECT_MESSAGES,E.FOCUS_SAY_CONTROL,E.UNFOCUS_SAY_CONTROL,E.OPEN_MAIN_SAY_CONTROL,E.OPEN_EDIT_SAY_CONTROL,E.CLOSE_EDIT_SAY_CONTROL,l.EXPAND_AGGREGATED_MESSAGES,E.RANK_CONVERSATION,E.TOGGLE_MARK_MESSAGE,E.GET_BASIC_USER_PROFILE_START,E.GET_BASIC_USER_PROFILE_END,f.SCROLL_HOST_START,_.SCROLL_HOST_STOP,E.GET_STARS_RATING_SUMMARY,E.REQUEST_GET_UP_VOTES,E.RESPONSE_GET_UP_VOTES,S.REQUEST_VERIFY_EMAIL,S.RESPONSE_VERIFY_EMAIL].reduce((function(e,t){return e[t]=function(e){return{throw:function(t,n){var r=n.payload.error;return console.log("ERROR",e,r),[].concat((0,a.default)(t),[r])},next:function(e){return e}}}(t),e}),{}),[]);t.default=O},63:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"profileImageUpload",{enumerable:!0,get:function(){return u.profileImageUpload}}),Object.defineProperty(t,"getModerationTickets",{enumerable:!0,get:function(){return c.getModerationTickets}}),Object.defineProperty(t,"isLoggedIn",{enumerable:!0,get:function(){return l.isLoggedIn}}),Object.defineProperty(t,"getDisplayName",{enumerable:!0,get:function(){return l.getDisplayName}}),t.default=void 0;var a,o=r(n(33)),i=n(19),s=r(n(21)),u=n(536),c=n(537),d=n(39),l=n(20);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={notificationsCount:0,messagesVoted:void 0},S=(0,i.handleActions)((a={},(0,o.default)(a,d.SET_CURRENT_USER,(function(e,t){var n=t.payload.currentUser;return f(f(f({},e),n),{},{isLoading:!1})})),(0,o.default)(a,u.RESPONSE_PROFILE_IMAGE_UPLOAD,{next:(0,s.default)((function(e,t){var n=t.payload.imageId;e.imageId=n})),throw:function(e,t){var n=t.payload.error;return console.log("ERROR",u.RESPONSE_PROFILE_IMAGE_UPLOAD,n),e}}),(0,o.default)(a,c.GET_MODERATION_TICKETS_END,(0,s.default)((function(e,t){var n=t.payload.moderationTickets;e.moderationTickets=n}))),(0,o.default)(a,d.CHANGE_USER_DISPLAY_NAME,(0,s.default)((function(e,t){var n=t.payload.displayName;e.displayName=n}))),a),_);t.default=S},663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{type:"SCROLL_HOST_START"}},t.SCROLL_HOST_START=void 0;t.SCROLL_HOST_START="SCROLL_HOST_START"},664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{type:"SCROLL_HOST_STOP"}},t.SCROLL_HOST_STOP=void 0;t.SCROLL_HOST_STOP="SCROLL_HOST_STOP"},665:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(n(33)),s=n(19),u=r(n(21)),c=n(51),d=a(n(96)),l=n(39),E=r(n(345)),f=r(n(666)),_=n(134),S=n(135),O=n(166),p=n(169),g=r(n(667)),T=n(114),v=n(167),A=(0,s.handleActions)((o={},(0,i.default)(o,(0,s.combineActions)(l.INITIALIZE_CONVERSATION,l.FETCH_CONVERSATION_END,l.CREATE_MESSAGE_START,l.CREATE_MESSAGE_END,l.CLEAN_FAILED_MESSAGE,l.ADD_HIGHLIGHTED_MESSAGE),(0,u.default)((function(e,t){e.messages=(0,f.default)(e.messages,t),e.rootOrder=(0,g.default)(e.rootOrder,t)}))),(0,i.default)(o,l.REALTIME_MESSAGE_NEW,(0,u.default)((function(e,t){var n=t.payload,r=n.message,a=n.shouldAggregate,o=n.messageStack;if(0===r.depth)a&&!r.featuredComment?(o.isAggregated=!0,e.aggregatedMessage.push(r.id)):e.rootOrder.unshift(r.id),o.isLastMessage=!0;else{var i=e.messages[r.parentMessageId];if(i){var s=i.message;o.message.depth=s.depth+1,o.message.replyToDisplayName=s.userDisplayName||s.user.displayName,o.message.replyToUsername=s.user.username,i.isLastMessage=!1,i.isAggregated&&(o.isAggregated=!0,e.aggregatedMessage.push(r.id)),i.childrenStackIds.push(r.id),i.message.repliesCount++}}e.messages[r.id]=o}))),(0,i.default)(o,"EDIT_MESSAGE",(0,u.default)((function(e,t){e.messages[t.payload.message.id]=t.payload.message}))),(0,i.default)(o,(0,s.combineActions)(l.EDIT_MESSAGE_START,l.EDIT_MESSAGE_END).toString(),{next:(0,u.default)((function(e,t){var n=t.payload.message.id;e.messages[n]=(0,E.default)(e.messages[n],t)})),throw:(0,u.default)((function(e,t){var n=t.payload.message.id;e.messages[n]=(0,E.default)(e.messages[n],t)}))}),(0,i.default)(o,(0,s.combineActions)(_.UPDATED_MESSAGES,S.REALTIME_MESSAGE_VOTE,l.TOGGLE_MARK_MESSAGE,l.VOTE_TOGGLE_MESSAGE_START,l.PIN_MESSAGE_STATUS,l.MODERATION_USER_STATUS,T.GET_REPLIES_END,p.GET_PREVIOUS_REPLIES_END,l.REPORT_MESSAGE_END,l.MUTE_USER,l.UNMUTE_USER).toString(),(0,u.default)((function(e,t){e.messages=(0,f.default)(e.messages,t)}))),(0,i.default)(o,(0,s.combineActions)(l.DELETE_MESSAGE_START).toString(),(0,u.default)((function(e,t){var n=t.payload.message,r=d.findByMessageId(e,n.id);if(r){var a=0===r.message.depth;if(r.childrenStackIds.length>0)r.message.isDeleted=!0,r.childrenStackIds.map((function(t){return d.findByStackId(e,t)})).forEach((function(e){e.message.replyToUsername="",e.message.replyToDisplayName="",e.message.replyToUserId=void 0}));else if(a)r.message.isDeleted=!0;else{var o=d.findByMessageId(e,n.parentMessageId);o.childrenStackIds=o.childrenStackIds.filter((function(e){return e!==n.id})),o.message.repliesCount--,delete e.messages[n.id]}}}))),(0,i.default)(o,v.REJECT_MESSAGES,(0,u.default)((function(e,t){t.payload.messages.forEach((function(t){var n=d.findByMessageId(e,t.id);if(n)if(n.childrenStackIds.length>0||n.hasNext)n.message.status=c.statuses.BLOCKED,e.messages[t.id].message.isPublished=!1,n.childrenStackIds.map((function(t){return d.findByStackId(e,t)})).forEach((function(e){e.message.replyToUsername="",e.message.replyToDisplayName="",e.message.replyToUserId=void 0}));else{var r,a,o,i,s=null==e||null===(r=e.messages)||void 0===r||null===(a=r[t.id])||void 0===a||null===(o=a.message)||void 0===o?void 0:o.parentMessageId;if(s)(null==e||null===(i=e.messages)||void 0===i?void 0:i[s]).message.repliesCount--,e.messages[t.id].message.status=c.statuses.BLOCKED,e.messages[t.id].message.isPublished=!1;else n.message.status=c.statuses.BLOCKED,e.messages[t.id].message.isPublished=!1}}))}))),(0,i.default)(o,O.DELETE_MESSAGES,(0,u.default)((function(e,t){t.payload.messages.forEach((function(t){var n=d.findByMessageId(e,t.id);if(n)if(n.childrenStackIds.length>0||n.hasNext)n.message.isDeleted=!0,n.childrenStackIds.map((function(t){return d.findByStackId(e,t)})).forEach((function(e){e.message.replyToUsername="",e.message.replyToDisplayName="",e.message.replyToUserId=void 0}));else{var r=e.messages[t.id].message.parentMessageId;if(r)e.messages[r].message.repliesCount--,e.messages[t.id].message.isDeleted=!0;else n.message.isDeleted=!0}}))}))),o),d.createMessagesStackListObject());t.default=A},666:function(e,t,n){"use strict";var r=n(0),a=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(n(33)),s=r(n(87)),u=n(19),c=r(n(21)),d=a(n(89)),l=n(134),E=a(n(345)),f=n(39),_=n(135),S=n(169),O=n(114),p=n(90),g=n(218);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=(0,u.handleActions)((o={},(0,i.default)(o,(0,u.combineActions)(f.INITIALIZE_CONVERSATION,f.FETCH_CONVERSATION_END,f.ADD_HIGHLIGHTED_MESSAGE),(0,c.default)((function(e,t){var n,r=t.payload,a=r.shouldReloadComments,o=r.comments,i=r.reportedComments,s=A(o);try{for(s.s();!(n=s.n()).done;){var u=n.value;if(a||!e[u.id]){if(i)i[u.id]&&(u=(0,g.reportMessage)(u));var c=d.createMessageStackObject({id:u.id,message:u,hasNext:u.hasNext});if(u.parentMessageId){var l=e[u.parentMessageId];l&&(e[u.parentMessageId]=d.addChild(e[u.parentMessageId],u),c=d.updateMessageByParent(c,l))}e[u.id]=c}}}catch(e){s.e(e)}finally{s.f()}}))),(0,i.default)(o,O.GET_REPLIES_END,(0,c.default)((function(e,t){var n,r=t.payload,a=r.comments,o=r.parentMessage,i=r.conversation,s=A(a);try{for(s.s();!(n=s.n()).done;){var u=n.value;if(!e[u.id]){var c=d.createMessageStackObject({id:u.id,message:u,hasNext:u.hasNext});if(u.parentMessageId){var l=e[u.parentMessageId];e[u.parentMessageId]=d.addChild(e[u.parentMessageId],u),c=d.updateMessageByParent(c,l)}e[u.id]=c}}}catch(e){s.e(e)}finally{s.f()}e[o.id]=d.updateMessagePagination(e[o.id],i)}))),(0,i.default)(o,f.CREATE_MESSAGE_END,{next:(0,c.default)((function(e,t){var n=t.payload,r=n.message,a=n.isLoggedIn;y(e,n.isRetry,r,a)})),throw:(0,c.default)((function(e,t){var n=t.payload,r=n.message,a=n.isLoggedIn;y(e,n.isRetry,r,a)}))}),(0,i.default)(o,f.CLEAN_FAILED_MESSAGE,(0,c.default)((function(e,t){var n,r,a=t.payload.message,o=null===(n=e[a.id])||void 0===n||null===(r=n.message)||void 0===r?void 0:r.parentMessageId;if(o){var i=e[o];i.childrenStackIds=i.childrenStackIds.filter((function(e){return e!==a.id})),i.message.repliesCount--}delete e[a.id]}))),(0,i.default)(o,(0,u.combineActions)(_.REALTIME_MESSAGE_VOTE,f.TOGGLE_MARK_MESSAGE,f.VOTE_TOGGLE_MESSAGE_START,f.PIN_MESSAGE_STATUS,f.MODERATION_USER_STATUS,f.REPORT_MESSAGE_END).toString(),(0,c.default)((function(e,t){var n=t.payload.message;e[n.id]=(0,E.default)(e[n.id],t)}))),(0,i.default)(o,l.UPDATED_MESSAGES,(0,c.default)((function(e,t){var n,r=A(t.payload);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a&&a.id){var o=e[a.id];o&&(o.message=(0,E.updateMessageStack)(o,a))}}}catch(e){r.e(e)}finally{r.f()}}))),(0,i.default)(o,S.GET_PREVIOUS_REPLIES_END,(0,c.default)((function(e,t){var n,r,a=t.payload,o=a.replies,i=void 0===o?[]:o,u=a.parentMessage,c=a.conversation,l=[],E=A(i);try{for(E.s();!(r=E.n()).done;){var f=r.value;if(!e[f.id]){var _=d.createMessageStackObject({id:f.id,message:f,hasNext:f.hasNext}),S=e[f.parentMessageId];_=d.updateMessageByParent(_,S),f.parentMessageId===u.id?l.push(_.id):e[f.parentMessageId]=d.addChild(e[f.parentMessageId],f),e[_.id]=_}}}catch(e){E.e(e)}finally{E.f()}var O=e[u.id];O.hasNext=c.hasNext,O.message.offset=c.offset,(n=O.childrenStackIds).unshift.apply(n,(0,s.default)(l.reverse()))}))),(0,i.default)(o,(0,u.combineActions)(f.MUTE_USER,f.UNMUTE_USER).toString(),(0,c.default)((function(e,t){var n=t.payload.userId;Object.values(e).filter((function(e){return e.message.user.id===n})).forEach((function(n){e[n.id]=(0,E.default)(e[n.id],t)}))}))),o),{});function y(e,t,n,r){for(var a=d.createMessageStackObject({id:n.id,message:v(v({},n),{},{isNew:!0,isMine:!0})}),o=0,i=Object.values(e);o<i.length;o++){i[o].isPostCommentActionEnabled=!1}if(e[n.id]=a,!t&&!(0,p.isRootMessage)(n)){var s=e[n.parentMessageId];s&&(r||(a.isPostCommentActionEnabled=!0),s.isAggregated&&(a.isAggregated=!0),s.childrenStackIds.unshift(n.id),s.message.repliesCount++)}if(a){e[n.id]=a;var u=a.message.tempMessageId;if(t&&u&&(e[u]=a),!(0,p.isRootMessage)(n)){var c=e[n.parentMessageId];c&&(0,g.updateMessageIdInList)(c.childrenStackIds,n.tempId,n.id)}}}t.default=I},667:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=n(19),s=r(n(21)),u=n(39),c=n(90),d=n(218);function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e,t){var n=t.payload,r=n.message,a=n.isRetry;(0,c.isRootMessage)(r)&&(!a&&(0,c.isRootMessage)(r)&&e.unshift(r.id),(0,d.updateMessageIdInList)(e,r.tempId,r.id))},_=(0,i.handleActions)((a={},(0,o.default)(a,(0,i.combineActions)(u.INITIALIZE_CONVERSATION,u.FETCH_CONVERSATION_END,u.ADD_HIGHLIGHTED_MESSAGE),(0,s.default)((function(e,t){var n=t.payload;n.shouldReloadComments&&(e=[]);var r,a=l(n.comments);try{for(a.s();!(r=a.n()).done;){var o=r.value;(0,c.isRootMessage)(o)&&!e.includes(o.id)&&e.push(o.id)}}catch(e){a.e(e)}finally{a.f()}return e}))),(0,o.default)(a,u.CREATE_MESSAGE_END,{next:(0,s.default)(f),throw:(0,s.default)(f)}),(0,o.default)(a,u.CLEAN_FAILED_MESSAGE,(0,s.default)((function(e,t){var n=t.payload.message;return(0,c.isRootMessage)(n)?e.filter((function(e){return e!==n.id})):e}))),a),[]);t.default=_},668:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxMobileWidth=function(e){return e.maxMobileWidth},t.isLiveBlog=function(e){return e.isConversationLiveBlog},t.default=void 0;var a,o=r(n(33)),i=n(19),s=n(39);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(0,i.handleActions)((a={},(0,o.default)(a,s.INITIALIZE_MODULE_OPTIONS,(function(e,t){return t.payload.moduleOptions})),(0,o.default)(a,s.SET_COMMUNITY_QUESTION,(function(e,t){var n=t.payload.moduleOptions;return c(c({},e),n)})),a),{});t.default=d},669:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=function(e){return e.isMobile},t.isMobileUA=function(e){return e.isMobileUA},t.default=void 0;var a=r(n(33)),o=n(19),i=n(348);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=(0,o.handleActions)((0,a.default)({},i.SET_IS_MOBILE,(function(e,t){var n=t.payload;return u(u({},e),{},{isMobile:n.isMobile,isMobileUA:n.isMobileUA})})),{isMobile:!1});t.default=c},670:function(e,t,n){"use strict";var r=n(34);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateIsMobile=void 0;var a=n(349),o=r(n(52)),i=r(n(50)),s=n(190),u=n(191);t.calculateIsMobile=function(e){return function(t,n){if(e){var r=n(),c=i.getMaxMobileWidth(r),d=(0,o.isMobileView)(e,c);t({type:a.SET_IS_MOBILE,payload:{isMobile:d,isMobileUA:o.default}}),t((0,s.setPlatform)(o.default?u.PLATFORMS.MOBILE:u.PLATFORMS.DESKTOP))}}}},671:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=r(n(21)),s=n(39),u=(0,n(19).handleActions)((a={},(0,o.default)(a,s.FETCH_USER_SUSPENSION_STATUS,(0,i.default)((function(e,t){var n=t.payload,r=n.isUserSuspended,a=n.expirationTime;e.isFetched=!0,e.isUserSuspended=r,a&&(e.expirationTime=new Date(1e3*a).toLocaleDateString())}))),(0,o.default)(a,s.UPDATE_USER_SUSPENSION,(0,i.default)((function(e,t){e.isUserSuspended=!0}))),a),{isFetched:!1});t.default=u},672:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=r(n(21)),s=n(19),u=n(39),c={selectedCommunityView:n(219).defaultCommunityView,preloadConversation:!1,focusSayControlOnSwitchTab:!1,scrollToHeader:!1},d=(0,s.handleActions)((a={},(0,o.default)(a,u.SET_COMMUNITY_VIEW,(0,i.default)((function(e,t){var n=t.payload;e.selectedCommunityView=n}))),(0,o.default)(a,u.PRELOAD_CONVERSATION,(0,i.default)((function(e){e.preloadConversation=!0}))),(0,o.default)(a,u.SCROLL_TO_HEADER,(0,i.default)((function(e,t){var n=t.payload;e.scrollToHeader=n}))),(0,o.default)(a,u.SET_FOCUS_SAY_CONTROL,(0,i.default)((function(e,t){var n=t.payload;e.focusSayControlOnSwitchTab=n}))),a),c);t.default=d},673:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(33)),i=r(n(21)),s=n(19),u=n(39),c=(0,s.handleActions)((a={},(0,o.default)(a,u.BLOCKLIST_USER_START,(0,i.default)((function(e,t){t.payload?e.blockAndDeleteLoading=!0:e.blockOnlyLoading=!0}))),(0,o.default)(a,u.BLOCKLIST_USER_FAILED,(0,i.default)((function(e){e.blockOnlyLoading=!1,e.blockAndDeleteLoading=!1,e.blockUserFailed=!0}))),(0,o.default)(a,u.BLOCKLIST_USER_END,(0,i.default)((function(e){e.blockOnlyLoading=!1,e.blockAndDeleteLoading=!1,e.isSuccess=!0}))),a),{blockOnlyLoading:!1,blockAndDeleteLoading:!1,blockUserFailed:!1,isSuccess:!1});t.default=c},679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKey=function(e,t){t=t.replace(/[\[\]]/g,"\\$&");var n,r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);n=r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null;return n}},680:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.objectFromQueryString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n={},r=e.indexOf("?");if(r>-1){var o=e.substring(r+1);""!==o&&o.split("&").forEach((function(e){var r=e.split("="),o=(0,a.default)(r,2),i=o[0],s=o[1];if(!t||-1!==t.indexOf(i))try{n[i]=decodeURIComponent(s)}catch(e){}}))}return n};var a=r(n(49))},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return!!e}))}},73:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(37)),o=r(n(33)),i=r(n(66)),s=r(n(38)),u=r(n(520));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){var e=(0,s.default)(a.default.mark((function e(t,n){var r,o,s,c,l,E;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,o=n.method,s=void 0===o?"GET":o,c=(0,i.default)(n,["data","method"]),l=d(d({},c),{},{method:s}),"GET"!==s&&Object.assign(l,{body:JSON.stringify(r)}),e.prev=3,e.next=6,(0,u.default)(t,l);case 6:return E=e.sent,e.abrupt("return",{body:E});case 10:throw e.prev=10,e.t0=e.catch(3),e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}();t.default=l},77:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.store=function(e,t,n,r){var a=new Date;a.setTime(a.getTime()+60*r*1e3),c.write(e,t,{path:"/",domain:n,expires:a}),d.write(e,JSON.stringify(t))},t.read=function(e){var t=c.read(e);t||(t=d.read(e));return t},t.jsonParse=function(e,t){try{return JSON.parse(e)}catch(e){return t}},t.getIsConsumedUrlParams=function(){return window.__SPOTIM__.isConsumedUrlParams},t.setIsConsumedUrlParams=function(e){window.__SPOTIM__.isConsumedUrlParams=e},t.openCommunityGuidelines=t.getUserBadge=t.clone=t.isStaffMember=t.isIE=t.isDisplayNameRequired=t.lockGuestUserName=t.isUserDisplayNameBlocked=t.isInvalidDisplayName=t.localStorage=t.cookie=void 0;var a=r(n(33)),o=n(355),i=n(3);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(){function e(e){return encodeURIComponent(e)}function t(t){return e(JSON.stringify(t))}return{write:function(n,r,a){if(a||(a={}),"number"==typeof a.expires){var o=a.expires,i=a.expires=new Date;i.setTime(+i+864e5*o)}return document.cookie=[e(n),"=",t(r),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")},read:function(e){for(var t,n,r=document.cookie?document.cookie.split("; "):[],a=0,o=r.length;a<o;a++){var i=r[a].split("="),s=(n=i.shift()||"",decodeURIComponent(n)),u=i.join("=");if(e&&e===s){t=u;break}}return t}}}();t.cookie=c;var d={isSupport:function(){try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(e){return i.metrics.error("localStorage",e),!1}}(),read:function(e){var t=null;return this.isSupport&&(t=window.localStorage.getItem(e)),t},write:function(e,t){return this.isSupport&&window.localStorage.setItem(e,t),!0}};t.localStorage=d;t.isInvalidDisplayName=function(e){return!e||0===e.trim().length};var l=function(e){var t;return null===(t=JSON.parse(window.localStorage.getItem("SPOTIM_LOCKED_GUEST_DISPLAY_NAME")||"{}"))||void 0===t?void 0:t[e]};t.isUserDisplayNameBlocked=l;t.lockGuestUserName=function(e){var t=u(u({},JSON.parse(window.localStorage.getItem("SPOTIM_LOCKED_GUEST_DISPLAY_NAME")||"{}")),{},(0,a.default)({},e,!0));return window.localStorage.setItem("SPOTIM_LOCKED_GUEST_DISPLAY_NAME",JSON.stringify(t))};t.isDisplayNameRequired=function(e){var t=e.isRegistered,n=e.isForceRegister,r=e.userId;return!t&&!n&&!l(r)};var E="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style;t.isIE=E;t.isStaffMember=function(e){return e.isSuperAdmin||e.isAdmin||e.isModerator||e.isJournalist};t.clone=function(e){return JSON.parse(JSON.stringify(e))};t.getUserBadge=function(e,t){var n;return t?n=o.Badges.REPORTER:e.isAdmin?n=o.Badges.ADMIN:e.isModerator?n=o.Badges.MODERATOR:e.isJournalist?n=o.Badges.JOURNALIST:e.isCommunityModerator?n=o.Badges.COMMUNITY_MODERATOR:e.ssoData&&e.ssoData.isSubscriber&&(n=o.Badges.SUBSCRIBER),n};t.openCommunityGuidelines=function(e){var t,n,r;null===(t=window)||void 0===t||null===(n=t.__OPEN_WEB__)||void 0===n||null===(r=n.renderCouumunityGuidelinesModal)||void 0===r||r.call(n,{postId:e})}},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={parseUser:!0};Object.defineProperty(t,"parseUser",{enumerable:!0,get:function(){return o.parseUser}});var a=n(269);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=n(152)},83:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),o=r(n(87)),i=n(262);function s(e,t){var n=null;return O(e)?n=c(e,t):p(e)&&(n=function e(t,n){var r={};S(n)&&(n=n());p(n)&&Object.keys(n).forEach((function(a){if("~"!==a){var o=n[a],s=function(e,t){for(var n,r,a=t.split("."),o=e,i=0;i<a.length&&o;i++)n=a[i],r=_(n),o=r.isArray?o[r.key][r.index]:o[n];i!==a.length&&(o=void 0);return o}(t,a);if(void 0!==s)if(function(e){return"string"==typeof e}(o))d(r,o,s);else if(S(o)&&(o=o()),p(o)){var u=o["~"];if(O(s)){if(!u)throw"Error: destination mapping root for "+a+" is missing.";s=c(s,o),d(r,u,s)}else{if(u)throw"Error: "+a+" value expected to be an array.";r=(0,i.deepExtendObject)(r,e(s,o))}}}}));return r}(e,t)),n}function u(e){if(2===arguments.length)return s(e,arguments[1]);if(arguments.length>2){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return Object.assign.apply(Object,[{}].concat((0,o.default)(t.map((function(t){return s(e,t)})))))}return null}function c(e,t){return e.map((function(e){return u(e,t)}))}function d(e,t,n){for(var r,a,o=t.split("."),i=e,s=o[o.length-1],u=0;u<o.length-1;u++)i=(a=_(r=o[u])).isArray?l(i=E(i,a.key),a.index):l(i,r);(a=_(s)).isArray?(i[a.key]||(i[a.key]=[]),i[a.key][a.index]=n):i[s]=n}function l(e,t){return f(e,t,{})}function E(e,t){return f(e,t,[])}function f(e,t,n){var r=e[t];return void 0===r&&(r=n,e[t]=r),r}function _(e){var t=e.match(/(.+)\[(\d+)\]/),n=!!t,r={isArray:n};return n&&(r.key=t[1],r.index=t[2]),r}function S(e){return null!==e&&"function"==typeof e}function O(e){return Array.isArray(e)}function p(e){return null!==e&&"object"===(0,a.default)(e)}var g={map:u};t.default=g},89:function(e,t,n){"use strict";var r=n(34),a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageStackObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d({id:(0,u.default)(),message:s.createMessageObject(),isAggregated:!1,isPostCommentActionEnabled:!1,isOutOfOrder:!1,childrenStackIds:[],loadingTop:!1,loadingBottom:!1,hasNext:!1,hasPrev:!1,showAllReplies:!1,isLastMessage:!1},e);e.message&&(t.message=s.createMessageObject(e.message));return t},t.isMessageId=function(e,t){var n=e.message;return null!==n&&n.id===t},t.hasMessage=function(e){return null!==e.message},t.getMessage=function(e){return e.message},t.getChildrenStackIds=function(e){return(null==e?void 0:e.childrenStackIds)||[]},t.getRepliesCount=function(e){return e.message.repliesCount},t.getMessageId=function(e){var t=e.message;return null===t?null:t.id},t.addChildStackId=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.updateMessageRepliesCount,a=void 0===r||r,o=n.index,i=void 0===o?-1:o,u=JSON.parse(JSON.stringify(e)),c=u.childrenStackIds.findIndex((function(e){return e===t}));-1===c&&(-1===i?u.childrenStackIds.push(t):u.childrenStackIds.splice(i,0,t));var l=u;if(a){var E=s.createMessageObject(d(d({},u.message),{},{repliesCount:u.message.repliesCount+1}));l.message=E}return l},t.setAggregated=function(e,t){var n=JSON.parse(JSON.stringify(e)),r=s.createMessageObject(d(d({},e.message),{},{isMarked:!0,isNew:!1}));return n.isAggregated=t,n.message=r,n},t.isEqual=function(e,t){return t.id===e.id||t.message&&e.message&&t.message.id===e.message.id},t.updateMessageByParent=t.addChild=t.updateMessagePagination=void 0;var o=a(n(33)),i=a(n(21)),s=r(n(90)),u=a(n(129));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=(0,i.default)((function(e,t){e.hasNext=t.hasNext,e.message.offset=t.offset}));t.updateMessagePagination=l;var E=(0,i.default)((function(e,t){e.childrenStackIds.push(t.id)}));t.addChild=E;var f=(0,i.default)((function(e,t){var n=t.message;e.message.depth=n.depth+1,n.isDeleted||(e.message.replyToUsername=n.user.username,n.userDisplayName?e.message.replyToDisplayName=n.userDisplayName:e.message.replyToDisplayName=n.user.displayName)}));t.updateMessageByParent=f},90:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l({id:(0,c.default)(),clientId:(0,c.default)(),isTempId:!1,conversationId:null,rootMessageId:null,parentMessageId:null,postedAt:(new Date).getTime()/1e3,upVotesCount:0,downVotesCount:0,viewsCount:0,repliesCount:0,userDisplayName:null,user:(0,u.createUserObject)(),entities:[],textEntities:[],mentions:[],isVotedUp:!1,isVotedDown:!1,isMine:!1,isNew:!1,isMarked:!1,isReported:!1,isEdited:!1,isDeleted:!1,version:0,replyToUserId:null,replyToUsername:null,replyToDisplayName:null,status:s.statuses.APPROVED,starsRating:null,isPinned:void 0,depth:0,offset:0,tempMessageId:""},e);e.user&&(t.user=(0,u.createUserObject)(e.user));var n=[],r=[],a=[];e.entities?e.entities.forEach((function(e){var t=e;t&&(n.push(t),t.type===s.entityTypes.MENTION&&a.push(t),t.type===s.entityTypes.TEXT&&r.push(t))})):(n=t.entities,r=t.textEntities,a=t.mentions);return t.entities=n,t.textEntities=r,t.mentions=a,t},t.isRootMessage=function(e){return!e.parentMessageId},t.MessageModeratingFailedType=t.MessageModeratingStages=void 0;var a,o,i=r(n(33)),s=n(51),u=n(78),c=r(n(129));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.MessageModeratingStages=a,function(e){e.LOADING="LOADING",e.FINISHED="FINISHED",e.FAILED="FAILED"}(a||(t.MessageModeratingStages=a={})),t.MessageModeratingFailedType=o,function(e){e.APPROVE="APPROVE",e.REJECT="REJECT"}(o||(t.MessageModeratingFailedType=o={}))},91:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.isNonBozoMode=c,t.isEnabled=l,t.isSuspensionEnabled=function(){return c()&&a.default.get("tenant_config.moderation.suspensions_enabled",!1)},t.isRealtimeEnabled=function(){return l()&&a.default.get("tenant_config.conversation.realtimeModerationEnabled",!1)},t.isAfterClickEnabled=E,t.isRealtimeMessageBlocked=function(e,t){return t.length>0&&[o.TPolicyVerdict.BLOCK_ALL,o.TPolicyVerdict.FORCE_BLOCK_ALL].includes(e)},t.isMessageBlockedVerdict=function(e,t){return t.length>0&&[o.TPolicyVerdict.REQUIRE_APPROVAL,o.TPolicyVerdict.BLOCK_ALL,o.TPolicyVerdict.FORCE_BLOCK_ALL].includes(e)},t.shouldModerateMessage=function(e,t){return E()&&!f(e,t)},t.isMessageAlreadyBlocked=f,t.getModerationState=function(e){return[o.TPolicyVerdict.BLOCK_ALL,o.TPolicyVerdict.FORCE_BLOCK_ALL].includes(e)?i.MessageStatus.BLOCKED:i.MessageStatus.PENDING},t.isValidKeyPress=function(e){return!s.includes(e)},t.REALTIME_MODERATION_TIME_MS=t.WHITELISTED_KEYS=void 0;var a=r(n(1)),o=n(160),i=n(132),s=[32];t.WHITELISTED_KEYS=s;var u=a.default.get("tenant_config.conversation.realtime_moderation_time_ms",500);function c(){return!a.default.get("init_data.config.policy.roger_mode",!0)}t.REALTIME_MODERATION_TIME_MS=u;var d=a.default.get("tenant_config.shared.realtime_moderation_enbled",!0);function l(){return d}function E(){return l()&&a.default.get("tenant_config.conversation.afterclickModerationEnabled",!1)}function f(e,t){var n=e.mainSayControl.isMessageBlocked,r=e.messageSayControls[t];return t?null==r?void 0:r.isMessageBlocked:n}},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_IS_LOADED=t.SET_UNSEEN_NOTIFICATION_COUNT=t.MARK_AS_READ=t.MARK_ALL_READ=t.GET_END=t.GET_START=void 0;t.GET_START="NOTIFICATIONS/GET_START";t.GET_END="NOTIFICATIONS/GET_END";t.MARK_ALL_READ="NOTIFICATIONS/MARK_ALL_READ";t.MARK_AS_READ="NOTIFICATIONS/MARK_AS_READ";t.SET_UNSEEN_NOTIFICATION_COUNT="NOTIFICATIONS/SET_UNSEEN_NOTIFICATION_COUNT";t.SET_IS_LOADED="NOTIFICATIONS/SET_IS_LOADED"},95:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.viewportObserver=t.cloudinary=void 0;var a=r(n(128)),o=r(n(517)),i=n(524),s=(0,o.default)(a.default.cloudinary.url,a.default.cloudinary.apiKey);t.cloudinary=s;var u=new i.ViewportObserver;t.viewportObserver=u},96:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createMessagesStackListObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u({messages:{},rootOrder:[],aggregatedMessage:[]},e)},t.hasItems=function(e){return Object.keys(e.messages).length>0},t.findBy=function(e,t){return Object.values(e.messages).find(t)||null},t.findByMessageId=c,t.getRootMessageStack=function(e,t){var n=c(e,t);for(;n&&n.message.parentMessageId;)n=c(e,n.message.parentMessageId);return n},t.findByStackId=function(e,t){return e.messages[t]},t.addMessageStack=function(e,t){return(0,o.default)(e,(function(e){e.messages[t.id]=t}))},t.addRootMessageStack=function(e,t){return(0,o.default)(e,(function(e){e.messages[t.id]=t,e.rootOrder.unshift(t.id)}))},t.deleteByMessageId=function(e,t){return(0,o.default)(e,(function(e){var n=e.messages[t].message.parentMessageId;if(n){var r=e.messages[n];r.childrenStackIds=r.childrenStackIds.filter((function(e){return e!==t}))}delete e.messages[t]}))},t.updateBy=d,t.updateByStackId=function(e,t,n){return d(e,t,n)},t.updateByMessageId=function(e,t,n){return d(e,t,n)},t.getAggregatedStacksSequence=function(e){return e.aggregatedMessage.map((function(t){return e.messages[t]}))},t.getRootMessages=function(e){return e.rootOrder.map((function(t){return e.messages[t]}))},t.count=function(e){return Object.keys(e.messages).length},t.getLastMessageStack=function(e,t){var n=t,r=t;for(;r;)(r=c(e,n.childrenStackIds[n.childrenStackIds.length-1]))&&(n=r);return n},t.traverse=function e(t,n){var r=[];if(0===n.childrenStackIds.length)return r;var a,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}(n.childrenStackIds.map((function(e){return c(t,e)})));try{for(o.s();!(a=o.n()).done;){var s=a.value;r.push(s),r=r.concat(e(t,s))}}catch(e){o.e(e)}finally{o.f()}return r};var a=r(n(33)),o=r(n(21));function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){return e.messages[t]}function d(e,t,n){return(0,o.default)(e,(function(e){e.messages[t]=u(u(u({},e.messages[t]),n),{},{message:u(u(u({},e.messages[t].message),n.message),{},{user:u(u({},e.messages[t].message.user),n.message.user)})})}))}},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPING_NOTIFY_INTERVAL=t.AGGREGATE_TYPING_THRESHOLD=t.AGGREGATE_MESSAGES_EXPAND_CHUNK=t.REPLIES_PAGE_SIZE=t.MOBILE_COMMENTS_FIRST_PAGE_SIZE=t.COMMENTS_PAGE_SIZE=t.COMMENTS_FIRST_PAGE_SIZE=void 0;t.COMMENTS_FIRST_PAGE_SIZE=25;t.COMMENTS_PAGE_SIZE=10;t.MOBILE_COMMENTS_FIRST_PAGE_SIZE=5;t.REPLIES_PAGE_SIZE=15;t.AGGREGATE_MESSAGES_EXPAND_CHUNK=25;t.AGGREGATE_TYPING_THRESHOLD=4;t.TYPING_NOTIFY_INTERVAL=1e4}}]);
//# sourceMappingURL=boot~conversation-component~feedback-modal~preRender-bundle.js.map